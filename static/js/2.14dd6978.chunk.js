(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(67)},function(e,t,n){e.exports=n(77)()},function(e,t,n){"use strict";n.r(t);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e};var a=function(e){var t=o(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(t)};function s(){}var l=function(e){return null==e?s:function(){return this.querySelector(e)}};function u(){return[]}var c=function(e){return null==e?u:function(){return this.querySelectorAll(e)}},h=function(e){return function(){return this.matches(e)}},d=function(e){return new Array(e.length)};function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var p="$";function g(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new f(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function v(e,t,n,r,i,o,a){var s,l,u,c={},h=t.length,d=o.length,g=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(g[s]=u=p+a.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<d;++s)(l=c[u=p+a.call(e,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new f(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&c[g[s]]===l&&(i[s]=l)}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var _=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function b(e,t){return e.style.getPropertyValue(t)||_(e).getComputedStyle(e,null).getPropertyValue(t)}function y(e){return e.trim().split(/^|\s+/)}function w(e){return e.classList||new x(e)}function x(e){this._node=e,this._names=y(e.getAttribute("class")||"")}function k(e,t){for(var n=w(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function S(e,t){for(var n=w(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}x.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C(){this.textContent=""}function E(){this.innerHTML=""}function T(){this.nextSibling&&this.parentNode.appendChild(this)}function P(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function A(){return null}function O(){var e=this.parentNode;e&&e.removeChild(this)}function z(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function N(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var M={},R=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(M={mouseenter:"mouseover",mouseleave:"mouseout"}));function D(e,t,n){return e=I(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function I(e,t,n){return function(r){var i=R;R=r;try{e.call(this,this.__data__,t,n)}finally{R=i}}}function j(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function F(e,t,n){var r=M.hasOwnProperty(e.type)?D:I;return function(i,o,a){var s,l=this.__on,u=r(t,o,a);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function L(e,t,n,r){var i=R;e.sourceEvent=R,R=e;try{return t.apply(n,r)}finally{R=i}}function B(e,t,n){var r=_(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var U=[null];function W(e,t){this._groups=e,this._parents=t}function V(){return new W([[document.documentElement]],U)}W.prototype=V.prototype={constructor:W,select:function(e){"function"!==typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=e.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new W(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new W(r,i)},filter:function(e){"function"!==typeof e&&(e=h(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new W(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n,r=t?v:g,i=this._parents,o=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var h=i[c],d=o[c],f=d.length,p=e.call(h,h&&h.__data__,c,i),m=p.length,_=l[c]=new Array(m),b=s[c]=new Array(m);r(h,d,_,b,u[c]=new Array(f),p,t);for(var y,w,x=0,k=0;x<m;++x)if(y=_[x]){for(x>=k&&(k=x+1);!(w=b[k])&&++k<m;);y._next=w||null}}return(s=new W(s,i))._enter=l,s._exit=u,s},enter:function(){return new W(this._enter||this._groups.map(d),this._parents)},exit:function(){return new W(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new W(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=m);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new W(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=o(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"===typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"===typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):b(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"===typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=y(e+"");if(arguments.length<2){for(var r=w(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?function(e,t){return function(){(t.apply(this,arguments)?k:S)(this,e)}}:t?function(e){return function(){k(this,e)}}:function(e){return function(){S(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?C:("function"===typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?E:("function"===typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(T)},lower:function(){return this.each(P)},append:function(e){var t="function"===typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:a(e),r=null==t?A:"function"===typeof t?t:l(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(O)},clone:function(e){return this.select(e?N:z)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?F:j,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?function(e,t){return function(){return B(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return B(this,e,t)}})(e,t))}};var H=V,q=function(e){return"string"===typeof e?new W([[document.querySelector(e)]],[document.documentElement]):new W([[e]],U)},Y=function(e){return q(a(e).call(document.documentElement))},$=0;function K(){return new X}function X(){this._="@"+(++$).toString(36)}X.prototype=K.prototype={constructor:X,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var G=function(){for(var e,t=R;e=t.sourceEvent;)t=e;return t},Q=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},J=function(e){var t=G();return t.changedTouches&&(t=t.changedTouches[0]),Q(e,t)},Z=function(e){return"string"===typeof e?new W([document.querySelectorAll(e)],[document.documentElement]):new W([null==e?[]:e],U)},ee=function(e,t,n){arguments.length<3&&(n=t,t=G().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return Q(e,r);return null},te=function(e,t){null==t&&(t=G().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=Q(e,t[n]);return i};n.d(t,"create",function(){return Y}),n.d(t,"creator",function(){return a}),n.d(t,"local",function(){return K}),n.d(t,"matcher",function(){return h}),n.d(t,"mouse",function(){return J}),n.d(t,"namespace",function(){return o}),n.d(t,"namespaces",function(){return i}),n.d(t,"clientPoint",function(){return Q}),n.d(t,"select",function(){return q}),n.d(t,"selectAll",function(){return Z}),n.d(t,"selection",function(){return H}),n.d(t,"selector",function(){return l}),n.d(t,"selectorAll",function(){return c}),n.d(t,"style",function(){return b}),n.d(t,"touch",function(){return ee}),n.d(t,"touches",function(){return te}),n.d(t,"window",function(){return _}),n.d(t,"event",function(){return R}),n.d(t,"customEvent",function(){return L})},function(e,t,n){var r=n(50),i=n(14),o=n(25).json,a=n(25).text,s=n(27).csvParseRows,l=n(2).selection;try{var u=n(97).saveAs}catch(b){console.warn("Not a browser, so FileSaver.js not available.")}function c(){try{new Blob}catch(b){alert("Blob not supported")}}function h(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t,n,r){if(r)return t&&console.warn("File "+t+" overridden by value."),void n.call(e,null,r);t?h(t,"json")?o(t,function(t,r){n.call(e,t,r)}):h(t,"css")?a(t,function(t,r){n.call(e,t,r)}):n.call(e,"Unrecognized file type",null):n.call(e,"No filename",null)}function f(e,t){var n=[];for(var r in e){var i=e[r];i[t]=r,n.push(i)}return n}function p(e){return i.isArray(e)?i.map(e,function(e){return p(e)}):i.isObject(e)?i.mapObject(e,function(e,t){return p(e)}):e}function g(e,t,n){return{x:Math.cos(-t)*(e.x-n.x)+Math.sin(-t)*(e.y-n.y)+n.x-e.x,y:-Math.sin(-t)*(e.x-n.x)+Math.cos(-t)*(e.y-n.y)+n.y-e.y}}function v(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2==1?e[t]:(e[t-1]+e[t])/2}function m(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function _(e){return e.ownerDocument}e.exports={set_options:function(e,t,n){if(void 0===e||null===e)return t;var r={};for(var i in t){var o=i in e&&null!==e[i]&&void 0!==e[i],a=o?e[i]:t[i];n&&i in n&&(a=parseFloat(a),isNaN(a)&&(o?(console.warn("Bad float for option "+i),a=parseFloat(t[i]),isNaN(a)&&(console.warn("Bad float for default "+i),a=null)):(console.warn("Bad float for default "+i),a=null))),r[i]=a}return r},remove_child_nodes:function(e){var t=e.node();for(;t.hasChildNodes();)t.removeChild(t.lastChild)},load_css:function(e,t){e&&a(e,function(e,n){e&&console.warn(e),t(n)});return!1},load_files:function(e,t,n){0===t.length&&n.call(e);var r=-1,i=t.length;for(;++r<t.length;)d(e,t[r].file,function(t,r){this.call(e,t,r),--i||n.call(e)}.bind(t[r].callback),t[r].value)},load_the_file:d,make_class:function(){var e;return function t(n){if(!(this instanceof t)){e=!0;var r=new t(arguments);return e=!1,r}"function"===typeof this.init&&this.init.apply(this,e?n:arguments)}},setup_defs:function(e,t){e.select("defs").remove();var n=e.append("defs"),r=n.node();return r.parentNode.insertBefore(r,r.parentNode.firstChild),n.append("style").attr("type","text/css").text(t),n},draw_an_object:function(e,t,n,r,i,o,a,s){var l={};for(var u in r)void 0===r[u]?console.warn("Undefined value for id "+u+" in object. Ignoring."):l[u]=r[u];var c=e.select(t).selectAll(n).data(f(l,i),function(e){return e[i]}),h=o?o(c.enter()).merge(c):c;a&&h.call(a);s&&c.exit().call(s)},draw_a_nested_object:function(e,t,n,r,i,o,a){var s=e.selectAll(t).data(function(e){return f(e[n],r)},function(e){return e[r]}),l=i?i(s.enter()).merge(s):s;o&&l.call(o);a&&s.exit().call(a)},make_array:function(e,t){var n=[];for(var r in e){var i=p(e[r]);i[t]=r,n.push(i)}return n},make_array_ref:f,compare_arrays:function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return!1;return!0},array_to_object:function(e){for(var t={},n=0,r=e.length;n<r;n++)for(var i=e[n],o=Object.keys(i),a=0,s=o.length;a<s;a++){var l=o[a];if(l in t)t[l][n]=i[l];else{for(var u=[],c=0;c<r;c++)u[c]=null;u[n]=i[l],t[l]=u}}return t},clone:p,extend:function(e,t,n){void 0===n&&(n=!1);for(var r in t){if(r in e&&!n)throw new Error("Attribute "+r+" already in object.");e[r]=t[r]}},unique_concat:function(e){var t=[];return e.forEach(function(e){e.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),t},unique_strings_array:function(e){for(var t=[],n=0,r=e.length;n<r;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),a&&e.apply(i,o)}},object_slice_for_ids:function(e,t){var n={},r=-1;for(;++r<t.length;)n[t[r]]=p(e[t[r]]);t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset");return n},object_slice_for_ids_ref:function(e,t){var n={},r=-1;for(;++r<t.length;)n[t[r]]=e[t[r]];t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset");return n},c_plus_c:function(e,t){if(null===e||null===t||void 0===e||void 0===t)return null;return{x:e.x+t.x,y:e.y+t.y}},c_minus_c:function(e,t){if(null===e||null===t||void 0===e||void 0===t)return null;return{x:e.x-t.x,y:e.y-t.y}},c_times_scalar:function(e,t){return{x:e.x*t,y:e.y*t}},download_json:function(e,t){c();var n=JSON.stringify(e),r=new Blob([n],{type:"application/json"});u(r,t+".json")},load_json:function(e,t,n,r){window.File&&window.FileReader&&window.FileList&&window.Blob||t("The File APIs are not fully supported in this browser.",null);var i=new window.FileReader;if(i.onload=function(e){var n,r=e.target.result;try{n=JSON.parse(r)}catch(b){return void t(b,null)}t(null,n)},void 0!==n&&null!==n)try{n()}catch(b){console.warn(b)}i.onabort=function(e){try{r()}catch(b){console.warn(b)}},i.onerror=function(e){try{r()}catch(b){console.warn(b)}},i.readAsText(e)},load_json_or_csv:function(e,t,n,r,i,o){var a=function(e){var r,i,o=e.target.result;try{r=JSON.parse(o)}catch(b){i="JSON error: "+b;try{r=t(s(o))}catch(b){return void n(i+"\nCSV error: "+b,null)}}n(null,r)};if(void 0!==o&&null!==o)return console.warn("Debugging load_json_or_csv"),a(o);window.File&&window.FileReader&&window.FileList&&window.Blob||n("The File APIs are not fully supported in this browser.",null);var l=new window.FileReader;if(void 0!==r&&null!==r)try{r()}catch(b){console.warn(b)}l.onabort=function(e){try{i()}catch(b){console.warn(b)}},l.onerror=function(e){try{i()}catch(b){console.warn(b)}},l.onload=a,l.readAsText(e)},download_svg:function(e,t,n){c();var i=(new XMLSerializer).serializeToString(t.node());n&&(i=r.xml(i));i='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+i;var o=new Blob([i],{type:"image/svg+xml"});u(o,e+".svg")},download_png:function(e,t,n){c();var i=(new XMLSerializer).serializeToString(t.node());n&&(i=r.xml(i));i='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+i;var o=document.createElement("canvas"),a=o.getContext("2d"),s=t.node().getBBox(),l=s.width+s.x,h=s.height+s.y;l<1e4&&h<1e4?(o.width=l,o.height=h):o.width>o.height?(o.width=1e4,o.height=h/l*1e4):(o.width=l/h*1e4,o.height=1e4);var d=new Image;d.src="data:image/svg+xml;base64,"+btoa(i),d.onload=function(){a.fillStyle="#FFF",a.fillRect(0,0,o.width,o.height),a.drawImage(d,0,0,o.width,o.height),o.toBlob(function(t){u(t,e+".png")})}},rotate_coords_recursive:function(e,t,n){return e.map(function(e){return g(e,t,n)})},rotate_coords:g,get_angle:function(e){var t=e[1].x-e[0].x,n=e[1].y-e[0].y;return 0===t&&n>=0?Math.PI/2:0===t&&n<0?3*Math.PI/2:t>=0&&n>=0?Math.atan(n/t):t>=0?Math.atan(n/t)+2*Math.PI:Math.atan(n/t)+Math.PI},to_degrees:function(e){return 180*e/Math.PI},to_radians_norm:function(e){return function(e){e<-Math.PI?e+=2*Math.ceil(e/(-2*Math.PI))*Math.PI:e>Math.PI&&(e-=2*Math.ceil(e/(2*Math.PI))*Math.PI);return e}(Math.PI/180*e)},angle_for_event:function(e,t,n){var r=Math.atan2(t.x-n.x,n.y-t.y);return Math.atan2(t.x-n.x+e.x,n.y-t.y-e.y)-r},distance:function(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))},check_undefined:function(e,t){t.map(function(n,r){void 0===e[r]&&console.error("Argument is undefined: "+String(t[r]))})},compartmentalize:function(e,t){return e+"_"+t},decompartmentalize:function(e){var t=/(.*)_([a-z0-9]{1,2})$/.exec(e);return null!==t?t.slice(1,3):[e,null]},mean:function(e){return e.reduce(function(e,t){return e+t})/e.length},median:v,quartiles:function(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return 1===e.length?[e[0],e[0],e[0]]:e.length%2===1?[v(e.slice(0,t)),e[t],v(e.slice(t+1))]:[v(e.slice(0,t)),(e[t-1]+e[t])/2,v(e.slice(t))]},random_characters:m,generate_map_id:function(){return m(12)},check_for_parent_tag:function(e,t){e instanceof l&&(e=e.node());for(;null!==e.parentNode;)if(void 0!==(e=e.parentNode).tagName&&e.tagName.toLowerCase()===t.toLowerCase())return!0;return!1},name_to_url:function(e,t){void 0!==t&&null!==t&&(t=t.replace(/^\/|\/$/g,""),e=[t,e].join("/"));return e.replace(/^\/|\/$/g,"")+".json"},parse_url_components:function(e,t){i.isUndefined(t)&&(t={});for(var n=e.location.search.substring(1).split("&"),r=0,o=n.length;r<o;r++){var a=n[r].split("="),s=decodeURIComponent(a[1]);if(a[0].indexOf("[]")===a[0].length-2){var l=a[0].replace("[]","");l in t||(t[l]=[]),t[l].push(s)}else t[a[0]]=s}return t},get_document:_,get_window:function(e){return _(e).defaultView},d3_transform_catch:function(e){if(-1!==e.indexOf("skew")||-1!==e.indexOf("matrix"))throw new Error("d3_transform_catch does not work with skew or matrix");var t=/translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(e),n=i.isNull(t),r=n?0:Number(t[1]),o=n?0:Number(t[2]),a=/rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(e),s=i.isNull(a)?0:Number(a[1]),l=/scale\s*\(\s*([0-9.-]+)\s*\)/.exec(e),u=i.isNull(l)?0:Number(l[1]);return{translate:[r,o],rotate:s,scale:u}},check_browser:function(e){try{return function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/)))return e.slice(1).join(" ").replace("OPR","Opera");n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]);return n.join(" ")}().toLowerCase().indexOf(e)>-1}catch(b){return!1}}}},function(e,t,n){"use strict";var r=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function o(){}var a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),d=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),f=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),v=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(e){var t;return e=(e+"").trim().toLowerCase(),(t=u.exec(e))?new k((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=c.exec(e))?b(parseInt(t[1],16)):(t=h.exec(e))?new k(t[1],t[2],t[3],1):(t=d.exec(e))?new k(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?y(t[1],t[2],t[3],t[4]):(t=p.exec(e))?y(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=g.exec(e))?C(t[1],t[2]/100,t[3]/100,1):(t=v.exec(e))?C(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?b(m[e]):"transparent"===e?new k(NaN,NaN,NaN,0):null}function b(e){return new k(e>>16&255,e>>8&255,255&e,1)}function y(e,t,n,r){return r<=0&&(e=t=n=NaN),new k(e,t,n,r)}function w(e){return e instanceof o||(e=_(e)),e?new k((e=e.rgb()).r,e.g,e.b,e.opacity):new k}function x(e,t,n,r){return 1===arguments.length?w(e):new k(e,t,n,null==r?1:r)}function k(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function S(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function C(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new T(e,t,n,r)}function E(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof T)return new T(e.h,e.s,e.l,e.opacity);if(e instanceof o||(e=_(e)),!e)return new T;if(e instanceof T)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,u=(a+i)/2;return l?(s=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new T(s,l,u,e.opacity)}(e):new T(e,t,n,null==r?1:r)}function T(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function P(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}r(o,_,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(k,x,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new k(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new k(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+S(this.r)+S(this.g)+S(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),r(T,E,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new T(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new T(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new k(P(e>=240?e-240:e+120,i,r),P(e,i,r),P(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var A=Math.PI/180,O=180/Math.PI,z=.96422,N=1,M=.82521,R=4/29,D=6/29,I=3*D*D,j=D*D*D;function F(e){if(e instanceof B)return new B(e.l,e.a,e.b,e.opacity);if(e instanceof $){if(isNaN(e.h))return new B(e.l,0,0,e.opacity);var t=e.h*A;return new B(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof k||(e=w(e));var n,r,i=H(e.r),o=H(e.g),a=H(e.b),s=U((.2225045*i+.7168786*o+.0606169*a)/N);return i===o&&o===a?n=r=s:(n=U((.4360747*i+.3850649*o+.1430804*a)/z),r=U((.0139322*i+.0971045*o+.7141733*a)/M)),new B(116*s-16,500*(n-s),200*(s-r),e.opacity)}function L(e,t,n,r){return 1===arguments.length?F(e):new B(e,t,n,null==r?1:r)}function B(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function U(e){return e>j?Math.pow(e,1/3):e/I+R}function W(e){return e>D?e*e*e:I*(e-R)}function V(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function H(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function q(e){if(e instanceof $)return new $(e.h,e.c,e.l,e.opacity);if(e instanceof B||(e=F(e)),0===e.a&&0===e.b)return new $(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*O;return new $(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Y(e,t,n,r){return 1===arguments.length?q(e):new $(e,t,n,null==r?1:r)}function $(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}r(B,L,i(o,{brighter:function(e){return new B(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new B(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new k(V(3.1338561*(t=z*W(t))-1.6168667*(e=N*W(e))-.4906146*(n=M*W(n))),V(-.9787684*t+1.9161415*e+.033454*n),V(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),r($,Y,i(o,{brighter:function(e){return new $(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new $(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return F(this).rgb()}}));var K=-.14861,X=1.78277,G=-.29227,Q=-.90649,J=1.97294,Z=J*Q,ee=J*X,te=X*G-Q*K;function ne(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof re)return new re(e.h,e.s,e.l,e.opacity);e instanceof k||(e=w(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(te*r+Z*t-ee*n)/(te+Z-ee),o=r-i,a=(J*(n-i)-G*o)/Q,s=Math.sqrt(a*a+o*o)/(J*i*(1-i)),l=s?Math.atan2(a,o)*O-120:NaN;return new re(l<0?l+360:l,s,i,e.opacity)}(e):new re(e,t,n,null==r?1:r)}function re(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}r(re,ne,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new re(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new re(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*A,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new k(255*(t+n*(K*r+X*i)),255*(t+n*(G*r+Q*i)),255*(t+n*(J*r)),this.opacity)}})),n.d(t,"a",function(){return _}),n.d(t,"f",function(){return x}),n.d(t,"d",function(){return E}),n.d(t,"e",function(){return L}),n.d(t,"c",function(){return Y}),n.d(t,"b",function(){return ne})},function(e,t,n){e.exports=n(72)},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";var r=n(4);function i(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}var o=function(e){return function(){return e}};function a(e,t){return function(n){return e+n*t}}function s(e,t){var n=t-e;return n?a(e,n>180||n<-180?n-360*Math.round(n/360):n):o(isNaN(e)?t:e)}function l(e){return 1===(e=+e)?u:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):o(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?a(e,n):o(isNaN(e)?t:e)}var c=function e(t){var n=l(t);function i(e,t){var i=n((e=Object(r.f)(e)).r,(t=Object(r.f)(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),s=u(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function h(e){return function(t){var n,i,o=t.length,a=new Array(o),s=new Array(o),l=new Array(o);for(n=0;n<o;++n)i=Object(r.f)(t[n]),a[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}h(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],s=r>0?e[r-1]:2*o-a,l=r<t-1?e[r+2]:2*a-o;return i((n-r/t)*t,s,o,a,l)}}),h(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return i((n-r/t)*t,o,a,s,l)}});var d=function(e,t){return t-=e=+e,function(n){return e+t*n}},f=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p=new RegExp(f.source,"g");var g,v,m,_,b=function(e,t){var n,r,i,o=f.lastIndex=p.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=f.exec(e))&&(r=p.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:d(n,r)})),o=p.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})},y=function(e,t){var n,i=typeof t;return null==t||"boolean"===i?o(t):("number"===i?d:"string"===i?(n=Object(r.a)(t))?(t=n,c):b:t instanceof r.a?c:t instanceof Date?function(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}:Array.isArray(t)?function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=y(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?function(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=y(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}:d)(e,t)},w=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},x=180/Math.PI,k={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},S=function(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*x,skewX:Math.atan(l)*x,scaleX:a,scaleY:s}};function C(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:d(e,i)},{i:l-2,x:d(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:d(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:d(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:d(e,n)},{i:s-2,x:d(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var E=C(function(e){return"none"===e?k:(g||(g=document.createElement("DIV"),v=document.documentElement,m=document.defaultView),g.style.transform=e,e=m.getComputedStyle(v.appendChild(g),null).getPropertyValue("transform"),v.removeChild(g),e=e.slice(7,-1).split(","),S(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),T=C(function(e){return null==e?k:(_||(_=document.createElementNS("http://www.w3.org/2000/svg","g")),_.setAttribute("transform",e),(e=_.transform.baseVal.consolidate())?(e=e.matrix,S(e.a,e.b,e.c,e.d,e.e,e.f)):k)},", ",")",")"),P=Math.SQRT2;function A(e){return((e=Math.exp(e))+1/e)/2}var O=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2],c=s-i,h=l-o,d=c*c+h*h;if(d<1e-12)r=Math.log(u/a)/P,n=function(e){return[i+e*c,o+e*h,a*Math.exp(P*e*r)]};else{var f=Math.sqrt(d),p=(u*u-a*a+4*d)/(2*a*2*f),g=(u*u-a*a-4*d)/(2*u*2*f),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/P,n=function(e){var t,n=e*r,s=A(v),l=a/(2*f)*(s*(t=P*n+v,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+l*c,o+l*h,a*s/A(P*n+v)]}}return n.duration=1e3*r,n};function z(e){return function(t,n){var i=e((t=Object(r.d)(t)).h,(n=Object(r.d)(n)).h),o=u(t.s,n.s),a=u(t.l,n.l),s=u(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(e),t.opacity=s(e),t+""}}}z(s),z(u);function N(e){return function(t,n){var i=e((t=Object(r.c)(t)).h,(n=Object(r.c)(n)).h),o=u(t.c,n.c),a=u(t.l,n.l),s=u(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=o(e),t.l=a(e),t.opacity=s(e),t+""}}}N(s),N(u);function M(e){return function t(n){function i(t,i){var o=e((t=Object(r.b)(t)).h,(i=Object(r.b)(i)).h),a=u(t.s,i.s),s=u(t.l,i.l),l=u(t.opacity,i.opacity);return function(e){return t.h=o(e),t.s=a(e),t.l=s(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,i.gamma=t,i}(1)}M(s);var R=M(u);n.d(t,"a",function(){return y}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return T}),n.d(t,"i",function(){return O}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return R})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)})}}n.d(t,"a",function(){return i})},function(e,t,n){(function(e,n){var r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,a=Array.prototype,s=Object.prototype,l="undefined"!==typeof Symbol?Symbol.prototype:null,u=a.push,c=a.slice,h=s.toString,d=s.hasOwnProperty,f=Array.isArray,p=Object.keys,g=Object.create,v=function(){},m=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};t.nodeType?i._=m:(!n.nodeType&&n.exports&&(t=n.exports=m),t._=m),m.VERSION="1.9.1";var _,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return m.iteratee!==_?m.iteratee(e,t):null==e?m.identity:m.isFunction(e)?b(e,t,n):m.isObject(e)&&!m.isArray(e)?m.matcher(e):m.property(e)};m.iteratee=_=function(e,t){return y(e,t,1/0)};var w=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},x=function(e){if(!m.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&d.call(e,t)},C=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},E=Math.pow(2,53)-1,T=k("length"),P=function(e){var t=T(e);return"number"==typeof t&&t>=0&&t<=E};m.each=m.forEach=function(e,t,n){var r,i;if(t=b(t,n),P(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=m.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},m.map=m.collect=function(e,t,n){t=y(t,n);for(var r=!P(e)&&m.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var A=function(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!P(t)&&m.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var l=o?o[s]:s;r=n(r,t[l],l,t)}return r}(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(e,t,n){var r=(P(e)?m.findIndex:m.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},m.filter=m.select=function(e,t,n){var r=[];return t=y(t,n),m.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},m.reject=function(e,t,n){return m.filter(e,m.negate(y(t)),n)},m.every=m.all=function(e,t,n){t=y(t,n);for(var r=!P(e)&&m.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},m.some=m.any=function(e,t,n){t=y(t,n);for(var r=!P(e)&&m.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},m.contains=m.includes=m.include=function(e,t,n,r){return P(e)||(e=m.values(e)),("number"!=typeof n||r)&&(n=0),m.indexOf(e,t,n)>=0},m.invoke=w(function(e,t,n){var r,i;return m.isFunction(t)?i=t:m.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),m.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=C(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),m.pluck=function(e,t){return m.map(e,m.property(t))},m.where=function(e,t){return m.filter(e,m.matcher(t))},m.findWhere=function(e,t){return m.find(e,m.matcher(t))},m.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=P(e)?e:m.values(e)).length;s<l;s++)null!=(r=e[s])&&r>o&&(o=r);else t=y(t,n),m.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},m.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=P(e)?e:m.values(e)).length;s<l;s++)null!=(r=e[s])&&r<o&&(o=r);else t=y(t,n),m.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},m.shuffle=function(e){return m.sample(e,1/0)},m.sample=function(e,t,n){if(null==t||n)return P(e)||(e=m.values(e)),e[m.random(e.length-1)];var r=P(e)?m.clone(e):m.values(e),i=T(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=m.random(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)},m.sortBy=function(e,t,n){var r=0;return t=y(t,n),m.pluck(m.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var O=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=y(r,i),m.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};m.groupBy=O(function(e,t,n){S(e,n)?e[n].push(t):e[n]=[t]}),m.indexBy=O(function(e,t,n){e[n]=t}),m.countBy=O(function(e,t,n){S(e,n)?e[n]++:e[n]=1});var z=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(e){return e?m.isArray(e)?c.call(e):m.isString(e)?e.match(z):P(e)?m.map(e,m.identity):m.values(e):[]},m.size=function(e){return null==e?0:P(e)?e.length:m.keys(e).length},m.partition=O(function(e,t,n){e[n?0:1].push(t)},!0),m.first=m.head=m.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:m.initial(e,e.length-t)},m.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},m.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:m.rest(e,Math.max(0,e.length-t))},m.rest=m.tail=m.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},m.compact=function(e){return m.filter(e,Boolean)};var N=function e(t,n,r,i){for(var o=(i=i||[]).length,a=0,s=T(t);a<s;a++){var l=t[a];if(P(l)&&(m.isArray(l)||m.isArguments(l)))if(n)for(var u=0,c=l.length;u<c;)i[o++]=l[u++];else e(l,n,r,i),o=i.length;else r||(i[o++]=l)}return i};m.flatten=function(e,t){return N(e,t,!1)},m.without=w(function(e,t){return m.difference(e,t)}),m.uniq=m.unique=function(e,t,n,r){m.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],a=0,s=T(e);a<s;a++){var l=e[a],u=n?n(l,a,e):l;t&&!n?(a&&o===u||i.push(l),o=u):n?m.contains(o,u)||(o.push(u),i.push(l)):m.contains(i,l)||i.push(l)}return i},m.union=w(function(e){return m.uniq(N(e,!0,!0))}),m.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=T(e);r<i;r++){var o=e[r];if(!m.contains(t,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},m.difference=w(function(e,t){return t=N(t,!0,!0),m.filter(e,function(e){return!m.contains(t,e)})}),m.unzip=function(e){for(var t=e&&m.max(e,T).length||0,n=Array(t),r=0;r<t;r++)n[r]=m.pluck(e,r);return n},m.zip=w(m.unzip),m.object=function(e,t){for(var n={},r=0,i=T(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var M=function(e){return function(t,n,r){n=y(n,r);for(var i=T(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};m.findIndex=M(1),m.findLastIndex=M(-1);var R=function(e,t,n){return function(r,i,o){var a=0,s=T(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!==i)return(o=t(c.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}};m.indexOf=R(1,m.findIndex,m.sortedIndex=function(e,t,n,r){for(var i=(n=y(n,r,1))(t),o=0,a=T(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o}),m.lastIndexOf=R(-1,m.findLastIndex),m.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},m.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(c.call(e,r,r+=t));return n};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),a=e.apply(o,i);return m.isObject(a)?a:o};m.bind=w(function(e,t,n){if(!m.isFunction(e))throw new TypeError("Bind must be called on a function");var r=w(function(i){return D(e,r,t,this,n.concat(i))});return r}),(m.partial=w(function(e,t){var n=m.partial.placeholder;return function r(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return D(e,r,this,this,a)}})).placeholder=m,m.bindAll=w(function(e,t){var n=(t=N(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=m.bind(e[r],e)}}),m.memoize=function(e,t){var n=function n(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return S(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=w(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),r=null,a=e.apply(i,o),r||(i=o=null)},u=function(){var u=m.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=u,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},m.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=w(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=m.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},m.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},m.once=m.partial(m.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},2),m.restArguments=w;var I=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(e,t){var n=j.length,r=e.constructor,i=m.isFunction(r)&&r.prototype||s,o="constructor";for(S(e,o)&&!m.contains(t,o)&&t.push(o);n--;)(o=j[n])in e&&e[o]!==i[o]&&!m.contains(t,o)&&t.push(o)};m.keys=function(e){if(!m.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)S(e,n)&&t.push(n);return I&&F(e,t),t},m.allKeys=function(e){if(!m.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&F(e,t),t},m.values=function(e){for(var t=m.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},m.mapObject=function(e,t,n){t=y(t,n);for(var r=m.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},m.pairs=function(e){for(var t=m.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},m.invert=function(e){for(var t={},n=m.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},m.functions=m.methods=function(e){var t=[];for(var n in e)m.isFunction(e[n])&&t.push(n);return t.sort()};var L=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,l=0;l<s;l++){var u=a[l];t&&void 0!==n[u]||(n[u]=o[u])}return n}};m.extend=L(m.allKeys),m.extendOwn=m.assign=L(m.keys),m.findKey=function(e,t,n){t=y(t,n);for(var r,i=m.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r};var B,U,W=function(e,t,n){return t in n};m.pick=w(function(e,t){var n={},r=t[0];if(null==e)return n;m.isFunction(r)?(t.length>1&&(r=b(r,t[1])),t=m.allKeys(e)):(r=W,t=N(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),m.omit=w(function(e,t){var n,r=t[0];return m.isFunction(r)?(r=m.negate(r),t.length>1&&(n=t[1])):(t=m.map(N(t,!1,!1),String),r=function(e,n){return!m.contains(t,n)}),m.pick(e,r,n)}),m.defaults=L(m.allKeys,!0),m.create=function(e,t){var n=x(e);return t&&m.extendOwn(n,t),n},m.clone=function(e){return m.isObject(e)?m.isArray(e)?e.slice():m.extend({},e):e},m.tap=function(e,t){return t(e),e},m.isMatch=function(e,t){var n=m.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0},B=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&U(e,t,n,r)},U=function(e,t,n,r){e instanceof m&&(e=e._wrapped),t instanceof m&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],n,r))return!1}else{var c,d=m.keys(e);if(u=d.length,m.keys(t).length!==u)return!1;for(;u--;)if(c=d[u],!S(t,c)||!B(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(e,t){return B(e,t)},m.isEmpty=function(e){return null==e||(P(e)&&(m.isArray(e)||m.isString(e)||m.isArguments(e))?0===e.length:0===m.keys(e).length)},m.isElement=function(e){return!(!e||1!==e.nodeType)},m.isArray=f||function(e){return"[object Array]"===h.call(e)},m.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){m["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),m.isArguments(arguments)||(m.isArguments=function(e){return S(e,"callee")});var V=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof V&&(m.isFunction=function(e){return"function"==typeof e||!1}),m.isFinite=function(e){return!m.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},m.isNaN=function(e){return m.isNumber(e)&&isNaN(e)},m.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},m.isNull=function(e){return null===e},m.isUndefined=function(e){return void 0===e},m.has=function(e,t){if(!m.isArray(t))return S(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!d.call(e,i))return!1;e=e[i]}return!!n},m.noConflict=function(){return i._=o,this},m.identity=function(e){return e},m.constant=function(e){return function(){return e}},m.noop=function(){},m.property=function(e){return m.isArray(e)?function(t){return C(t,e)}:k(e)},m.propertyOf=function(e){return null==e?function(){}:function(t){return m.isArray(t)?C(e,t):e[t]}},m.matcher=m.matches=function(e){return e=m.extendOwn({},e),function(t){return m.isMatch(t,e)}},m.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},m.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},m.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=m.invert(H),Y=function(e){var t=function(t){return e[t]},n="(?:"+m.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};m.escape=Y(H),m.unescape=Y(q),m.result=function(e,t,n){m.isArray(t)||(t=[t]);var r=t.length;if(!r)return m.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=m.isFunction(o)?o.call(e):o}return e};var $=0;m.uniqueId=function(e){var t=++$+"";return e?e+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+X[e]};m.template=function(e,t,n){!t&&n&&(t=n),t=m.defaults({},t,m.templateSettings);var r,i=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(G,Q),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(t.variable||"obj","_",a)}catch(u){throw u.source=a,u}var s=function(e){return r.call(this,e,m)},l=t.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},m.chain=function(e){var t=m(e);return t._chain=!0,t};var J=function(e,t){return e._chain?m(t).chain():t};m.mixin=function(e){return m.each(m.functions(e),function(t){var n=m[t]=e[t];m.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),J(this,n.apply(m,e))}}),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];m.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],J(this,n)}}),m.each(["concat","join","slice"],function(e){var t=a[e];m.prototype[e]=function(){return J(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return m}.apply(t,[]))||(n.exports=r)}()}).call(this,n(33),n(51)(e))},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";n.r(t);var r=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},i=function(e){return(e=r(Math.abs(e)))?e[1]:NaN},o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){return new s(e)}function s(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}a.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l,u,c,h,d=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},f=function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},p={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return f(100*e,t)},r:f,s:function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1],a=o-(l=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=function(e){return e},v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],m=function(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}):g,o=e.currency,s=e.decimal,u=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):g,c=e.percent||"%";function h(e){var t=(e=a(e)).fill,n=e.align,i=e.sign,h=e.symbol,f=e.zero,g=e.width,m=e.comma,_=e.precision,b=e.trim,y=e.type;"n"===y?(m=!0,y="g"):p[y]||(null==_&&(_=12),b=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var w="$"===h?o[0]:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?o[1]:/[%p]/.test(y)?c:"",k=p[y],S=/[defgprs%]/.test(y);function C(e){var o,a,c,h=w,p=x;if("c"===y)p=k(e)+p,e="";else{var C=(e=+e)<0;if(e=k(Math.abs(e),_),b&&(e=d(e)),C&&0===+e&&(C=!1),h=(C?"("===i?i:"-":"-"===i||"("===i?"":i)+h,p=("s"===y?v[8+l/3]:"")+p+(C&&"("===i?")":""),S)for(o=-1,a=e.length;++o<a;)if(48>(c=e.charCodeAt(o))||c>57){p=(46===c?s+e.slice(o+1):e.slice(o))+p,e=e.slice(0,o);break}}m&&!f&&(e=r(e,1/0));var E=h.length+e.length+p.length,T=E<g?new Array(g-E+1).join(t):"";switch(m&&f&&(e=r(T+e,T.length?g-p.length:1/0),T=""),n){case"<":e=h+e+p+T;break;case"=":e=h+T+e+p;break;case"^":e=T.slice(0,E=T.length>>1)+h+e+p+T.slice(E);break;default:e=T+h+e+p}return u(e)}return _=null==_?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),C.toString=function(){return e+""},C}return{format:h,formatPrefix:function(e,t){var n=h(((e=a(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(i(t)/3))),o=Math.pow(10,-r),s=v[8+r/3];return function(e){return n(o*e)+s}}}};function _(e){return u=m(e),c=u.format,h=u.formatPrefix,u}_({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var b=function(e){return Math.max(0,-i(Math.abs(e)))},y=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(t)/3)))-i(Math.abs(e)))},w=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,i(t)-i(e))+1};n.d(t,"formatDefaultLocale",function(){return _}),n.d(t,"format",function(){return c}),n.d(t,"formatPrefix",function(){return h}),n.d(t,"formatLocale",function(){return m}),n.d(t,"formatSpecifier",function(){return a}),n.d(t,"precisionFixed",function(){return b}),n.d(t,"precisionPrefix",function(){return y}),n.d(t,"precisionRound",function(){return w})},function(e,t,n){"use strict";n.r(t);var r=n(19),i=n(2);function o(){i.event.stopImmediatePropagation()}var a=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},s=function(e){var t=e.document.documentElement,n=Object(i.select)(e).on("dragstart.drag",a,!0);"onselectstart"in t?n.on("selectstart.drag",a,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function l(e,t){var n=e.document.documentElement,r=Object(i.select)(e).on("dragstart.drag",null);t&&(r.on("click.drag",a,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var u=function(e){return function(){return e}};function c(e,t,n,r,i,o,a,s,l,u){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=u}function h(){return!i.event.button}function d(){return this.parentNode}function f(e){return null==e?{x:i.event.x,y:i.event.y}:e}function p(){return"ontouchstart"in this}c.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var g=function(){var e,t,n,g,v=h,m=d,_=f,b=p,y={},w=Object(r.a)("start","drag","end"),x=0,k=0;function S(e){e.on("mousedown.drag",C).filter(b).on("touchstart.drag",P).on("touchmove.drag",A).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C(){if(!g&&v.apply(this,arguments)){var r=z("mouse",m.apply(this,arguments),i.mouse,this,arguments);r&&(Object(i.select)(i.event.view).on("mousemove.drag",E,!0).on("mouseup.drag",T,!0),s(i.event.view),o(),n=!1,e=i.event.clientX,t=i.event.clientY,r("start"))}}function E(){if(a(),!n){var r=i.event.clientX-e,o=i.event.clientY-t;n=r*r+o*o>k}y.mouse("drag")}function T(){Object(i.select)(i.event.view).on("mousemove.drag mouseup.drag",null),l(i.event.view,n),a(),y.mouse("end")}function P(){if(v.apply(this,arguments)){var e,t,n=i.event.changedTouches,r=m.apply(this,arguments),a=n.length;for(e=0;e<a;++e)(t=z(n[e].identifier,r,i.touch,this,arguments))&&(o(),t("start"))}}function A(){var e,t,n=i.event.changedTouches,r=n.length;for(e=0;e<r;++e)(t=y[n[e].identifier])&&(a(),t("drag"))}function O(){var e,t,n=i.event.changedTouches,r=n.length;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),e=0;e<r;++e)(t=y[n[e].identifier])&&(o(),t("end"))}function z(e,t,n,r,o){var a,s,l,u=n(t,e),h=w.copy();if(Object(i.customEvent)(new c(S,"beforestart",a,e,x,u[0],u[1],0,0,h),function(){return null!=(i.event.subject=a=_.apply(r,o))&&(s=a.x-u[0]||0,l=a.y-u[1]||0,!0)}))return function d(f){var p,g=u;switch(f){case"start":y[e]=d,p=x++;break;case"end":delete y[e],--x;case"drag":u=n(t,e),p=x}Object(i.customEvent)(new c(S,f,a,e,p,u[0]+s,u[1]+l,u[0]-g[0],u[1]-g[1],h),h.apply,h,[f,r,o])}}return S.filter=function(e){return arguments.length?(v="function"===typeof e?e:u(!!e),S):v},S.container=function(e){return arguments.length?(m="function"===typeof e?e:u(e),S):m},S.subject=function(e){return arguments.length?(_="function"===typeof e?e:u(e),S):_},S.touchable=function(e){return arguments.length?(b="function"===typeof e?e:u(!!e),S):b},S.on=function(){var e=w.on.apply(w,arguments);return e===w?S:e},S.clickDistance=function(e){return arguments.length?(k=(e=+e)*e,S):Math.sqrt(k)},S};n.d(t,"drag",function(){return g}),n.d(t,"dragDisable",function(){return s}),n.d(t,"dragEnable",function(){return l})},function(e,t,n){"use strict";var r={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new o(r)}function o(e){this._=e}function a(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}o.prototype=i.prototype={constructor:o,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),l=-1,u=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++l<u;)if(n=(e=o[l]).type)i[n]=s(i[n],e.name,t);else if(null==t)for(n in i)i[n]=s(i[n],e.name,null);return this}for(;++l<u;)if((n=(e=o[l]).type)&&(n=a(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var l=i;n.d(t,"a",function(){return l})},function(e,t,n){var r=n(3),i=n(14),o=r.make_class();o.prototype={init:function(){},set:function(e,t){void 0===this.callbacks&&(this.callbacks={});void 0===this.callbacks[e]&&(this.callbacks[e]=[]);return this.callbacks[e].push(t),this},remove:function(e){void 0!==this.callbacks&&0!=Object.keys(this.callbacks).length||console.warn("No callbacks to remove");return delete this.callbacks[e],this},run:function(e,t){if(i.isUndefined(this.callbacks))return this;i.isUndefined(t)&&(t=null);var n=Array.prototype.slice.call(arguments,2);for(var r in this.callbacks){var o=r.split(".")[0];o==e&&this.callbacks[r].forEach(function(e){e.apply(t,n)})}return this}},e.exports=o},function(e,t,n){"use strict";var r,i,o=n(2),a=n(19),s=0,l=0,u=0,c=1e3,h=0,d=0,f=0,p="object"===typeof performance&&performance.now?performance:Date,g="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function v(){return d||(g(m),d=p.now()+f)}function m(){d=0}function _(){this._call=this._time=this._next=null}function b(e,t,n){var r=new _;return r.restart(e,t,n),r}function y(){d=(h=p.now())+f,s=l=0;try{!function(){v(),++s;for(var e,t=r;t;)(e=d-t._time)>=0&&t._call.call(null,e),t=t._next;--s}()}finally{s=0,function(){var e,t,n=r,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r=t);i=e,x(o)}(),d=0}}function w(){var e=p.now(),t=e-h;t>c&&(f-=t,h=e)}function x(e){s||(l&&(l=clearTimeout(l)),e-d>24?(e<1/0&&(l=setTimeout(y,e-p.now()-f)),u&&(u=clearInterval(u))):(u||(h=p.now(),u=setInterval(w,c)),s=1,g(y)))}_.prototype=b.prototype={constructor:_,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?v():+n)+(null==t?0:+t),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=e,this._time=n,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}};var k=function(e,t,n){var r=new _;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r},S=Object(a.a)("start","end","cancel","interrupt"),C=[],E=0,T=1,P=2,A=3,O=4,z=5,N=6,M=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(l){var u,c,h,d;if(n.state!==T)return s();for(u in i)if((d=i[u]).name===n.name){if(d.state===A)return k(o);d.state===O?(d.state=N,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=N,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(k(function(){n.state===A&&(n.state=O,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=P,n.on.call("start",e,e.__data__,n.index,n.group),n.state===P){for(n.state=A,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=z,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===z&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=N,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=b(function(e){n.state=T,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:S,tween:C,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:E})};function R(e,t){var n=I(e,t);if(n.state>E)throw new Error("too late; already scheduled");return n}function D(e,t){var n=I(e,t);if(n.state>A)throw new Error("too late; already running");return n}function I(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var j=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>P&&n.state<z,n.state=N,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}},F=n(7);function L(e,t,n){var r=e._id;return e.each(function(){var e=D(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return I(e,r).value[t]}}var B=n(4),U=function(e,t){var n;return("number"===typeof t?F.c:t instanceof B.a?F.d:(n=Object(B.a)(t))?(t=n,F.d):F.f)(e,t)};var W=o.selection.prototype.constructor;function V(e){return function(){this.style.removeProperty(e)}}var H=0;function q(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Y(){return++H}var $=o.selection.prototype;q.prototype=function(e){return Object(o.selection)().transition(e)}.prototype={constructor:q,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Object(o.selector)(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=r[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f])&&(u=e.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,M(d[f],t,n,f,d,I(l,n)));return new q(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Object(o.selectorAll)(e));for(var r=this._groups,i=r.length,a=[],s=[],l=0;l<i;++l)for(var u,c=r[l],h=c.length,d=0;d<h;++d)if(u=c[d]){for(var f,p=e.call(u,u.__data__,d,c),g=I(u,n),v=0,m=p.length;v<m;++v)(f=p[v])&&M(f,t,n,v,p,g);a.push(p),s.push(u)}return new q(a,s,t,n)},filter:function(e){"function"!==typeof e&&(e=Object(o.matcher)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=r[i]=[],c=0;c<l;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&u.push(a);return new q(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new q(a,this._parents,this._name,this._id)},selection:function(){return new W(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Y(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=I(a,t);M(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new q(r,this._parents,e,n)},call:$.call,nodes:$.nodes,node:$.node,size:$.size,empty:$.empty,each:$.each,on:function(e,t){var n=this._id;return arguments.length<2?I(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?R:D;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Object(o.namespace)(e),r="transform"===n?F.h:U;return this.attrTween(e,"function"===typeof t?(n.local?function(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}})(n,r,L(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}:function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Object(o.namespace)(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,i)),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,i)),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r="transform"===(e+="")?F.g:U;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=Object(o.style)(this,e),s=(this.style.removeProperty(e),Object(o.style)(this,e));return a===s?null:a===n&&s===r?i:i=t(n=a,r=s)}}(e,r)).on("end.style."+e,V(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var s=Object(o.style)(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Object(o.style)(this,e)),s===u?null:s===r&&u===i?a:(i=u,a=t(r=s,l))}}(e,r,L(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=D(this,e),u=l.on,c=null==l.value[a]?o||(o=V(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var s=Object(o.style)(this,e);return s===a?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(L(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=I(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=D(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=D(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?function(e,t){return function(){R(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){R(this,e).delay=t}})(t,e)):I(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?function(e,t){return function(){D(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){D(this,e).duration=t}})(t,e)):I(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){D(this,e).ease=t}}(t,e)):I(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=D(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})})}};(function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n})(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Math.PI;(function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n})(1.70158),function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158);var K=2*Math.PI,X=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=K);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*K)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=K);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*K)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=K);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*K)},i.period=function(n){return e(t,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}});function G(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return X.time=v(),X;return n}o.selection.prototype.interrupt=function(e){return this.each(function(){j(this,e)})},o.selection.prototype.transition=function(e){var t,n;e instanceof q?(t=e._id,e=e._name):(t=Y(),(n=X).time=v(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&M(a,e,t,u,s,n||G(a,t));return new q(r,this._parents,e,t)};n.d(t,"a",function(){return j})},function(e,t,n){var r=n(15),i=n(16),o=function(){"use strict";function e(t,n){r(this,e),0==arguments.length?(this.x=0,this.y=0):1==arguments.length?(this.x=t.x,this.y=t.y):(this.x=t,this.y=n)}return i(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"toString",value:function(){return"("+this.x+","+this.y+")"}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"divide",value:function(e){return this.x/=e,this.y/=e,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"invert",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"distance",value:function(e){return Math.sqrt((e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y))}},{key:"distanceSq",value:function(e){return(e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y)}},{key:"clockwise",value:function(e){var t=this.y*e.x,n=this.x*e.y;return t>n?-1:t===n?0:1}},{key:"relativeClockwise",value:function(e,t){var n=(this.y-e.y)*(t.x-e.x),r=(this.x-e.x)*(t.y-e.y);return n>r?-1:n===r?0:1}},{key:"rotate",value:function(t){var n=new e(0,0),r=Math.cos(t),i=Math.sin(t);return n.x=this.x*r-this.y*i,n.y=this.x*i+this.y*r,this.x=n.x,this.y=n.y,this}},{key:"rotateAround",value:function(e,t){var n=Math.sin(e),r=Math.cos(e);this.x-=t.x,this.y-=t.y;var i=this.x*r-this.y*n,o=this.x*n+this.y*r;return this.x=i+t.x,this.y=o+t.y,this}},{key:"rotateTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x+=.001,this.y-=.001;var i=e.subtract(this,n),o=e.subtract(t,n),a=e.angle(o,i);return this.rotateAround(a+r,n),this}},{key:"rotateAwayFrom",value:function(e,t,n){this.rotateAround(n,t);var r=this.distanceSq(e);this.rotateAround(-2*n,t),this.distanceSq(e)<r&&this.rotateAround(2*n,t)}},{key:"getRotateAwayFromAngle",value:function(e,t,n){var r=this.clone();r.rotateAround(n,t);var i=r.distanceSq(e);return r.rotateAround(-2*n,t),r.distanceSq(e)<i?n:-n}},{key:"getRotateTowardsAngle",value:function(e,t,n){var r=this.clone();r.rotateAround(n,t);var i=r.distanceSq(e);return r.rotateAround(-2*n,t),r.distanceSq(e)>i?n:-n}},{key:"getRotateToAngle",value:function(t,n){var r=e.subtract(this,n),i=e.subtract(t,n),o=e.angle(i,r);return Number.isNaN(o)?0:o}},{key:"isInPolygon",value:function(e){for(var t=!1,n=0,r=e.length-1;n<e.length;r=n++)e[n].y>this.y!=e[r].y>this.y&&this.x<(e[r].x-e[n].x)*(this.y-e[n].y)/(e[r].y-e[n].y)+e[n].x&&(t=!t);return t}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return this.divide(this.length()),this}},{key:"normalized",value:function(){return e.divideScalar(this,this.length())}},{key:"whichSide",value:function(e,t){return(this.x-e.x)*(t.y-e.y)-(this.y-e.y)*(t.x-e.x)}},{key:"sameSideAs",value:function(e,t,n){var r=this.whichSide(e,t),i=n.whichSide(e,t);return r<0&&i<0||0==r&&0==i||r>0&&i>0}}],[{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"subtract",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"multiply",value:function(t,n){return new e(t.x*n.x,t.y*n.y)}},{key:"multiplyScalar",value:function(t,n){return new e(t.x,t.y).multiplyScalar(n)}},{key:"midpoint",value:function(t,n){return new e((t.x+n.x)/2,(t.y+n.y)/2)}},{key:"normals",value:function(t,n){var r=e.subtract(n,t);return[new e(-r.y,r.x),new e(r.y,-r.x)]}},{key:"units",value:function(t,n){var r=e.subtract(n,t);return[new e(-r.y,r.x).normalize(),new e(r.y,-r.x).normalize()]}},{key:"divide",value:function(t,n){return new e(t.x/n.x,t.y/n.y)}},{key:"divideScalar",value:function(t,n){return new e(t.x/n,t.y/n)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"angle",value:function(t,n){var r=e.dot(t,n);return Math.acos(r/(t.length()*n.length()))}},{key:"threePointangle",value:function(t,n,r){var i=e.subtract(n,t),o=e.subtract(r,n),a=t.distance(n),s=n.distance(r);return Math.acos(e.dot(i,o)/(a*s))}},{key:"scalarProjection",value:function(t,n){var r=n.normalized();return e.dot(t,r)}},{key:"averageDirection",value:function(t){for(var n=new e(0,0),r=0;r<t.length;r++){var i=t[r];n.add(i)}return n.normalize()}}]),e}();e.exports=o},function(e,t,n){var r=n(15),i=n(16),o=n(29),a=n(30),s=n(22),l=(n(35),function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,e),this.id=null,this.value=t,this.position=new s(n||0,i||0),this.previousPosition=new s(0,0),this.parentVertexId=null,this.children=Array(),this.spanningTreeChildren=Array(),this.edges=Array(),this.positioned=!1,this.angle=null,this.dir=1,this.neighbourCount=0,this.neighbours=Array(),this.neighbouringElements=Array(),this.forcePositioned=!1}return i(e,[{key:"setPosition",value:function(e,t){this.position.x=e,this.position.y=t}},{key:"setPositionFromVector",value:function(e){this.position.x=e.x,this.position.y=e.y}},{key:"addChild",value:function(e){this.children.push(e),this.neighbours.push(e),this.neighbourCount++}},{key:"addRingbondChild",value:function(e,t){if(this.children.push(e),this.value.bracket){var n=1;0===this.id&&0===this.value.bracket.hcount&&(n=0),1===this.value.bracket.hcount&&0===t&&(n=2),1===this.value.bracket.hcount&&1===t&&(n=this.neighbours.length<3?2:3),null===this.value.bracket.hcount&&0===t&&(n=1),null===this.value.bracket.hcount&&1===t&&(n=this.neighbours.length<3?1:2),this.neighbours.splice(n,0,e)}else this.neighbours.push(e);this.neighbourCount++}},{key:"setParentVertexId",value:function(e){this.neighbourCount++,this.parentVertexId=e,this.neighbours.push(e)}},{key:"isTerminal",value:function(){return!!this.value.hasAttachedPseudoElements||(null===this.parentVertexId&&this.children.length<2||0===this.children.length)}},{key:"clone",value:function(){var t=new e(this.value,this.position.x,this.position.y);return t.id=this.id,t.previousPosition=new s(this.previousPosition.x,this.previousPosition.y),t.parentVertexId=this.parentVertexId,t.children=a.clone(this.children),t.spanningTreeChildren=a.clone(this.spanningTreeChildren),t.edges=a.clone(this.edges),t.positioned=this.positioned,t.angle=this.angle,t.forcePositioned=this.forcePositioned,t}},{key:"equals",value:function(e){return this.id===e.id}},{key:"getAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;return n=e?s.subtract(this.position,e):s.subtract(this.position,this.previousPosition),t?o.toDeg(n.angle()):n.angle()}},{key:"getTextDirection",value:function(e){for(var t=this.getDrawnNeighbours(e),n=Array(),r=0;r<t.length;r++)n.push(this.getAngle(e[t[r]].position));var i=o.meanAngle(n),a=Math.PI/2;return 2===(i=Math.round(Math.round(i/a)*a))?"down":-2===i?"up":0===i||-0===i?"right":3===i||-3===i?"left":"down"}},{key:"getNeighbours",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return this.neighbours.slice();for(var t=Array(),n=0;n<this.neighbours.length;n++)this.neighbours[n]!==e&&t.push(this.neighbours[n]);return t}},{key:"getDrawnNeighbours",value:function(e){for(var t=Array(),n=0;n<this.neighbours.length;n++)e[this.neighbours[n]].value.isDrawn&&t.push(this.neighbours[n]);return t}},{key:"getNeighbourCount",value:function(){return this.neighbourCount}},{key:"getSpanningTreeNeighbours",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Array(),n=0;n<this.spanningTreeChildren.length;n++)void 0!==e&&e==this.spanningTreeChildren[n]||t.push(this.spanningTreeChildren[n]);return null!=this.parentVertexId&&(void 0!==e&&e==this.parentVertexId||t.push(this.parentVertexId)),t}},{key:"getNextInRing",value:function(e,t,n){for(var r=this.getNeighbours(),i=0;i<r.length;i++)if(a.contains(e[r[i]].value.rings,{value:t})&&r[i]!=n)return r[i];return null}}]),e}());e.exports=l},function(e,t,n){var r=n(3),i=n(14),o=n(17).format;e.exports={import_and_check:function(e,t,n){if(null===e)return null;if(-1===["reaction_data","metabolite_data","gene_data"].indexOf(t))throw new Error("Invalid name argument: "+t);e instanceof Array||(e=[e]);if(null===e||(1===e.length||(2===e.length||console.warn("Bad data style: "+t))),e=r.array_to_object(e),"gene_data"===t){if(void 0===n)throw new Error("Must pass all_reactions argument for gene_data");e=function(e,t){var n={},i=[null];for(var o in e){i=e[o].map(function(){return null});break}for(var a in t){var s=t[a],l=s.bigg_id,u={};s.genes.forEach(function(t){["bigg_id","name"].forEach(function(n){var o=e[t[n]]||r.clone(i),a=u[t.bigg_id];if("undefined"===typeof a)u[t.bigg_id]=o;else for(var s=0;s<o.length;s++){var l=o[s];null!==l&&(a[s]=l)}})}),n[l]=u}return n}(e,n)}return e},text_for_data:y,float_for_data:m,reverse_flux_for_data:_,gene_string_for_data:b,csv_converter:function(e){var t=e[0].length,n=[];if(t<2||t>3)throw new Error("CSV file must have 2 or 3 columns");for(var r=1;r<t;r++)n[r-1]={};return e.slice(1).forEach(function(e){for(var t=1,r=e.length;t<r;t++)n[t-1][e[0]]=e[t]}),n},genes_for_gene_reaction_rule:function(e){var t=e.replace(c,"$1$2").replace(h,"").split(" ").filter(function(e){return""!=e});return r.unique_strings_array(t)},evaluate_gene_reaction_rule:w,replace_gene_in_rule:x,apply_reaction_data_to_reactions:function(e,t,n,r,o){i.isUndefined(o)&&(o=Object.keys(e));var a,s,l;if(null===t)return o.map(function(t){for(s in(a=e[t]).data=null,a.data_string="",a.segments)(l=a.segments[s]).data=null;a.gene_string=null}),!1;return o.map(function(i){a=e[i];var o=t[a.bigg_id]||t[a.name]||null,u=m(o,n,r),c=_(o),h=y(o,u);for(s in a.data=u,a.data_string=h,a.reverse_flux=c,a.gene_string=null,a.segments)(l=a.segments[s]).data=a.data,l.reverse_flux=a.reverse_flux}),!0},apply_metabolite_data_to_nodes:function(e,t,n,r,o){i.isUndefined(o)&&(o=Object.keys(e));if(null===t)return o.map(function(t){e[t].data=null,e[t].data_string=""}),!1;return o.map(function(i){var o=e[i],a=t[o.bigg_id]||t[o.name]||null,s=m(a,n,r),l=y(a,s);o.data=s,o.data_string=l}),!0},apply_gene_data_to_reactions:function(e,t,n,o,a,s,l){i.isUndefined(l)&&(l=Object.keys(e));if(null===t)return l.map(function(t){var n=e[t];for(var r in n.data=null,n.data_string="",n.reverse_flux=!1,n.segments){var i=n.segments[r];i.data=null}n.gene_string=null}),!1;var u=[null];for(var c in t){for(var h in t[c]){u=t[c][h].map(function(){return null});break}break}return l.map(function(l){var c,h,d=e[l],f=d.gene_reaction_rule,p=t[d.bigg_id];i.isUndefined(p)?(h={},c=r.clone(u)):c=w(f,h=p,s);var g=m(c,n,a),v=_(c),x=y(c,g);for(var k in d.data=g,d.data_string=x,d.reverse_flux=v,d.segments){var S=d.segments[k];S.data=d.data,S.reverse_flux=d.reverse_flux}d.gene_string=b(f,h,d.genes,n,o,a)}),!0}};var a=function(e){return e},s=/([.*+?^=!:${}()|\[\]\/\\])/g,l=/\n\s*\n/g,u=/\n\s*(\)*)\s*$/,c=/([\(\) ])(?:and|or)([\)\( ])/gi,h=/[\(\)]/g,d=/\(\s*(\S+)\s*\)/g,f=/\s+or\s+/i,p=/\s+and\s+/i,g=/(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/gi,v=/(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/gi;function m(e,t,n){if(null===e)return null;var r=-1!=t.indexOf("abs");if(1==e.length){var i=k(e[0]);return null===i?null:function(e,t){return t?Math.abs(e):e}(i,r)}if(2!=e.length)throw new Error("Data array must be of length 1 or 2");var o=e.map(k);if(null===o[0]||null===o[1])return null;if("diff"==n)return function(e,t,n){return n?Math.abs(t-e):t-e}(o[0],o[1],r);if("fold"==n)return a(function(e,t,n){if(0==e||0==t)return null;var r=t>=e?t/e:-e/t;return n?Math.abs(r):r}(o[0],o[1],r));if("log2_fold"==n)return a(function(e,t,n){if(0==e)return null;if(t/e<0)return null;var r=Math.log(t/e)/Math.log(2);return n?Math.abs(r):r}(o[0],o[1],r));throw new Error("Bad data compare_style: "+n);function a(e){return isFinite(e)?e:null}}function _(e){return null!==e&&null!==e[0]&&e[0]<0}function b(e,t,n,r,s,c){var h=e,d=null===t,f={};return n.forEach(function(e){var n=e.bigg_id;if(!(n in f))if(f[n]=!0,d)h=x(h,n,n+"\n");else{if(!(n in t))return;var s=t[n],l=m(s,r,c),u=null===l?a:o(".3g");if(1===s.length)h=x(h,n,n+" ("+p(s[0],u)+")\n");else if(2===s.length){var g;g=i.any(s,function(e){return null!==k(e)})?n+" ("+p(s[0],u)+", "+p(s[1],u)+": "+p(l,u)+")\n":n+" ("+p(s[0],u)+", "+p(s[1],u)+")\n",h=x(h,n,g)}}}),(h=h.replace(l,"\n").replace(u,"$1")).split("\n").map(function(e){for(var t=0,r=n.length;t<r;t++){var i=n[t];if(-1!==e.indexOf(i.bigg_id))return"name"===s&&(e=x(e,i.bigg_id,i.name)),{bigg_id:i.bigg_id,name:i.name,text:e}}return{bigg_id:null,name:null,text:e}});function p(e,t){return null===e?"nd":t(e)}}function y(e,t){if(null===e)return i(null);if(1===e.length){var n=null===t?a:o(".3g");return i(e[0],n)}if(2===e.length){n=null===t?a:o(".3g");var r=i(e[0],n);return r+=", "+i(e[1],n),r+=": "+i(t,n)}return"";function i(e,t){return null===e?"(nd)":t(e)}}function w(e,t,n){var i=[null],o=1;for(var a in t){o=(i=t[a].map(function(){return null})).length;break}if(""==e)return r.clone(i);for(var s=[],l=0;l<o;l++){var u=e,c=!0;for(var a in t){var h=k(t[a][l]);null===h?h=0:c=!1,u=x(u,a,h)}if(c)s.push(null);else{for(;;){var m=u;if((m=(m=(m=m.replace(d," $1 ")).replace(g,function(e,t,n,r){return t+n.split(f).map(parseFloat).reduce(function(e,t){return e+t})+r})).replace(v,function(e,t,r,i){var o=r.split(p).map(parseFloat);return t+("min"==n?Math.min.apply(null,o):o.reduce(function(e,t){return e+t})/o.length)+i}))==u)break;u=m}var _=Number(u);isNaN(_)?(console.warn("Could not evaluate "+e),s.push(null)):s.push(_)}}return s}function x(e,t,n){var r="(^|[\\s\\(\\)])"+t.replace(s,"\\$1")+"([\\s\\(\\)]|$)";return e.replace(new RegExp(r,"g"),"$1"+n+"$2")}function k(e){var t=Number(e);return isNaN(t)||parseFloat(e)!=t?null:t}},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n(19),o=function(e,t){var n,o,a,s,l=Object(i.a)("beforesend","progress","load","error"),u=Object(r.a)(),c=new XMLHttpRequest,h=null,d=null,f=0;function p(e){var t,r=c.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||r>=200&&r<300||304===r){if(a)try{t=a.call(n,c)}catch(i){return void l.call("error",n,i)}else t=c;l.call("load",n,t)}else l.call("error",n,e)}if("undefined"===typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=p:c.onreadystatechange=function(e){c.readyState>3&&p(e)},c.onprogress=function(e){l.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u.get(e):(null==t?u.remove(e):u.set(e,t+""),n)},mimeType:function(e){return arguments.length?(o=null==e?null:e+"",n):o},responseType:function(e){return arguments.length?(s=e,n):s},timeout:function(e){return arguments.length?(f=+e,n):f},user:function(e){return arguments.length<1?h:(h=null==e?null:e+"",n)},password:function(e){return arguments.length<1?d:(d=null==e?null:e+"",n)},response:function(e){return a=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,r,i){return c.open(t,e,!0,h,d),null==o||u.has("accept")||u.set("accept",o+",*/*"),c.setRequestHeader&&u.each(function(e,t){c.setRequestHeader(t,e)}),null!=o&&c.overrideMimeType&&c.overrideMimeType(o),null!=s&&(c.responseType=s),f>0&&(c.timeout=f),null==i&&"function"===typeof r&&(i=r,r=null),null!=i&&1===i.length&&(i=function(e){return function(t,n){e(null==t?n:null)}}(i)),null!=i&&n.on("error",i).on("load",function(e){i(null,e)}),l.call("beforesend",n,c),c.send(null==r?null:r),n},abort:function(){return c.abort(),n},on:function(){var e=l.on.apply(l,arguments);return e===l?n:e}},null!=t){if("function"!==typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n};var a=function(e,t){return function(n,r){var i=o(n).mimeType(e).response(t);if(null!=r){if("function"!==typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},s=a("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),l=a("application/json",function(e){return JSON.parse(e.responseText)}),u=a("text/plain",function(e){return e.responseText}),c=a("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),h=n(27),d=function(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var a=o(n).mimeType(e);return a.row=function(e){return arguments.length?a.response(function(e,t){return function(n){return e(n.responseText,t)}}(t,r=e)):r},a.row(r),i?a.get(i):a}};var f=d("text/csv",h.csvParse),p=d("text/tab-separated-values",h.tsvParse);n.d(t,"request",function(){return o}),n.d(t,"html",function(){return s}),n.d(t,"json",function(){return l}),n.d(t,"text",function(){return u}),n.d(t,"xml",function(){return c}),n.d(t,"csv",function(){return f}),n.d(t,"tsv",function(){return p})},function(e,t,n){var r=n(15),i=n(16),o=n(30),a=n(22),s=(n(23),n(46)),l=function(){"use strict";function e(t){r(this,e),this.id=null,this.members=t,this.edges=[],this.insiders=[],this.neighbours=[],this.positioned=!1,this.center=new a(0,0),this.rings=[],this.isBridged=!1,this.isPartOfBridged=!1,this.isSpiro=!1,this.isFused=!1,this.centralAngle=0,this.canFlip=!0}return i(e,[{key:"clone",value:function(){var t=new e(this.members);return t.id=this.id,t.insiders=o.clone(this.insiders),t.neighbours=o.clone(this.neighbours),t.positioned=this.positioned,t.center=this.center.clone(),t.rings=o.clone(this.rings),t.isBridged=this.isBridged,t.isPartOfBridged=this.isPartOfBridged,t.isSpiro=this.isSpiro,t.isFused=this.isFused,t.centralAngle=this.centralAngle,t.canFlip=this.canFlip,t}},{key:"getSize",value:function(){return this.members.length}},{key:"getPolygon",value:function(e){for(var t=[],n=0;n<this.members.length;n++)t.push(e[this.members[n]].position);return t}},{key:"getAngle",value:function(){return Math.PI-this.centralAngle}},{key:"eachMember",value:function(e,t,n,r){for(var i=n=n||0===n?n:this.members[0],o=0;null!=i&&o<100;){var a=i;t(a),i=e[i].getNextInRing(e,this.id,r),r=a,i==n&&(i=null),o++}}},{key:"getOrderedNeighbours",value:function(e){for(var t=Array(this.neighbours.length),n=0;n<this.neighbours.length;n++){var r=s.getVertices(e,this.id,this.neighbours[n]);t[n]={n:r.length,neighbour:this.neighbours[n]}}return t.sort(function(e,t){return t.n-e.n}),t}},{key:"isBenzeneLike",value:function(e){var t=this.getDoubleBondCount(e),n=this.members.length;return 3===t&&6===n||2===t&&5===n}},{key:"getDoubleBondCount",value:function(e){for(var t=0,n=0;n<this.members.length;n++){var r=e[this.members[n]].value;"="!==r.bondType&&"="!==r.branchBond||t++}return t}},{key:"contains",value:function(e){for(var t=0;t<this.members.length;t++)if(this.members[t]==e)return!0;return!1}}]),e}();e.exports=l},function(e,t,n){"use strict";n.r(t);var r={},i={},o=34,a=10,s=13;function l(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function u(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function c(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function h(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+c(-t,6):t>9999?"+"+c(t,6):c(t,4))+"-"+c(e.getUTCMonth()+1,2)+"-"+c(e.getUTCDate(),2)+(o?"T"+c(n,2)+":"+c(r,2)+":"+c(i,2)+"."+c(o,3)+"Z":i?"T"+c(n,2)+":"+c(r,2)+":"+c(i,2)+"Z":r||n?"T"+c(n,2)+":"+c(r,2)+"Z":"")}var d=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function c(e,t){var l,u=[],c=e.length,h=0,d=0,f=c<=0,p=!1;function g(){if(f)return i;if(p)return p=!1,r;var t,l,u=h;if(e.charCodeAt(u)===o){for(;h++<c&&e.charCodeAt(h)!==o||e.charCodeAt(++h)===o;);return(t=h)>=c?f=!0:(l=e.charCodeAt(h++))===a?p=!0:l===s&&(p=!0,e.charCodeAt(h)===a&&++h),e.slice(u+1,t-1).replace(/""/g,'"')}for(;h<c;){if((l=e.charCodeAt(t=h++))===a)p=!0;else if(l===s)p=!0,e.charCodeAt(h)===a&&++h;else if(l!==n)continue;return e.slice(u,t)}return f=!0,e.slice(u,c)}for(e.charCodeAt(c-1)===a&&--c,e.charCodeAt(c-1)===s&&--c;(l=g())!==i;){for(var v=[];l!==r&&l!==i;)v.push(l),l=g();t&&null==(v=t(v,d++))||u.push(v)}return u}function d(t,n){return t.map(function(t){return n.map(function(e){return p(t[e])}).join(e)})}function f(t){return t.map(p).join(e)}function p(e){return null==e?"":e instanceof Date?h(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,i=c(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=l(e);return function(r,i){return t(n(r),i,e)}}(e,t):l(e)});return i.columns=r||[],i},parseRows:c,format:function(t,n){return null==n&&(n=u(t)),[n.map(p).join(e)].concat(d(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=u(e)),d(e,t).join("\n")},formatRows:function(e){return e.map(f).join("\n")}}},f=d(","),p=f.parse,g=f.parseRows,v=f.format,m=f.formatBody,_=f.formatRows,b=d("\t"),y=b.parse,w=b.parseRows,x=b.format,k=b.formatBody,S=b.formatRows;function C(e){for(var t in e){var n,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;e[t]=r}return e}n.d(t,"dsvFormat",function(){return d}),n.d(t,"csvParse",function(){return p}),n.d(t,"csvParseRows",function(){return g}),n.d(t,"csvFormat",function(){return v}),n.d(t,"csvFormatBody",function(){return m}),n.d(t,"csvFormatRows",function(){return _}),n.d(t,"tsvParse",function(){return y}),n.d(t,"tsvParseRows",function(){return w}),n.d(t,"tsvFormat",function(){return x}),n.d(t,"tsvFormatBody",function(){return k}),n.d(t,"tsvFormatRows",function(){return S}),n.d(t,"autoType",function(){return C})},function(e,t,n){"use strict";function r(){}function i(e,t){var n=new r;if(e instanceof r)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,o=-1,a=e.length;if(null==t)for(;++o<a;)n.set(o,e[o]);else for(;++o<a;)n.set(t(i=e[o],o,e),i)}else if(e)for(var s in e)n.set(s,e[s]);return n}r.prototype=i.prototype={constructor:r,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var o=i;function a(){}var s=o.prototype;function l(e,t){var n=new a;if(e instanceof a)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}a.prototype=l.prototype={constructor:a,has:s.has,add:function(e){return this["$"+(e+="")]=e,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};n.d(t,"a",function(){return o})},function(e,t,n){var r=n(15),i=n(16),o=function(){"use strict";function e(){r(this,e)}return i(e,null,[{key:"round",value:function(e,t){return t=t||1,Number(Math.round(e+"e"+t)+"e-"+t)}},{key:"meanAngle",value:function(e){for(var t=0,n=0,r=0;r<e.length;r++)t+=Math.sin(e[r]),n+=Math.cos(e[r]);return Math.atan2(t/e.length,n/e.length)}},{key:"innerAngle",value:function(t){return e.toRad(180*(t-2)/t)}},{key:"polyCircumradius",value:function(e,t){return e/(2*Math.sin(Math.PI/t))}},{key:"apothem",value:function(e,t){return e*Math.cos(Math.PI/t)}},{key:"apothemFromSideLength",value:function(t,n){var r=e.polyCircumradius(t,n);return e.apothem(r,n)}},{key:"centralAngle",value:function(t){return e.toRad(360/t)}},{key:"toDeg",value:function(t){return t*e.degFactor}},{key:"toRad",value:function(t){return t*e.radFactor}},{key:"parityOfPermutation",value:function(e){for(var t=new Uint8Array(e.length),n=0,r=function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1===t[r]?i:(i++,t[r]=1,n(e[r],i))},i=0;i<e.length;i++){if(1!==t[i])n+=1-r(i)%2}return n%2?-1:1}},{key:"radFactor",get:function(){return Math.PI/180}},{key:"degFactor",get:function(){return 180/Math.PI}},{key:"twoPI",get:function(){return 2*Math.PI}}]),e}();e.exports=o},function(e,t,n){var r=n(15),i=n(16),o=function(){"use strict";function e(){r(this,e)}return i(e,null,[{key:"clone",value:function(t){var n=Array.isArray(t)?Array():{};for(var r in t){var i=t[r];"function"===typeof i.clone?n[r]=i.clone():n[r]="object"===typeof i?e.clone(i):i}return n}},{key:"equals",value:function(e,t){if(e.length!==t.length)return!1;for(var n=e.slice().sort(),r=t.slice().sort(),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}},{key:"print",value:function(e){if(0==e.length)return"";for(var t="(",n=0;n<e.length;n++)t+=e[n].id?e[n].id+", ":e[n]+", ";return(t=t.substring(0,t.length-2))+")"}},{key:"each",value:function(e,t){for(var n=0;n<e.length;n++)t(e[n])}},{key:"get",value:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r][t]==n)return e[r]}},{key:"contains",value:function(e,t){if(t.property||t.func){if(t.func){for(var n=0;n<e.length;n++)if(t.func(e[n]))return!0}else for(var r=0;r<e.length;r++)if(e[r][t.property]==t.value)return!0}else for(var i=0;i<e.length;i++)if(e[i]==t.value)return!0;return!1}},{key:"intersection",value:function(e,t){for(var n=new Array,r=0;r<e.length;r++)for(var i=0;i<t.length;i++)e[r]===t[i]&&n.push(e[r]);return n}},{key:"unique",value:function(e){var t={};return e.filter(function(e){return void 0===t[e]&&(t[e]=!0)})}},{key:"count",value:function(e,t){for(var n=0,r=0;r<e.length;r++)e[r]===t&&n++;return n}},{key:"toggle",value:function(e,t){for(var n=Array(),r=!1,i=0;i<e.length;i++)e[i]!==t?n.push(e[i]):r=!0;return r||n.push(t),n}},{key:"remove",value:function(e,t){for(var n=Array(),r=0;r<e.length;r++)e[r]!==t&&n.push(e[r]);return n}},{key:"removeUnique",value:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),e}},{key:"removeAll",value:function(e,t){return e.filter(function(e){return-1===t.indexOf(e)})}},{key:"merge",value:function(e,t){for(var n=new Array(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];for(var i=0;i<t.length;i++)n[e.length+i]=t[i];return n}},{key:"containsAll",value:function(e,t){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<t.length;i++)e[r]===t[i]&&n++;return n===t.length}},{key:"sortByAtomicNumberDesc",value:function(e){var t=e.map(function(e,t){return{index:t,value:e.atomicNumber.split(".").map(Number)}});return t.sort(function(e,t){for(var n=Math.min(t.value.length,e.value.length),r=0;r<n&&t.value[r]===e.value[r];)r++;return r===n?t.value.length-e.value.length:t.value[r]-e.value[r]}),t.map(function(t){return e[t.index]})}},{key:"deepCopy",value:function(t){for(var n=Array(),r=0;r<t.length;r++){var i=t[r];i instanceof Array?n[r]=e.deepCopy(i):n[r]=i}return n}}]),e}();e.exports=o},function(e,t,n){(function(e,r){var i;(function(){var o=Array.prototype.slice,a={toString:function(){return"Bacon"},version:"0.7.95"},s=("undefined"!==typeof e&&null!==e?e:this).Error,l=function(){},u=function(e,t){return e},c=function(e,t){if(!t)throw new s(e)},h=function(e){if((null!=e?e._isObservable:void 0)&&!(null!=e?e._isProperty:void 0))throw new s("Observable is not a Property : "+e)},d=function(e){return c("not a function : "+e,_.isFunction(e))},f=Array.isArray||function(e){return e instanceof Array},p=function(e){return e&&e._isObservable},g=function(e){for(var t=arguments.length,n=1;1<t?n<t:n>t;1<t?n++:n--)for(var r in arguments[n])e[r]=arguments[n][r];return e},v=function(e,t){var n={}.hasOwnProperty,r=function(){};for(var i in r.prototype=t.prototype,e.prototype=new r,t)n.call(t,i)&&(e[i]=t[i]);return e},m=function(e){return"undefined"!==typeof Symbol&&Symbol[e]?Symbol[e]:"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?Symbol[e]=Symbol.for(e):"@@"+e},_={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},indexWhere:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){for(var n,r=[],i=0;i<t.length;i++)e(n=t[i])&&r.push(n);return r},map:function(e,t){return function(){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r.push(e(n));return r}()},each:function(e,t){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t(n,e[n])}},toArray:function(e){return f(e)?e:[e]},contains:function(e,t){return-1!==_.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?_.id:arguments[1],n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0},any:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?_.id:arguments[1],n=0;n<e.length;n++)if(t(e[n]))return!0;return!1},without:function(e,t){return _.filter(function(t){return t!==e},t)},remove:function(e,t){var n=_.indexOf(t,e);if(n>=0)return t.splice(n,1)},fold:function(e,t,n){for(var r=0;r<e.length;r++)t=n(t,e[r]);return t},flatMap:function(e,t){return _.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t=L;return function(){return("undefined"!==typeof t&&null!==t?t._isNone:void 0)&&(t=e(),e=void 0),t}},bind:function(e,t){return function(){return e.apply(t,arguments)}},isFunction:function(e){return"function"===typeof e},toString:function(e){var t,n,r={}.hasOwnProperty;try{return b++,null==e?"undefined":_.isFunction(e)?"function":f(e)?b>5?"[..]":"["+_.map(_.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"===typeof e?b>5?"{..}":"{"+function(){var i=[];for(t in e)r.call(e,t)&&(n=function(){var n;try{return e[t]}catch(n){return n}}(),i.push(_.toString(t)+":"+_.toString(n)));return i}()+"}":e}finally{b--}}},b=0;a._=_;var y=a.UpdateBarrier=function(){var e,t=[],n={},r=[],i=0,o={};function s(e){e<=i||(r[e-1]||(r[e-1]=[[],0]),i=e)}var l=function(t,n){if(!e&&!r.length)return n();s(1);for(var o=0;o<i-1&&!u(t,r[o][0]);)o++;r[o][0].push([t,n]),e||c()};function u(e,t){for(var n=0;n<t.length;n++)if(t[n][0].id==e.id)return!0;return!1}function c(){var e=i;if(e)for(;i>=e;){var t=r[i-1];if(!t)throw new Y("Unexpected stack top: "+t);var n=t[0],o=t[1];if(!(o<n.length)){t[0]=[],t[1]=0;break}var a=n[o],l=(a[0],a[1]);t[1]++,s(i+1);var u=!1;try{for(l(),u=!0;i>e&&0==r[i-1][0].length;)i--}finally{u||(r=[],i=0)}}}var h=function(e,r){var i=t[e],o=i.id,a=n[o];t.splice(e,1),delete n[o],r&&t.length>0&&d(i);for(var s=0;s<a.length;s++)(0,a[s])()},d=function e(r){if(!o[r.id]){for(var i,a=r.internalDeps(),s=0;s<a.length;s++)if(e(i=a[s]),n[i.id]){var l=_.indexOf(t,i);h(l,!1)}o[r.id]=!0}};return{whenDoneWith:function(r,i){if(e){var o=n[r.id];return"undefined"===typeof o||null===o?(o=n[r.id]=[i],t.push(r)):o.push(i)}return i()},hasWaiters:function(){return t.length>0},inTransaction:function(n,r,i,a){if(e)return i.apply(r,a);e=n;try{var s=i.apply(r,a);!function(){for(;t.length>0;)h(0,!0);o={}}()}finally{e=void 0,c()}return s},currentEventId:function(){return e?e.id:void 0},wrappedSubscribe:function(e,t){var n=!1,r=!1,i=function(){return r=!0},o=function(){return n=!0,i()};return i=e.dispatcher.subscribe(function(r){return l(e,function(){if(!n&&t(r)===a.noMore)return o()})}),r&&i(),o},afterTransaction:l}}();function w(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.obs=e,this.sync=t,this.lazy=n,this.queue=[]}function x(){w.apply(this,arguments)}function k(e){w.call(this,e,!0)}function S(e,t,n){this.context=e,this.method=t,this.args=n}g(w.prototype,{_isSource:!0,subscribe:function(e){return this.obs.dispatcher.subscribe(e)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0,!0},consume:function(){return this.lazy?{value:_.always(this.queue[0])}:this.queue[0]},push:function(e){return this.queue=[e],[e]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),v(x,w),g(x.prototype,{consume:function(){return this.queue.shift()},push:function(e){return this.queue.push(e)},mayHave:function(e){return!this.ended||this.queue.length>=e},hasAtLeast:function(e){return this.queue.length>=e},flatten:!1}),v(k,w),g(k.prototype,{consume:function(){var e=this.queue;return this.queue=[],{value:function(){return e}}},push:function(e){return this.queue.push(e.value())},hasAtLeast:function(){return!0}}),w.isTrigger=function(e){return(null!=e?e._isSource:void 0)?e.sync:null!=e?e._isEventStream:void 0},w.fromObservable=function(e){return(null!=e?e._isSource:void 0)?e:(null!=e?e._isProperty:void 0)?new w(e,!1):new x(e,!0)},g(S.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=T([this.context].concat(this.args))),this.cached},toString:function(){return _.toString(this.context)+"."+_.toString(this.method)+"("+_.map(_.toString,this.args)+")"}});var C=function(e,t){var n=e||t;if(n&&n._isDesc)return e||t;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new S(e,t,i)},E=function(e,t){return t.desc=e,t},T=function e(t){return f(t)?_.flatMap(e,t):p(t)?[t]:("undefined"!==typeof t&&null!==t?t._isSource:void 0)?[t.obs]:[]};a.Desc=S,a.Desc.empty=new a.Desc("","",[]);var P=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("object"===typeof t&&r.length){var o=t,a=r[0];t=function(){return o[a].apply(o,arguments)},r=r.slice(1)}return e.apply(void 0,[t].concat(r))}},A=function(e){return e=Array.prototype.slice.call(e),M.apply(void 0,e)},O=function(e,t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(void 0,t.concat(r))}},z=function(e,t){var n=e.slice(1).split("."),r=_.map(function(e){return function(t){return function(n){if("undefined"!==typeof n&&null!==n){var r=n[t];return _.isFunction(r)?r.apply(n,e):r}}}}(t),n);return function(e){for(var t=0;t<r.length;t++)e=(0,r[t])(e);return e}},N=function(e){return"string"===typeof e&&e.length>1&&"."===e.charAt(0)},M=P(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _.isFunction(e)?n.length?O(e,n):e:N(e)?z(e,n):_.always(e)}),R=function(e,t){return M.apply(void 0,[e].concat(t))},D=function(e,t,n,r){if("undefined"!==typeof t&&null!==t?t._isProperty:void 0){var i=t.sampledBy(e,function(e,t){return[e,t]});return r.call(i,function(e){var t=e[0];e[1];return t}).map(function(e){e[0];return e[1]})}return t=R(t,n),r.call(e,t)},I=function(e){if(_.isFunction(e))return e;if(N(e)){var t=j(e);return function(e,n){return e[t](n)}}throw new s("not a function or a field key: "+e)},j=function(e){return e.slice(1)};function F(e){this.value=e}g(F.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(e){return e(this.value)?new F(this.value):L},map:function(e){return new F(e(this.value))},forEach:function(e){return e(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});var L={_isNone:!0,getOrElse:function(e){return e},filter:function(){return L},map:function(){return L},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},B=function(e){return("undefined"!==typeof e&&null!==e?e._isSome:void 0)||("undefined"!==typeof e&&null!==e?e._isNone:void 0)?e:new F(e)};a.noMore="<no-more>",a.more="<more>";var U=0;function W(){this.id=++U}function V(e,t){if(!(this instanceof V))return new V(e,t);W.call(this),!t&&_.isFunction(e)||(null!=e?e._isNext:void 0)?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}function H(e,t){if(!(this instanceof H))return new H(e,t);V.call(this,e,t)}function q(){if(!(this instanceof q))return new q;W.call(this)}function Y(e){if(!(this instanceof Y))return new Y(e);this.error=e,W.call(this)}W.prototype._isEvent=!0,W.prototype.isEvent=function(){return!0},W.prototype.isEnd=function(){return!1},W.prototype.isInitial=function(){return!1},W.prototype.isNext=function(){return!1},W.prototype.isError=function(){return!1},W.prototype.hasValue=function(){return!1},W.prototype.filter=function(){return!0},W.prototype.inspect=function(){return this.toString()},W.prototype.log=function(){return this.toString()},v(V,W),V.prototype.isNext=function(){return!0},V.prototype.hasValue=function(){return!0},V.prototype.value=function(){var e;return(null!=(e=this.valueF)?e._isNext:void 0)?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},V.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},V.prototype.apply=function(e){return new V(e)},V.prototype.filter=function(e){return e(this.value())},V.prototype.toString=function(){return _.toString(this.value())},V.prototype.log=function(){return this.value()},V.prototype._isNext=!0,v(H,V),H.prototype._isInitial=!0,H.prototype.isInitial=function(){return!0},H.prototype.isNext=function(){return!1},H.prototype.apply=function(e){return new H(e)},H.prototype.toNext=function(){return new V(this)},v(q,W),q.prototype.isEnd=function(){return!0},q.prototype.fmap=function(){return this},q.prototype.apply=function(){return this},q.prototype.toString=function(){return"<end>"},v(Y,W),Y.prototype.isError=function(){return!0},Y.prototype.fmap=function(){return this},Y.prototype.apply=function(){return this},Y.prototype.toString=function(){return"<error> "+_.toString(this.error)},a.Event=W,a.Initial=H,a.Next=V,a.End=q,a.Error=Y;var $=function(e){return new H(e,!0)},K=function(e){return new V(e,!0)},X=function(){return new q},G=function(e){return e&&e._isEvent?e:K(e)},Q=0,J=function(){};function Z(e){this.desc=e,this.id=++Q,this.initialDesc=this.desc}function ee(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.unsubscribe=_.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var t,n=0;n<e.length;n++)t=e[n],this.add(t)}function te(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=_.bind(this.subscribe,this),this.handleEvent=_.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function ne(e,t,n){if(!(this instanceof ne))return new ne(e,t,n);_.isFunction(e)&&(n=t,t=e,e=S.empty),Z.call(this,e),d(t),this.dispatcher=new te(t,n),J(this)}g(Z.prototype,{_isObservable:!0,subscribe:function(e){return y.wrappedSubscribe(this,e)},subscribeInternal:function(e){return this.dispatcher.subscribe(e)},onValue:function(){var e=A(arguments);return this.subscribe(function(t){if(t.hasValue())return e(t.value())})},onValues:function(e){return this.onValue(function(t){return e.apply(void 0,t)})},onError:function(){var e=A(arguments);return this.subscribe(function(t){if(t.isError())return e(t.error)})},onEnd:function(){var e=A(arguments);return this.subscribe(function(t){if(t.isEnd())return e()})},name:function(e){return this._name=e,this},withDescription:function(){return this.desc=C.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},deps:function(){return this.desc.deps()},internalDeps:function(){return this.initialDesc.deps()}}),Z.prototype.assign=Z.prototype.onValue,Z.prototype.forEach=Z.prototype.onValue,Z.prototype.inspect=Z.prototype.toString,a.Observable=Z,g(ee.prototype,{add:function(e){var t=this;if(!this.unsubscribed){var n=!1,r=l;this.starting.push(e);return r=e(this.unsubscribe,function(){if(!t.unsubscribed)return n=!0,t.remove(r),_.remove(e,t.starting)}),this.unsubscribed||n?r():this.subscriptions.push(r),_.remove(e,this.starting),r}},remove:function(e){if(!this.unsubscribed)return void 0!==_.remove(e,this.subscriptions)?e():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var e=this.subscriptions,t=0;t<e.length;t++)e[t]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}}),a.CompositeUnsubscribe=ee,te.prototype.hasSubscribers=function(){return this.subscriptions.length>0},te.prototype.removeSub=function(e){return this.subscriptions=_.without(e,this.subscriptions),this.subscriptions},te.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),y.inTransaction(e,this,this.pushIt,[e])},te.prototype.pushToSubscriptions=function(e){try{for(var t=this.subscriptions,n=t.length,r=0;r<n;r++){var i=t[r];(i.sink(e)===a.noMore||e.isEnd())&&this.removeSub(i)}return!0}catch(o){throw this.pushing=!1,this.queue=[],o}},te.prototype.pushIt=function(e){if(this.pushing)return this.queue.push(e),a.more;if(e!==this.prevError){for(e.isError()&&(this.prevError=e),this.pushing=!0,this.pushToSubscriptions(e),this.pushing=!1;this.queue.length;)e=this.queue.shift(),this.push(e);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},te.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},te.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},te.prototype.subscribe=function(e){var t,n;return this.ended?(e(X()),l):(d(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),d(this.unsubSrc)),n=this,function(){if(n.removeSub(t),!n.hasSubscribers())return n.unsubscribeFromSource()})},a.Dispatcher=te,v(ne,Z),g(ne.prototype,{_isEventStream:!0,toProperty:function(e){var t=0===arguments.length?L:B(function(){return e}),n=this.dispatcher;return new ae(new a.Desc(this,"toProperty",[e]),function(e){var r=!1,i=!1,o=l,s=a.more,u=function(){if(!r)return t.forEach(function(t){if(r=!0,(s=e(new H(t)))===a.noMore)return o(),o=l,l})};return o=n.subscribe(function(n){return n.hasValue()?n.isInitial()&&!i?(t=new F(function(){return n.value()}),a.more):(n.isInitial()||u(),r=!0,t=new F(n),e(n)):(n.isEnd()&&(s=u()),s!==a.noMore?e(n):void 0)}),i=!0,u(),o})},toEventStream:function(){return this},withHandler:function(e){return new ne(new a.Desc(this,"withHandler",[e]),this.dispatcher.subscribe,e)}}),a.EventStream=ne,a.never=function(){return new ne(C(a,"never"),function(e){return e(X()),l})},a.when=function(){if(0===arguments.length)return a.never();var e=arguments.length;c("when: expecting arguments in the form (Observable+,function)+",e%2===0);for(var t=[],n=[],r=0,i=[];r<e;){i[r]=arguments[r],i[r+1]=arguments[r+1];for(var o,s=_.toArray(arguments[r]),l={f:ie(arguments[r+1]),ixs:[]},u=!1,h=0;h<s.length;h++){o=s[h];var d=_.indexOf(t,o);u||(u=w.isTrigger(o)),d<0&&(t.push(o),d=t.length-1);for(var f,p=0;p<l.ixs.length;p++)(f=l.ixs[p]).index===d&&f.count++;l.ixs.push({index:d,count:1})}c("At least one EventStream required",u||!s.length),s.length>0&&n.push(l),r+=2}if(!t.length)return a.never();t=_.map(w.fromObservable,t);var g=_.any(t,function(e){return e.flatten})&&re(_.map(function(e){return e.obs},t)),v=new ne(new a.Desc(a,"when",i),function(e){var r=[],i=!1,o=function(e){for(var n,r=0;r<e.ixs.length;r++)if(n=e.ixs[r],!t[n.index].hasAtLeast(n.count))return!1;return!0},s=function(e){return!e.sync||e.ended},l=function(e){for(var n,r=0;r<e.ixs.length;r++)if(n=e.ixs[r],!t[n.index].mayHave(n.count))return!0},u=function(e){return!e.source.flatten},c=function(c){return function(h){var d=function(){return y.whenDoneWith(v,f)},f=function(){var c=function i(){if(!(r.length>0))return a.more;for(var s,l=a.more,c=r.pop(),h=0;h<n.length;h++)if(s=n[h],o(s)){var d=function(){for(var e,n=[],r=0;r<s.ixs.length;r++)e=s.ixs[r],n.push(t[e.index].consume());return n}();return l=e(c.e.apply(function(){var e,t=function(){for(var e,t=[],n=0;n<d.length;n++)e=d[n],t.push(e.value());return t}();return(e=s).f.apply(e,t)})),r.length&&(r=_.filter(u,r)),l===a.noMore?l:i()}}();return i&&(_.all(t,s)||_.all(n,l))&&(c=a.noMore,e(X())),c===a.noMore&&h(),c};return c.subscribe(function(t){if(t.isEnd())i=!0,c.markEnded(),d();else if(t.isError())var n=e(t);else c.push(t),c.sync&&(r.push({source:c,e:t}),g||y.hasWaiters()?d():f());return n===a.noMore&&h(),n||a.more})}};return new a.CompositeUnsubscribe(function(){for(var e,n=[],r=0;r<t.length;r++)e=t[r],n.push(c(e));return n}()).unsubscribe});return v};var re=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return _.any(e,function e(n){if(_.contains(t,n))return!0;var r=n.internalDeps();return r.length?(t.push(n),_.any(r,e)):(t.push(n),!1)})},ie=function(e){return _.isFunction(e)?e:_.always(e)};function oe(e,t,n){te.call(this,t,n),this.property=e,this.subscribe=_.bind(this.subscribe,this),this.current=L,this.currentValueRootId=void 0,this.propertyEnded=!1}function ae(e,t,n){Z.call(this,e),d(t),this.dispatcher=new oe(this,t,n),J(this)}a.groupSimultaneous=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&f(t[0])&&(t=t[0]);var r=function(){for(var e,n=[],r=0;r<t.length;r++)e=t[r],n.push(new k(e));return n}();return E(new a.Desc(a,"groupSimultaneous",t),a.when(r,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}))},v(oe,te),g(oe.prototype,{push:function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new F(e),this.currentValueRootId=y.currentEventId()),te.prototype.push.call(this,e)},maybeSubSource:function(e,t){return t===a.noMore?l:this.propertyEnded?(e(X()),l):te.prototype.subscribe.call(this,e)},subscribe:function(e){var t=this,n=a.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=y.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?(y.whenDoneWith(this.property,function(){if(t.currentValueRootId===i)return e($(t.current.get().value()))}),this.maybeSubSource(e,n)):(y.inTransaction(void 0,this,function(){return n=e($(this.current.get().value()))},[]),this.maybeSubSource(e,n))}return this.maybeSubSource(e,n)}}),v(ae,Z),g(ae.prototype,{_isProperty:!0,changes:function(){var e=this;return new ne(new a.Desc(this,"changes",[]),function(t){return e.dispatcher.subscribe(function(e){if(!e.isInitial())return t(e)})})},withHandler:function(e){return new ae(new a.Desc(this,"withHandler",[e]),this.dispatcher.subscribe,e)},toProperty:function(){return c("no arguments supported",0===arguments.length),this},toEventStream:function(){var e=this;return new ne(new a.Desc(this,"toEventStream",[]),function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})})}}),a.Property=ae,a.constant=function(e){return new ae(new a.Desc(a,"constant",[e]),function(t){return t($(e)),t(X()),l})},a.fromBinder=function(e){var t=arguments.length<=1||void 0===arguments[1]?_.id:arguments[1];return new ne(new a.Desc(a,"fromBinder",[e,t]),function(n){var r=!1,i=!1,o=function(){if(!r)return"undefined"!==typeof s&&null!==s?(s(),r=!0):i=!0},s=e(function(){for(var e,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];var l=t.apply(this,i);f(l)&&(null!=(e=_.last(l))?e._isEvent:void 0)||(l=[l]);for(var u,c=a.more,h=0;h<l.length;h++)if(u=l[h],(c=n(u=G(u)))===a.noMore||u.isEnd())return o(),c;return c});return i&&o(),o})},a.Observable.prototype.map=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(this,e,n,function(e){return E(new a.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})};var se=function(e){return f(e[0])?e[0]:Array.prototype.slice.call(e)},le=function(e){return _.isFunction(e[0])?[se(Array.prototype.slice.call(e,1)),e[0]]:[se(Array.prototype.slice.call(e,0,e.length-1)),_.last(e)]};a.combineAsArray=function(){var e=se(arguments);if(e.length){for(var t=[],n=0;n<e.length;n++){var r=p(e[n])?e[n]:a.constant(e[n]);t.push(new w(r,!0))}return E(new a.Desc(a,"combineAsArray",e),a.when(t,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}).toProperty())}return a.constant([])},a.onValues=function(){return a.combineAsArray(Array.prototype.slice.call(arguments,0,arguments.length-1)).onValues(arguments[arguments.length-1])},a.combineWith=function(){var e=le(arguments),t=e[0],n=e[1],r=new a.Desc(a,"combineWith",[n].concat(t));return E(r,a.combineAsArray(t).map(function(e){return n.apply(void 0,e)}))},a.Observable.prototype.combine=function(e,t){var n=I(t),r=new a.Desc(this,"combine",[e,t]);return E(r,a.combineAsArray(this,e).map(function(e){return n(e[0],e[1])}))},a.Observable.prototype.withStateMachine=function(e,t){var n=e,r=new a.Desc(this,"withStateMachine",[e,t]);return E(r,this.withHandler(function(e){var r=t(n,e),i=r[0],o=r[1];n=i;for(var s,l=a.more,u=0;u<o.length;u++)if(s=o[u],(l=this.push(s))===a.noMore)return l;return l}))};var ue=function(e,t){return e===t};a.Observable.prototype.skipDuplicates=function(){var e=arguments.length<=0||void 0===arguments[0]?ue:arguments[0],t=new a.Desc(this,"skipDuplicates",[]);return E(t,this.withStateMachine(L,function(t,n){return n.hasValue()?n.isInitial()||"undefined"!==typeof(r=t)&&null!==r&&r._isNone||!e(t.get(),n.value())?[new F(n.value()),[n]]:[t,[]]:[t,[n]];var r}))},a.Observable.prototype.awaiting=function(e){var t=new a.Desc(this,"awaiting",[e]);return E(t,a.groupSimultaneous(this,e).map(function(e){return 0===e[1].length}).toProperty(!1).skipDuplicates())},a.Observable.prototype.not=function(){return E(new a.Desc(this,"not",[]),this.map(function(e){return!e}))},a.Property.prototype.and=function(e){return E(new a.Desc(this,"and",[e]),this.combine(e,function(e,t){return e&&t}))},a.Property.prototype.or=function(e){return E(new a.Desc(this,"or",[e]),this.combine(e,function(e,t){return e||t}))},a.scheduler={setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setTimeout(e,t)}),setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setInterval(e,t)}),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearInterval(e)}),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearTimeout(e)}),now:function(){return(new Date).getTime()}},a.EventStream.prototype.bufferWithTime=function(e){return E(new a.Desc(this,"bufferWithTime",[e]),this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},a.EventStream.prototype.bufferWithCount=function(e){return E(new a.Desc(this,"bufferWithCount",[e]),this.bufferWithTimeOrCount(void 0,e))},a.EventStream.prototype.bufferWithTimeOrCount=function(e,t){var n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},r=new a.Desc(this,"bufferWithTimeOrCount",[e,t]);return E(r,this.buffer(e,n,n))},a.EventStream.prototype.buffer=function(e){var t=arguments.length<=1||void 0===arguments[1]?l:arguments[1],n=arguments.length<=2||void 0===arguments[2]?l:arguments[2],r={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(a.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var e=this.values;this.values=[];var t=this.push(K(e));if(null!=this.end)return this.push(this.end);if(t!==a.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var t=this;if(!this.scheduled)return this.scheduled=e(function(){return t.flush()})}},i=a.more;if(!_.isFunction(e)){var o=e;e=function(e){return a.scheduler.setTimeout(e,o)}}return E(new a.Desc(this,"buffer",[]),this.withHandler(function(e){var n=this;return r.push=function(e){return n.push(e)},e.isError()?i=this.push(e):e.isEnd()?(r.end=e,r.scheduled||r.flush()):(r.values.push(e.value()),t(r)),i}))},a.Observable.prototype.filter=function(e){h(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(this,e,n,function(e){return E(new a.Desc(this,"filter",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):a.more}))})},a.once=function(e){return new ne(new S(a,"once",[e]),function(t){return t(G(e)),t(X()),l})},a.EventStream.prototype.concat=function(e){var t=this;return new ne(new a.Desc(t,"concat",[e]),function(n){var r=l,i=t.dispatcher.subscribe(function(t){return t.isEnd()?r=e.toEventStream().dispatcher.subscribe(n):n(t)});return function(){return i(),r()}})},a.Property.prototype.concat=function(e){return ce(this,this.changes().concat(e))},a.concatAll=function(){var e=se(arguments);return e.length?E(new a.Desc(a,"concatAll",e),_.fold(_.tail(e),_.head(e).toEventStream(),function(e,t){return e.concat(t)})):a.never()};var ce=function(e,t){var n=new ne(C(e,"justInitValue"),function(t){var r=void 0,i=e.dispatcher.subscribe(function(e){return e.isEnd()||(r=e),a.noMore});return y.whenDoneWith(n,function(){return"undefined"!==typeof r&&null!==r&&t(r),t(X())}),i});return n.concat(t).toProperty()};a.Observable.prototype.flatMap=function(){return fe(this,he(arguments))},a.Observable.prototype.flatMapFirst=function(){return fe(this,he(arguments),!0)};var he=function(e){return 1===e.length&&p(e[0])?_.always(e[0]):A(e)},de=function(e){return p(e)?e:a.once(e)},fe=function(e,t,n,r){var i=[e],o=[],s=new ne(new a.Desc(e,"flatMap"+(n?"First":""),[t]),function(i){var s=new ee,l=[],u=function(e){var n=de(t(e.value()));return o.push(n),s.add(function(e,t){return n.dispatcher.subscribe(function(r){if(r.isEnd())return _.remove(n,o),c(),h(t),a.noMore;("undefined"!==typeof r&&null!==r?r._isInitial:void 0)&&(r=r.toNext());var s=i(r);return s===a.noMore&&e(),s})})},c=function(){var e=l.shift();if(e)return u(e)},h=function(e){if(e(),s.empty())return i(X())};return s.add(function(t,o){return e.dispatcher.subscribe(function(e){return e.isEnd()?h(o):e.isError()?i(e):n&&s.count()>1?a.more:s.unsubscribed?a.noMore:r&&s.count()>r?l.push(e):u(e)})}),s.unsubscribe});return s.internalDeps=function(){return o.length?i.concat(o):i},s};function pe(){if(!(this instanceof pe))return new pe;this.unsubAll=_.bind(this.unsubAll,this),this.subscribeAll=_.bind(this.subscribeAll,this),this.guardedSink=_.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,ne.call(this,new a.Desc(a,"Bus",[]),this.subscribeAll)}a.Observable.prototype.flatMapWithConcurrencyLimit=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new a.Desc(this,"flatMapWithConcurrencyLimit",[e].concat(n));return E(i,fe(this,he(n),!1,e))},a.Observable.prototype.flatMapConcat=function(){var e=new a.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0));return E(e,this.flatMapWithConcurrencyLimit.apply(this,[1].concat(o.call(arguments))))},a.later=function(e,t){return E(new a.Desc(a,"later",[e,t]),a.fromBinder(function(n){var r=a.scheduler.setTimeout(function(){return n([t,X()])},e);return function(){return a.scheduler.clearTimeout(r)}}))},a.Observable.prototype.bufferingThrottle=function(e){var t=new a.Desc(this,"bufferingThrottle",[e]);return E(t,this.flatMapConcat(function(t){return a.once(t).concat(a.later(e).filter(!1))}))},a.Property.prototype.bufferingThrottle=function(){return a.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},v(pe,ne),g(pe.prototype,{unsubAll:function(){for(var e,t=this.subscriptions,n=0;n<t.length;n++)"function"===typeof(e=t[n]).unsub&&e.unsub()},subscribeAll:function(e){if(this.ended)e(X());else{this.sink=e;for(var t,n=this.subscriptions.slice(0),r=0;r<n.length;r++)t=n[r],this.subscribeInput(t)}return this.unsubAll},guardedSink:function(e){var t=this;return function(n){return n.isEnd()?(t.unsubscribeInput(e),a.noMore):t.sink(n)}},subscribeInput:function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input)),e.unsub},unsubscribeInput:function(e){for(var t,n=this.subscriptions,r=0;r<n.length;r++)if((t=n[r]).input===e)return"function"===typeof t.unsub&&t.unsub(),void this.subscriptions.splice(r,1)},plug:function(e){var t=this;if(function(e){if(!(null!=e?e._isObservable:void 0))throw new s("not an Observable : "+e)}(e),!this.ended){var n={input:e};return this.subscriptions.push(n),"undefined"!==typeof this.sink&&this.subscribeInput(n),function(){return t.unsubscribeInput(e)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"===typeof this.sink)return this.sink(X())},push:function(e){if(!this.ended&&"function"===typeof this.sink){var t=!this.pushing;if(!t)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(e);this.pushing=!0;try{return this.sink(K(e))}finally{if(t&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){e=this.pushQueue[n];this.sink(K(e)),n++}this.pushQueue=null}this.pushing=!1}}},error:function(e){if("function"===typeof this.sink)return this.sink(new Y(e))}}),a.Bus=pe;var ge=function(e,t){return P(function(n){for(var r=O(t,[function(e,t){return n.apply(void 0,e.concat([t]))}]),i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return E(new a.Desc(a,e,[n].concat(o)),a.combineAsArray(o).flatMap(r))})};a.fromCallback=ge("fromCallback",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.fromBinder(function(t){return R(e,n)(t),l},function(e){return[e,X()]})}),a.fromNodeCallback=ge("fromNodeCallback",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.fromBinder(function(t){return R(e,n)(t),l},function(e,t){return e?[new Y(e),X()]:[t,X()]})}),a.combineTemplate=function(e){function t(e,t,n){return(function(e){return e[e.length-1]}(e))[t]=n,n}function n(e){return f(e)?[]:{}}function r(e){if(p(e))return!0;if(e&&(e.constructor==Object||e.constructor==Array))for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t))if(r(e[t]))return!0}}function i(e,i){if(p(i))l.push(i),s.push(function(e,n){return function(r,i){t(r,e,i[n])}}(e,l.length-1));else if(r(i)){s.push(function(e,r){return function(i){var o=n(r);t(i,e,o),i.push(o)}}(e,i)),o(i),s.push(function(e){e.pop()})}else s.push(function(e,n){return function(r){t(r,e,n)}}(e,i))}function o(e){_.each(e,i)}var s=[],l=[],u=r(e)?(o(e),a.combineAsArray(l).map(function(t){for(var r=n(e),i=[r],o=0;o<s.length;o++)(0,s[o])(i,t);return r})):a.constant(e);return E(new a.Desc(a,"combineTemplate",[e]),u)},a.Observable.prototype.mapEnd=function(){var e=A(arguments);return E(new a.Desc(this,"mapEnd",[e]),this.withHandler(function(t){return t.isEnd()?(this.push(K(e(t))),this.push(X()),a.noMore):this.push(t)}))},a.Observable.prototype.skipErrors=function(){return E(new a.Desc(this,"skipErrors",[]),this.withHandler(function(e){return e.isError()?a.more:this.push(e)}))},a.EventStream.prototype.takeUntil=function(e){var t={};return E(new a.Desc(this,"takeUntil",[e]),a.groupSimultaneous(this.mapEnd(t),e.skipErrors()).withHandler(function(e){if(e.hasValue()){var n=e.value(),r=n[0];if(n[1].length)return this.push(X());for(var i,o=a.more,s=0;s<r.length;s++)o=(i=r[s])===t?this.push(X()):this.push(K(i));return o}return this.push(e)}))},a.Property.prototype.takeUntil=function(e){var t=this.changes().takeUntil(e);return E(new a.Desc(this,"takeUntil",[e]),ce(this,t))},a.Observable.prototype.flatMapLatest=function(){var e=he(arguments),t=this.toEventStream();return E(new a.Desc(this,"flatMapLatest",[e]),t.flatMap(function(n){return de(e(n)).takeUntil(t)}))},a.Property.prototype.delayChanges=function(e,t){return E(e,ce(this,t(this.changes())))},a.EventStream.prototype.delayChanges=function(e,t){return E(e,t(this))},a.Observable.prototype.delay=function(e){return this.delayChanges(new a.Desc(this,"delay",[e]),function(t){return t.flatMap(function(t){return a.later(e,t)})})},a.Observable.prototype.debounce=function(e){return this.delayChanges(new a.Desc(this,"debounce",[e]),function(t){return t.flatMapLatest(function(t){return a.later(e,t)})})},a.Observable.prototype.debounceImmediate=function(e){return this.delayChanges(new a.Desc(this,"debounceImmediate",[e]),function(t){return t.flatMapFirst(function(t){return a.once(t).concat(a.later(e).filter(!1))})})},a.Observable.prototype.decode=function(e){return E(new a.Desc(this,"decode",[e]),this.combine(a.combineTemplate(e),function(e,t){return t[e]}))},a.Observable.prototype.scan=function(e,t){var n,r=this;t=I(t);var i=B(e),o=!1;return n=new ae(new a.Desc(this,"scan",[e,t]),function(e){var s=!1,u=l,c=a.more,h=function(){if(!s)return i.forEach(function(t){if(s=o=!0,(c=e(new H(function(){return t})))===a.noMore)return u(),u=l})};return u=r.dispatcher.subscribe(function(n){if(n.hasValue()){if(o&&n.isInitial())return a.more;n.isInitial()||h(),s=o=!0;var r=i.getOrElse(void 0),l=t(r,n.value());return i=new F(l),e(n.apply(function(){return l}))}if(n.isEnd()&&(c=h()),c!==a.noMore)return e(n)}),y.whenDoneWith(n,h),u})},a.Observable.prototype.diff=function(e,t){return t=I(t),E(new a.Desc(this,"diff",[e,t]),this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},a.Observable.prototype.doAction=function(){var e=A(arguments);return E(new a.Desc(this,"doAction",[e]),this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},a.Observable.prototype.doEnd=function(){var e=A(arguments);return E(new a.Desc(this,"doEnd",[e]),this.withHandler(function(t){return t.isEnd()&&e(),this.push(t)}))},a.Observable.prototype.doError=function(){var e=A(arguments);return E(new a.Desc(this,"doError",[e]),this.withHandler(function(t){return t.isError()&&e(t.error),this.push(t)}))},a.Observable.prototype.doLog=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(new a.Desc(this,"doLog",t),this.withHandler(function(e){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log.apply(console,t.concat([e.log()])),this.push(e)}))},a.Observable.prototype.endOnError=function(e){"undefined"!==typeof e&&null!==e||(e=!0);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(this,e,n,function(e){return E(new a.Desc(this,"endOnError",[]),this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(X())):this.push(t)}))})},Z.prototype.errors=function(){return E(new a.Desc(this,"errors",[]),this.filter(function(){return!1}))},a.Observable.prototype.take=function(e){return e<=0?a.never():E(new a.Desc(this,"take",[e]),this.withHandler(function(t){return t.hasValue()?--e>0?this.push(t):(0===e&&this.push(t),this.push(X()),a.noMore):this.push(t)}))},a.Observable.prototype.first=function(){return E(new a.Desc(this,"first",[]),this.take(1))},a.Observable.prototype.mapError=function(){var e=A(arguments);return E(new a.Desc(this,"mapError",[e]),this.withHandler(function(t){return t.isError()?this.push(K(e(t.error))):this.push(t)}))},a.Observable.prototype.flatMapError=function(e){var t=new a.Desc(this,"flatMapError",[e]);return E(t,this.mapError(function(e){return new Y(e)}).flatMap(function(t){return t instanceof Y?e(t.error):a.once(t)}))},a.EventStream.prototype.flatScan=function(e,t){var n=e;return this.flatMapConcat(function(e){return de(t(n,e)).doAction(function(e){return n=e})}).toProperty(e)},a.EventStream.prototype.sampledBy=function(e,t){return E(new a.Desc(this,"sampledBy",[e,t]),this.toProperty().sampledBy(e,t))},a.Property.prototype.sampledBy=function(e,t){var n=!1;"undefined"!==typeof t&&null!==t?t=I(t):(n=!0,t=function(e){return e.value()});var r=new w(this,!1,n),i=new w(e,!0,n),o=a.when([r,i],t),s=e._isProperty?o.toProperty():o;return E(new a.Desc(this,"sampledBy",[e,t]),s)},a.Property.prototype.sample=function(e){return E(new a.Desc(this,"sample",[e]),this.sampledBy(a.interval(e,{})))},a.Observable.prototype.map=function(e){if(e&&e._isProperty)return e.sampledBy(this,u);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(this,e,n,function(e){return E(new a.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})},a.Observable.prototype.fold=function(e,t){return E(new a.Desc(this,"fold",[e,t]),this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},Z.prototype.reduce=Z.prototype.fold;var ve=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];function me(e){return[e,X()]}a.fromEventTarget=function(e,t,n){var r=function(e){for(var t,n=0;n<ve.length;n++){var r=[e[(t=ve[n])[0]],e[t[1]]];if(r[0]&&r[1])return r}for(var i=0;i<ve.length;i++){var o=e[(t=ve[i])[0]];if(o)return[o,function(){}]}throw new Y("No suitable event methods in "+e)}(e),i=r[0],o=r[1],s=new a.Desc(a,"fromEvent",[e,t]);return E(s,a.fromBinder(function(n){return i.call(e,t,n),function(){return o.call(e,t,n)}},n))},a.fromEvent=a.fromEventTarget,a.fromPoll=function(e,t){var n=new a.Desc(a,"fromPoll",[e,t]);return E(n,a.fromBinder(function(t){var n=a.scheduler.setInterval(t,e);return function(){return a.scheduler.clearInterval(n)}},t))},a.fromPromise=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?me:arguments[2];return E(new a.Desc(a,"fromPromise",[e]),a.fromBinder(function(n){var r=e.then(n,function(e){return n(new Y(e))});return r&&"function"===typeof r.done&&r.done(),t?function(){if("function"===typeof e.abort)return e.abort()}:function(){}},n))},a.Observable.prototype.groupBy=function(e){var t=arguments.length<=1||void 0===arguments[1]?a._.id:arguments[1],n={},r=this;return r.filter(function(t){return!n[e(t)]}).map(function(i){var o=e(i),s=r.filter(function(t){return e(t)===o}),l=a.once(i).concat(s),u=t(l,i).withHandler(function(e){if(this.push(e),e.isEnd())return delete n[o]});return n[o]=u,u})},a.fromArray=function(e){if(function(e){if(!f(e))throw new s("not an array : "+e)}(e),e.length){var t=0,n=new ne(new a.Desc(a,"fromArray",[e]),function(r){var i=!1,o=a.more,s=!1,l=!1;return function u(){if(l=!0,!s){for(s=!0;l;)if(l=!1,o!==a.noMore&&!i){var c=e[t++];(o=r(G(c)))!==a.noMore&&(t===e.length?r(X()):y.afterTransaction(n,u))}return s=!1}}(),function(){return i=!0}});return n}return E(new a.Desc(a,"fromArray",e),a.never())},a.EventStream.prototype.holdWhen=function(e){var t=!1,n=[],r=this,i=!1;return new ne(new a.Desc(this,"holdWhen",[e]),function(o){var a=new ee,s=!1,l=function(e){if("function"===typeof e&&e(),a.empty()&&s)return o(X())};return a.add(function(r,a){return e.subscribeInternal(function(e){if(!e.hasValue())return e.isEnd()?l(a):o(e);if(!(t=e.value())){var r=n;return n=[],function(){for(var e,t=[],n=0;n<r.length;n++)e=r[n],t.push(o(K(e)));return i&&(t.push(o(X())),a()),t}()}})}),a.add(function(e,a){return r.subscribeInternal(function(e){return t&&e.hasValue()?n.push(e.value()):e.isEnd()&&n.length?(i=!0,l(a)):o(e)})}),s=!0,l(),a.unsubscribe})},a.interval=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return E(new a.Desc(a,"interval",[e,t]),a.fromPoll(e,function(){return K(t)}))},a.$={},a.$.asEventStream=function(e,t,n){var r=this;return _.isFunction(t)&&(n=t,t=void 0),E(new a.Desc(this.selector||this,"asEventStream",[e]),a.fromBinder(function(n){return r.on(e,t,n),function(){return r.off(e,t,n)}},n))},"undefined"!==typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=a.$.asEventStream),"undefined"!==typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=a.$.asEventStream),a.Observable.prototype.last=function(){var e;return E(new a.Desc(this,"last",[]),this.withHandler(function(t){if(t.isEnd())return e&&this.push(e),this.push(X()),a.noMore;e=t}))},a.Observable.prototype.log=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.subscribe(function(e){"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,t.concat([e.log()]))}),this},a.EventStream.prototype.merge=function(e){!function(e){if(!(null!=e?e._isEventStream:void 0))throw new s("not an EventStream : "+e)}(e);return E(new a.Desc(this,"merge",[e]),a.mergeAll(this,e))},a.mergeAll=function(){var e=se(arguments);return e.length?new ne(new a.Desc(a,"mergeAll",e),function(t){var n=0,r=_.map(function(r){return function(i){return r.dispatcher.subscribe(function(r){if(r.isEnd())return++n===e.length?t(X()):a.more;var o=t(r);return o===a.noMore&&i(),o})}},e);return new a.CompositeUnsubscribe(r).unsubscribe}):a.never()},a.repeatedly=function(e,t){var n=0;return E(new a.Desc(a,"repeatedly",[e,t]),a.fromPoll(e,function(){return t[n++%t.length]}))},a.repeat=function(e){var t=0;return a.fromBinder(function(n){var r=!1,i=a.more,o=function(){};function s(e){return e.isEnd()?r?l():r=!0:i=n(e)}function l(){var l;for(r=!0;r&&i!==a.noMore;)l=e(t++),r=!1,l?o=l.subscribeInternal(s):n(X());return r=!0}return l(),function(){return o()}})},a.retry=function(e){if(!_.isFunction(e.source))throw new s("'source' option has to be a function");var t=e.source,n=e.retries||0,r=0,i=e.delay||function(){return 0},o=e.isRetryable||function(){return!0},l=!1,u=null;return E(new a.Desc(a,"retry",[e]),a.repeat(function(e){function s(){return t(e).endOnError().withHandler(function(e){return e.isError()?o((u=e).error)&&(0===n||r<n)?void 0:(l=!0,this.push(e)):(e.hasValue()&&(u=null,l=!0),this.push(e))})}if(l)return null;if(u){var c={error:u.error,retriesDone:r},h=a.later(i(c)).filter(!1);return r++,h.concat(a.once().flatMap(s))}return s()}))},a.sequentially=function(e,t){var n=0;return E(new a.Desc(a,"sequentially",[e,t]),a.fromPoll(e,function(){var e=t[n++];return n<t.length?e:n===t.length?[e,X()]:X()}))},a.Observable.prototype.skip=function(e){return E(new a.Desc(this,"skip",[e]),this.withHandler(function(t){return t.hasValue()&&e>0?(e--,a.more):this.push(t)}))},a.EventStream.prototype.skipUntil=function(e){var t=e.take(1).map(!0).toProperty(!1);return E(new a.Desc(this,"skipUntil",[e]),this.filter(t))},a.EventStream.prototype.skipWhile=function(e){h(e);for(var t=!1,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(this,e,r,function(e){return E(new a.Desc(this,"skipWhile",[e]),this.withHandler(function(n){return!t&&n.hasValue()&&e(n.value())?a.more:(n.hasValue()&&(t=!0),this.push(n))}))})},a.Observable.prototype.slidingWindow=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return E(new a.Desc(this,"slidingWindow",[e,t]),this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))};var _e=[];J=function(e){if(_e.length&&!J.running)try{J.running=!0,_e.forEach(function(t){t(e)})}finally{delete J.running}};function be(e){this.observable=e}a.spy=function(e){return _e.push(e)},a.Property.prototype.startWith=function(e){return E(new a.Desc(this,"startWith",[e]),this.scan(e,function(e,t){return t}))},a.EventStream.prototype.startWith=function(e){return E(new a.Desc(this,"startWith",[e]),a.once(e).concat(this))},a.Observable.prototype.takeWhile=function(e){h(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(this,e,n,function(e){return E(new a.Desc(this,"takeWhile",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):(this.push(X()),a.noMore)}))})},a.Observable.prototype.throttle=function(e){return this.delayChanges(new a.Desc(this,"throttle",[e]),function(t){return t.bufferWithTime(e).map(function(e){return e[e.length-1]})})},Z.prototype.firstToPromise=function(e){var t=this;if("function"!==typeof e){if("function"!==typeof Promise)throw new s("There isn't default Promise, use shim or parameter");e=Promise}return new e(function(e,n){return t.subscribe(function(t){return t.hasValue()&&e(t.value()),t.isError()&&n(t.error),a.noMore})})},Z.prototype.toPromise=function(e){return this.last().firstToPromise(e)},a.try=function(e){return function(t){try{return a.once(e(t))}catch(n){return new a.Error(n)}}},a.update=function(e){function t(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return e.apply(void 0,[t].concat(n))}}}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=r.length-1;o>0;)r[o]instanceof Function||(r[o]=_.always(r[o])),r[o]=t(r[o]),o-=2;return E(new a.Desc(a,"update",[e].concat(r)),a.when.apply(a,r).scan(e,function(e,t){return t(e)}))},a.zipAsArray=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=se(t);return E(new a.Desc(a,"zipAsArray",r),a.zipWith(r,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}))},a.zipWith=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=le(t),i=r[0],o=r[1];return i=_.map(function(e){return e.toEventStream()},i),E(new a.Desc(a,"zipWith",[o].concat(i)),a.when(i,o))},a.Observable.prototype.zip=function(e,t){return E(new a.Desc(this,"zip",[e]),a.zipWith([this,e],t||Array))},be.prototype.subscribe=function(e,t,n){var r="function"===typeof e?{next:e,error:t,complete:n}:e,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe(function(e){e.isError()?(r.error&&r.error(e.error),i.unsubscribe()):e.isEnd()?(i.closed=!0,r.complete&&r.complete()):r.next&&r.next(e.value())});return i},be.prototype[m("observable")]=function(){return this},a.Observable.prototype.toESObservable=function(){return new be(this)},a.Observable.prototype[m("observable")]=a.Observable.prototype.toESObservable,a.fromESObservable=function(e){var t;t=e[m("observable")]?e[m("observable")]():e;var n=new a.Desc(a,"fromESObservable",[t]);return new a.EventStream(n,function(e){var n=t.subscribe({error:function(){e(new a.Error),e(new a.End)},next:function(t){e(new a.Next(t,!0))},complete:function(){e(new a.End)}});return n.unsubscribe?function(){n.unsubscribe()}:n})},null!==n(52)&&null!=n(53)?(void 0===(i=function(){return a}.apply(t,[]))||(r.exports=i),"undefined"!==typeof this&&null!==this&&(this.Bacon=a)):null!==r&&null!=r.exports?(r.exports=a,a.Bacon=a):this.Bacon=a}).call(this)}).call(this,n(33),n(51)(e))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}n.d(t,"a",function(){return i})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(85),i=n(86),o=n(87);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){var r=n(15),i=n(16),o=n(30),a=(n(23),n(26),function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";r(this,e),this.element=1===t.length?t.toUpperCase():t,this.drawExplicit=!1,this.ringbonds=Array(),this.rings=Array(),this.bondType=n,this.branchBond=null,this.isBridge=!1,this.isBridgeNode=!1,this.originalRings=Array(),this.bridgedRing=null,this.anchoredRings=Array(),this.bracket=null,this.plane=0,this.attachedPseudoElements={},this.hasAttachedPseudoElements=!1,this.isDrawn=!0,this.isConnectedToRing=!1,this.neighbouringElements=Array(),this.isPartOfAromaticRing=t!==this.element,this.bondCount=0,this.chirality="",this.isStereoCenter=!1,this.priority=0,this.mainChain=!1,this.hydrogenDirection="down",this.subtreeDepth=1,this.hasHydrogen=!1}return i(e,[{key:"addNeighbouringElement",value:function(e){this.neighbouringElements.push(e)}},{key:"attachPseudoElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;null===n&&(n=0),null===r&&(r=0);var i=n+e+r;this.attachedPseudoElements[i]?this.attachedPseudoElements[i].count+=1:this.attachedPseudoElements[i]={element:e,count:1,hydrogenCount:n,previousElement:t,charge:r},this.hasAttachedPseudoElements=!0}},{key:"getAttachedPseudoElements",value:function(){var e={},t=this;return Object.keys(this.attachedPseudoElements).sort().forEach(function(n){e[n]=t.attachedPseudoElements[n]}),e}},{key:"getAttachedPseudoElementsCount",value:function(){return Object.keys(this.attachedPseudoElements).length}},{key:"isHeteroAtom",value:function(){return"C"!==this.element&&"H"!==this.element}},{key:"addAnchoredRing",value:function(e){o.contains(this.anchoredRings,{value:e})||this.anchoredRings.push(e)}},{key:"getRingbondCount",value:function(){return this.ringbonds.length}},{key:"backupRings",value:function(){this.originalRings=Array(this.rings.length);for(var e=0;e<this.rings.length;e++)this.originalRings[e]=this.rings[e]}},{key:"restoreRings",value:function(){this.rings=Array(this.originalRings.length);for(var e=0;e<this.originalRings.length;e++)this.rings[e]=this.originalRings[e]}},{key:"haveCommonRingbond",value:function(e,t){for(var n=0;n<e.ringbonds.length;n++)for(var r=0;r<t.ringbonds.length;r++)if(e.ringbonds[n].id==t.ringbonds[r].id)return!0;return!1}},{key:"neighbouringElementsEqual",value:function(e){if(e.length!==this.neighbouringElements.length)return!1;e.sort(),this.neighbouringElements.sort();for(var t=0;t<this.neighbouringElements.length;t++)if(e[t]!==this.neighbouringElements[t])return!1;return!0}},{key:"getAtomicNumber",value:function(){return e.atomicNumbers[this.element]}},{key:"getMaxBonds",value:function(){return e.maxBonds[this.element]}}],[{key:"maxBonds",get:function(){return{H:1,C:4,N:3,O:2,P:3,S:2,B:3,F:1,I:1,Cl:1,Br:1}}},{key:"atomicNumbers",get:function(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}},{key:"mass",get:function(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}}]),e}());e.exports=a},function(e,t,n){var r=n(3).make_class();r.prototype={init:function(e,t,n){this.div=e,this.map=t,this.displacement=void 0===n?{x:0,y:0}:n,this.visible=!0,this.hide()},is_visible:function(){return this.visible},place:function(e){this.div.style("display",null);var t=this.map.zoom_container.window_translate,n=this.map.zoom_container.window_scale,r=this.map.get_size(),i=Math.max(20,Math.min(r.width-270,n*e.x+t.x-this.displacement.x)),o=Math.max(20,Math.min(r.height-40,n*e.y+t.y-this.displacement.y));this.div.style("position","absolute").style("display","block").style("left",i+"px").style("top",o+"px"),this.visible=!0},hide:function(){this.visible&&(this.div.style("display","none"),this.visible=!1)}},e.exports=r},function(e,t,n){var r=n(3),i=n(24),o=r.make_class();o.from_cobra_json=function(e){if(!e.reactions||!e.metabolites)throw new Error("Bad model data.");for(var t={},n=0,a=e.genes.length;n<a;n++){var s=e.genes[n],l=s.id;t[l]=s}var u=new o;u.reactions={};for(var n=0,a=e.reactions.length;n<a;n++){var s=e.reactions[n],l=s.id,c=r.clone(s);if(delete c.id,c.bigg_id=l,c.data_string="",c.genes=[],c.reversibility=c.lower_bound<0&&c.upper_bound>0,c.upper_bound<=0&&c.lower_bound<0)for(var h in c.metabolites)c.metabolites[h]=-c.metabolites[h];if(delete c.lower_bound,delete c.upper_bound,"gene_reaction_rule"in c){var d=i.genes_for_gene_reaction_rule(c.gene_reaction_rule);d.forEach(function(e){if(e in t){var n=r.clone(t[e]);n.bigg_id=n.id,delete n.id,c.genes.push(n)}else console.warn("Could not find gene for gene_id "+e)})}u.reactions[l]=c}u.metabolites={};for(var n=0,a=e.metabolites.length;n<a;n++){var s=e.metabolites[n],l=s.id,f=r.clone(s);delete f.id,f.bigg_id=l,u.metabolites[l]=f}return u},o.build_reaction_string=function(e,t){var n=function(e){return 1==e?"":String(e)+" "},r=[],i=[];for(var o in e){var a=e[o];a>0?i.push(n(a)+o):r.push(n(Math.abs(a))+o)}var s=r.join(" + ");s+=t?" \u2194 ":" \u2192 ";return s+=i.join(" + ")},o.prototype={init:function(){this.reactions={},this.metabolites={}},apply_reaction_data:function(e,t,n){i.apply_reaction_data_to_reactions(this.reactions,e,t,n)},apply_metabolite_data:function(e,t,n){i.apply_metabolite_data_to_nodes(this.metabolites,e,t,n)},apply_gene_data:function(e,t,n,r,o){i.apply_gene_data_to_reactions(this.reactions,e,t,n,r,o)}},e.exports=o},function(e,t,n){var r=n(3),i=n(14);function o(e,t,n,r,i,o){var a=18*i.length,s=t-(t>o)-n/2>=-1;return Math.abs(e)<Math.PI/7?r||s?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:Math.abs(e-Math.PI)<Math.PI/7?r||!s?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:r?{x:25-38*Math.abs(Math.abs(e)-Math.PI/2),y:(Math.abs(e)-Math.PI/2)*(2*(e>0)-1)*50}:e<0&&s||e>0&&!s?{x:15,y:0}:{x:.5*-a,y:30}}function a(e,t,n,i,o){var a=function(e){return null===e?null:r.rotate_coords(e,i,o)},l=[],u=[];for(var c in e){var d=e[c],f=a({x:d.x,y:d.y}),p=s(d,t,f);d.connected_segments.map(function(e){var i=t[e.reaction_id];if(void 0!==i){var o=e.segment_id,s=i.segments[o];if(s.to_node_id==c&&s.b2){var l=a(s.b2),u=h(o,"b2");s.b2=r.c_plus_c(s.b2,l),n[u].x=s.b2.x,n[u].y=s.b2.y}else if(s.from_node_id==c&&s.b1){l=a(s.b1),u=h(o,"b1");s.b1=r.c_plus_c(s.b1,l),n[u].x=s.b1.x,n[u].y=s.b1.y}}}),u=r.unique_concat([u,p.reaction_ids]),l.push(c)}return{node_ids:l,reaction_ids:u}}function s(e,t,n){e.x=e.x+n.x,e.y=e.y+n.y,e.label_x=e.label_x+n.x,e.label_y=e.label_y+n.y;var r=[];return e.connected_segments.map(function(i){var o=t[i.reaction_id];r.indexOf(i.reaction_id)<0&&(r.push(i.reaction_id),"midmarker"==e.node_type&&(o.label_x=o.label_x+n.x,o.label_y=o.label_y+n.y))}),{reaction_ids:r}}function l(e,t,n){var r=Math.floor(n/2);return e*(t-r+(t>=r))}function u(e,t,n,r){var i=Math.floor(r/2);return t+Math.abs(n-i+(n>=i))*e}function c(e,t,n,i,o,a){var s=n[0];n=[r.c_minus_c(n[0],s),r.c_minus_c(n[1],s)],i=r.c_minus_c(i,s);var c,h,d=e.count-1;e.is_primary?c=20:(c=10,h=e.index>t?e.index-1:e.index);var f,p,g,v,m=[{x:c,y:0},{x:o-c,y:0}];return e.coefficient<0!==a&&e.is_primary?(f={x:m[0].x,y:m[0].y},g={x:.6*i.x+.4*m[0].x,y:.6*i.y+.4*m[0].y},v={x:.25*i.x+.75*f.x,y:.25*i.y+.75*f.y},p={x:n[0].x,y:n[0].y}):e.coefficient<0!==a?(f={x:m[0].x+u(20,50,h,d),y:m[0].y+l(24,h,d)},g={x:.6*i.x+.4*m[0].x,y:.6*i.y+.4*m[0].y},v={x:.25*i.x+.75*f.x,y:.25*i.y+.75*f.y},p={x:n[0].x+u(20,50,h,d),y:n[0].y+l(80,h,d)}):e.coefficient>0!==a&&e.is_primary?(f={x:m[1].x,y:m[1].y},g={x:.6*i.x+.4*m[1].x,y:.6*i.y+.4*m[1].y},v={x:.25*i.x+.75*f.x,y:.25*i.y+.75*f.y},p={x:n[1].x,y:n[1].y}):e.coefficient>0!==a&&(f={x:m[1].x-u(20,50,h,d),y:m[1].y+l(24,h,d)},g={x:.6*i.x+.4*m[1].x,y:.6*i.y+.4*m[1].y},v={x:.25*i.x+.75*f.x,y:.25*i.y+.75*f.y},p={x:n[1].x-u(20,50,h,d),y:n[1].y+l(80,h,d)}),{b1:r.c_plus_c(s,g),b2:r.c_plus_c(s,v),circle:r.c_plus_c(s,p)}}function h(e,t){return e+"_"+t}function d(e,t){var n={};for(var r in e){var i=e[r];["b1","b2"].forEach(function(e){var o=i[e];if(null!==o){var a=h(r,e);n[a]={bezier:e,x:o.x,y:o.y,reaction_id:t,segment_id:r}}})}return n}function f(e){var t={};for(var n in e){var i=d(e[n].segments,n);r.extend(t,i)}return t}e.exports={get_met_label_loc:o,new_reaction:function(e,t,n,i,s,l,u,h){h=r.to_radians_norm(h);var d=String(++l.reactions),p={x:s.x,y:s.y},g=[p,r.c_plus_c(p,{x:350,y:0})],v={x:(g[0].x+g[1].x)/2,y:(g[0].y+g[1].y)/2},m=function(e){if(Math.abs(e)>Math.PI)throw new Error("Angle must be between -PI and PI");return Math.abs(e)<Math.PI/7||Math.abs(e-Math.PI)<Math.PI/7?{x:-50,y:-40}:e>0?{x:15*(1-Math.abs(e-Math.PI/2)/(Math.PI/2)),y:10+50*(e-Math.PI/2)}:{x:15*(1-Math.abs(e+Math.PI/2)/(Math.PI/2)),y:10-50*(Math.abs(e)-Math.PI/2)}}(h),_={name:t.name,bigg_id:t.bigg_id,reversibility:t.reversibility,gene_reaction_rule:t.gene_reaction_rule,genes:r.clone(t.genes),metabolites:r.clone(t.metabolites)};r.extend(_,{label_x:v.x+m.x,label_y:v.y+m.y,segments:{}});var b=[],y=[],w=0,x=0,k=!1;for(var S in _.metabolites){var C=n[S],E=_.metabolites[S],T=C.formula,P={coefficient:E,bigg_id:S,name:C.name};if(E<0){P.index=w;var A=/C([0-9]+)/.exec(T);s.bigg_id===P.bigg_id?b.push([P.index,1/0]):A&&-1===u.indexOf(r.decompartmentalize(P.bigg_id)[0])&&b.push([P.index,parseInt(A[1])]),w++}else{P.index=x;var A=/C([0-9]+)/.exec(T);s.bigg_id===P.bigg_id?(y.push([P.index,1/0]),k=!0):A&&-1===u.indexOf(r.decompartmentalize(P.bigg_id)[0])&&y.push([P.index,parseInt(A[1])]),x++}_.metabolites[S]=P}var O=function(e,t){return t[1]>e[1]?t:e},z=b.reduce(O,[0,0])[0],N=y.reduce(O,[0,0])[0];for(var S in _.metabolites){var C=_.metabolites[S];C.coefficient<0?(C.is_primary=C.index===z,C.count=w):(C.is_primary=C.index===N,C.count=x)}var M={},R={};[{node_type:"anchor_reactants",dis:{x:20*(k?1:-1),y:0}},{node_type:"center",dis:{x:0,y:0}},{node_type:"anchor_products",dis:{x:20*(k?-1:1),y:0}}].map(function(e){var t=String(++l.nodes),n="center"===e.node_type?"midmarker":"multimarker";M[t]={node_type:n,x:v.x+e.dis.x,y:v.y+e.dis.y,connected_segments:[],name:null,bigg_id:null,label_x:null,label_y:null,node_is_primary:null,data:null},R[e.node_type]=t}),[[R.anchor_reactants,R.center,"reactants"],[R.anchor_products,R.center,"products"]].map(function(e){var t=e[0],n=e[1],r=String(++l.segments),i=0===w&&"reactants"===e[2]&&_.reversibility||0===x&&"products"===e[2];_.segments[r]={b1:null,b2:null,from_node_id:t,to_node_id:n,from_node_coefficient:null,to_node_coefficient:null,reversibility:_.reversibility,data:_.data,reverse_flux:_.reverse_flux,unconnected_segment_with_arrow:i},M[t].connected_segments.push({segment_id:r,reaction_id:d}),M[n].connected_segments.push({segment_id:r,reaction_id:d})});var D=M;for(var S in _.metabolites){var I,j,C=_.metabolites[S];C.coefficient<0?(I=z,j=R.anchor_reactants):(I=N,j=R.anchor_products);var F=c(C,I,g,v,350,k);if(s.bigg_id===C.bigg_id){var L=String(++l.segments);_.segments[L]={b1:F.b1,b2:F.b2,from_node_id:j,to_node_id:i,from_node_coefficient:null,to_node_coefficient:C.coefficient,reversibility:_.reversibility},s.connected_segments.push({segment_id:L,reaction_id:d}),D[j].connected_segments.push({segment_id:L,reaction_id:d})}else{var L=String(++l.segments),B=String(++l.nodes);_.segments[L]={b1:F.b1,b2:F.b2,from_node_id:j,to_node_id:B,from_node_coefficient:null,to_node_coefficient:C.coefficient,reversibility:_.reversibility};var U=o(h,C.index,C.count,C.is_primary,C.bigg_id,I);D[B]={connected_segments:[{segment_id:L,reaction_id:d}],x:F.circle.x,y:F.circle.y,node_is_primary:C.is_primary,label_x:F.circle.x+U.x,label_y:F.circle.y+U.y,name:C.name,bigg_id:C.bigg_id,node_type:"metabolite"},D[j].connected_segments.push({segment_id:L,reaction_id:d})}}var W=[];for(var e in _.metabolites)W.push({bigg_id:e,coefficient:_.metabolites[e].coefficient});_.metabolites=W;var V={};V[d]=_;var H=f(V);return D[i]=s,a(D,V,H,h,p),{new_reactions:V,new_beziers:H,new_nodes:D}},rotate_nodes:a,move_node_and_dependents:function(e,t,n,o,a){var l=s(e,n,a);return e.connected_segments.map(function(e){var s=n[e.reaction_id];if(!i.isUndefined(s)){var u=e.segment_id,c=s.segments[u];[["b1","from_node_id"],["b2","to_node_id"]].forEach(function(e){var n=e[0],i=e[1];if(c[i]===t&&c[n]){c[n]=r.c_plus_c(c[n],a);var s=o[h(u,n)];s.x=c[n].x,s.y=c[n].y}}),l.reaction_ids.indexOf(e.reaction_id)<0&&l.reaction_ids.push(e.reaction_id)}}),l},new_text_label:function(e,t,n){var r=String(++e.text_labels),i={text:t,x:n.x,y:n.y};return{id:r,label:i}},bezier_id_for_segment_id:h,bezier_ids_for_reaction_ids:function(e){var t=[];for(var n in e){var r=e[n];for(var i in r.segments){var o=r.segments[i];["b1","b2"].forEach(function(e){var n=o[e];null!==n&&t.push(h(i,e))})}}return t},new_beziers_for_segments:d,new_beziers_for_reactions:f}},function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.tail=_,t.head=b,t.fromPairs=y,t.get=w,t.isUndefined=x,t.isObject=k,t.isArray=S,t.isString=C,t.isNumber=function(e){return"number"===typeof e},t.isBoolean=E,t.isFunction=T,t.notNull=P,t.mapValues=A,t.reduceValues=O,t.zipArrays=z,t.zipObjects=N,t.filterValues=M,t.any=R,t.tagType=I,t.checkType=j,t.match=F,t.hasChildren=B,t.checkRenderResult=U,t.updateEl=W,t.addressWith=H,t.addressEqual=q,t.makeTree=$,t.checkState=K,t.diffWithModelMin=G,t.makeSignal=Q,t.makeOneSignalAPI=J,t.makeChildSignalsAPI=ee,t.reduceChildren=te,t.mergeSignals=ne,t.objectOf=re,t.arrayOf=ie,t.createComponent=ae,t.patchMethods=ue,t.makeCallMethod=ce,t.makeCallReducer=he,t.makeStateCallers=de,t.run=fe,t.addressToObj=we,t.objectForBindings=xe,t.createElement=Ce,t.bind=Ee,t.createDOMElement=Pe,t.getStyles=Ae,t.updateDOMElement=ze,t.render=Ne;var o=t.ARRAY_OF="@TINIER_ARRAY_OF",a=t.OBJECT_OF="@TINIER_OBJECT_OF",s=t.COMPONENT="@TINIER_COMPONENT",l=t.ARRAY="@TINIER_ARRAY",u=t.OBJECT="@TINIER_OBJECT",c=t.NODE="@TINIER_NODE",h=t.NULL="@TINIER_NULL",d=(t.STRING="@TINIER_STRING",t.NUMBER="@TINIER_NUMBER",t.BOOLEAN="@TINIER_BOOLEAN",t.ANY="@TINIER_ANY",t.NO_ARGUMENT="@TINIER_NO_ARGUMENT",t.TOP="@TINIER_TOP",t.CREATE="@TINIER_CREATE"),f=t.UPDATE="@TINIER_UPDATE",p=t.DESTROY="@TINIER_DESTROY";function g(){}function v(e){return function(){return e}}function m(e){return e[e.length-1]}function _(e){return[e.slice(0,-1),m(e)]}function b(e){return[e[0],e.slice(1)]}function y(e){return e.reduce(function(e,t){var n,r=t[0],o=t[1];return i({},e,((n={})[r]=o,n))},{})}function w(e,t){return e&&"string"!==typeof e&&e.hasOwnProperty(t)?e[t]:null}function x(e){return"undefined"===typeof e}function k(e){return null!=e&&"object"===("undefined"===typeof e?"undefined":r(e))}function S(e){return Array.isArray(e)}function C(e){return"string"===typeof e}function E(e){return"boolean"===typeof e}function T(e){return"function"===typeof e}function P(e){return null!==e}function A(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function O(e,t,n){var r=n;for(var i in e)r=t(r,e[i],i);return r}function z(e){for(var t=Math.max.apply(null,e.filter(function(e){return null!==e}).map(function(e){return e.length})),n=[],r=function(t){n.push(e.map(function(e){return null!==e&&t<e.length?e[t]:null}))},i=0;i<t;i++)r(i);return n}function N(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];if(null!==i)for(var o in i)n[o]=!0}var a={};for(var s in n){a[s]=Array(t);for(var l=0;l<t;l++){var u=e[l];a[s][l]=w(u,s)}}return a}function M(e,t){var n={};for(var r in e){var i=e[r];t(i,r)&&(n[r]=i)}return n}function R(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(!E(r))throw new Error("Not a boolean: "+r);if(r)return!0}return!1}function D(e){setTimeout(e,1)}function I(e,t){if(!C(e))throw new Error("First argument must be a string");if(!k(t))throw new Error("Second argument must be an object");return t.type=e,t}function j(e,t){if(null===t)return e===h;if("string"!==typeof e)throw new Error("First argument must be a string");if(x(t))throw new Error("Bad second argument");return w(t,"type")===e}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;for(var r in t)if(r===h&&null===e||r===l&&S(e)||k(e)&&j(r,e))return t[r](e);return u in t&&k(e)?t[u](e):n(e)}function L(e){throw new Error("Unrecognized type in pattern matching: "+e)}function B(e){var t;return F(e,((t={})[o]=function(){return!0},t[a]=function(){return!0},t[s]=function(){return!0},t[l]=function(e){return R(e.map(B))},t[u]=function(e){return R(Object.keys(e).map(function(t){return B(e[t])}))},t))}function U(e,t,n){return function e(t,n,r){var i,c=function(e,r){var i=null===r?t:w(t,r);if(null!==t&&null===i)throw new Error("Shape of the bindings object does not match the model.Model: "+n+"  Bindings object: "+t)},h=function(n,i){e(w(t,i),n,w(r,i))};F(n,((i={})[a]=function(e){if(null!==t&&R(Object.keys(t).map(function(e){return!(e in r)})))throw new Error("Shape of the bindings object does not match the model. Model: "+n+" Bindings object: "+t);A(r,c)},i[o]=function(e){if(null!==t&&r.length!==t.length)throw new Error("Shape of the bindings object does not match the model. Model: "+n+" Bindings object: "+t);r.map(c)},i[s]=function(e){return c(0,null)},i[l]=function(e){if(null!==t&&!S(t))throw new Error("Shape of the bindings object does not match the model. Model: "+n+" Bindings object: "+t);e.map(h)},i[u]=function(e){if(null!==t&&S(t))throw new Error("Shape of the bindings object does not match the model. Model: "+n+" Bindings object: "+t);A(e,h)},i))}(e,t,n),e}function W(e,t,n,r,i,o,a,s){var l=se(e,t,a.callReducer),u=le(e,t,a.callSignal),c={state:n,methods:ue(e,t,a.callMethod,l,u),reducers:l,signals:u,el:o,lastRenderedEl:i};if(null===o&&r!==p&&t.render!==g)throw new Error("No binding provided for component "+t.displayName+" at ["+e.join(", ")+"].");if(r===p)return t.willUnmount(c),{bindings:null,lastRenderedEl:i};var h=r===d||r===f||o!==i;r===d?t.willMount(c):h&&t.willUpdate(c),s.verbose&&h&&console.log("Rendering "+t.displayName+" at ["+e.join(", ")+"].");var v=h?U(t.render(c),t.model,n):null;if(h&&null===v&&B(t.model))throw new Error("The render function of component "+t.displayName+" did not return new bindings");return r===d?D(function(){return t.didMount(c)}):h&&D(function(){return t.didUpdate(c)}),{bindings:v,lastRenderedEl:h?o:i}}function V(e){var t;return F(e,((t={})[c]=function(e){return e.data},t[u]=function(e){return A(e,V)},t[l]=function(e){return e.map(V)},t[h]=function(){return null},t))}function H(e,t){if(null===t)return e;var n=e.slice(0);return n.push(t),n}function q(e,t){return null!==e&&null!==t&&e.length===t.length&&e.reduce(function(e,n,r){return e&&n===t[r]},!0)}function Y(e,t){return e.reduce(function(e,t){return j(c,e)?e.children[t]:e[t]},t)}function $(e,t){var n=e;return{get:function(e){return Y(e,n)},set:function(e,r){n=t?function(e,t,n){if(0===e.length)return n;var r=_(e),i=r[0],o=r[1],a=Y(i,t);return j(c,a)?a.children[o]=n:a[o]=n,t}(e,n,r):function e(t,n,r){if(0===t.length)return r;var o,a=b(t),s=a[0],l=a[1];return"string"===typeof s?i({},n,((o={})[s]=e(l,Y([s],n),r),o)):[].concat(n.slice(0,s),[e(l,Y([s],n),r)],n.slice(s+1))}(e,n,r)}}}function K(e,t){var n;null!==t&&F(e,((n={})[a]=function(n){if(!k(t)||S(t))throw new Error("Shape of the new state does not match the model. Model: "+n+"  State: "+t);A(t,function(t){return K(e.component.model,t)})},n[o]=function(n){if(!S(t))throw new Error("Shape of the new state does not match the model.Model: "+n+"  State: "+t);t.map(function(t){return K(e.component.model,t)})},n[s]=function(n){K(e.model,t)},n[l]=function(e){if(!S(t))throw new Error("Shape of the new state does not match the model.Model: "+e+"  State: "+t);e.map(function(e,n){return K(e,w(t,n))})},n[u]=function(e){if(!k(t)||S(t))throw new Error("Shape of the new state does not match the model. Model: "+e+"  State: "+t);A(e,function(e,n){return K(e,w(t,n))})},n))}function X(e,t,n,r,i,o,a){var s=r(e,n),l=r(t,n);if(s&&!l)return d;if(s&&l){var u=null===n?e!==t:e[n]!==t[n],c=q(o,a);return u&&i({state:e,lastState:t,componentTriggeredUpdate:c})?f:null}return!s&&l?p:null}function G(e,t,n,r,i){var h=function e(t,n,r,i,h){var d;return F(t,((d={})[a]=function(t){var o=function(e,t){return k(e)&&t in e&&null!==e[t]};return A(Object.assign({},n||{},r||{}),function(a,s){var l=X(n,r,s,o,t.component.shouldUpdate,H(i,s),h),u=e(t.component.model,w(n,s),w(r,s),H(i,s),h);return I(c,{data:l,children:u})})},d[o]=function(t){var o=function(e,t){return S(e)&&t<e.length&&null!==e[t]},a=Math.max(S(n)?n.length:0,S(r)?r.length:0);return Array.apply(null,{length:a}).map(function(a,s){var l=X(n,r,s,o,t.component.shouldUpdate,H(i,s),h),u=e(t.component.model,w(n,s),w(r,s),H(i,s),h);return I(c,{data:l,children:u})})},d[s]=function(t){var o=X(n,r,null,function(e,t){return null!==e},t.shouldUpdate,i,h),a=e(t.model,n||null,r||null,i,h);return I(c,{data:o,children:a})},d[l]=function(t){return t.map(function(t,o){return e(t,w(n,o),w(r,o),H(i,o),h)})},d[u]=function(t){return A(t,function(t,o){return e(t,w(n,o),w(r,o),H(i,o),h)})},d))}(e,t,n,r,i);return{minSignals:{diff:h,address:r,modelNode:e},minUpdate:{diff:h,address:r,modelNode:e}}}function Q(){var e={_onFns:[],on:function(t){if(!T(t))throw new Error('First argument to "on" must be a function');e._onFns=[].concat(e._onFns,[t])},call:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._onFns.map(function(e){return e.apply(void 0,n)})}};return e}function J(e){var t={_callFns:[],call:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length>1||!k(n[0]))throw new Error("Call only accepts a single object as argument.");t._callFns.map(function(e){return(0,e.fn)(n[0])})},_onFns:[]},n=e?"onEach":"on";return t[n]=function(e){if(!T(e))throw new Error('Argument to "'+n+'" must be a function');t._onFns.push(function(t){return function(){if(arguments.length>1||!k(arguments.length<=0?void 0:arguments[0]))throw new Error("On function only accepts a single object as argument.");var n="string"===typeof t?i({k:t},arguments.length<=0?void 0:arguments[0]):"number"===typeof t?i({i:t},arguments.length<=0?void 0:arguments[0]):arguments.length<=0?void 0:arguments[0];e(n)}})},t}function Z(e,t){return y(e.map(function(e){return[e,J(t)]}))}function ee(e){var t;return F(e,((t={})[a]=function(e){return Z(e.component.signalNames,!0)},t[o]=function(e){return Z(e.component.signalNames,!0)},t[s]=function(e){return Z(e.signalNames,!1)},t[l]=function(e){return e.map(ee).filter(P)},t[u]=function(e){return M(A(e,ee),P)},t),v(null))}function te(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return F(e,((r={})[c]=function(e){return t(n,e.data,i)},r[l]=function(e){return e.reduce(function(e,n,r){return te(n,t,e,H(i,r))},n)},r[u]=function(e){return O(e,function(e,n,r){return te(n,t,e,H(i,r))},n)},r),v(n))}function ne(e,t,n,i,h){var f,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,_=function(n,i){var o=n[0],a=n[1],s=null!==i?e.component:e,l=null!==i?H(t,i):t,u=o.data;if(u!==d){if(u===p)return null;var f=te(o.children,function(e,t,n){return{hasCreated:e.hasCreated||t===d,destroyed:t===p?[].concat(e.destroyed,[n]):e.destroyed}},{hasCreated:!1,destroyed:[]}),v=f.hasCreated;f.destroyed.map(function(e){A(e.reduce(function(t,n,r){if(n in t)return t[n];if(r===e.length-1)return t;throw new Error("Bad address "+e+" for object "+a.data.childSignalsAPI)},a.data.childSignalsAPI),function(t){t._callFns=t._callFns.filter(function(t){return!q(t.address,e)})})});var _=v?a.data.childSignalsAPI:null,b=v?[]:null,y=ne(s.model,l,o.children,w(a,"children"),h,_,b);return I(c,{data:w(a,"data"),children:y})}var x=function(){var e=function(e,t,n){var r=Z(e.signalNames,!1),i=ee(e.model),o=se(t,e,n.callReducer),a=le(t,e,n.callSignal),s=ue(t,e,n.callMethod,o,a);return e.signalSetup({methods:s,reducers:o,signals:r,childSignals:i}),{signalsAPI:r,childSignalsAPI:i}}(s,l,h),t=e.signalsAPI,n=e.childSignalsAPI,r=null===m?null:H(m,i),u={signals:A(N([t,g]),function(e,t){var n=e[0],o=e[1],a=Q();return n._onFns.map(function(e){return a.on(e())}),n._callFns=[{fn:a.call,address:null}],null!==o&&(o._onFns.map(function(e){return a.on(e(i))}),o._callFns=[].concat(o._callFns,[{fn:a.call,address:r}])),a}),signalsAPI:t,childSignalsAPI:n},d=ne(s.model,l,o.children,w(a,"children"),h,n,[]);return{v:I(c,{data:u,children:d})}}();if("object"===("undefined"===typeof x?"undefined":r(x)))return x.v},b=function(e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=H(t,n),l=null===m?null:H(m,n);return ne(r,s,i,o,h,a,l)};return F(e,((f={})[a]=function(e){return M(A(N([n,i]),_),P)},f[o]=function(e){return z([n,i]).map(_).filter(P)},f[s]=function(e){return _([n,i],null)},f[l]=function(e){return z([e,n,i,g]).map(b)},f[u]=function(e){return A(N([e,n,i,g]),b)},f),v(null))}function re(e){return I(a,{component:e})}function ie(e){return I(o,{component:e})}function oe(e){return e.state!==e.lastState}function ae(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={displayName:"",signalNames:[],signalSetup:g,model:{},init:v({}),reducers:{},methods:{},willMount:g,didMount:g,shouldUpdate:oe,willUpdate:g,didUpdate:g,willUnmount:g,render:g};if(function(e,t){A(e,function(e,n){n in t||console.error("Unexpected argument "+n)})}(t,n),"init"in t&&(t.init=(e=t.init,function(){if(0===arguments.length)return e({});if(arguments.length>1||!k(arguments.length<=0?void 0:arguments[0]))throw new Error("Reducers can only take 1 or 0 arguments, and the argument should be an object.");return e(arguments.length<=0?void 0:arguments[0])})),"reducers"in t&&(t.reducersRaw=t.reducers,t.reducers=A(t.reducers,function(e,t){return function(){if(1===arguments.length&&k(arguments.length<=0?void 0:arguments[0])){if("state"in(arguments.length<=0?void 0:arguments[0]))return e(arguments.length<=0?void 0:arguments[0]);throw new Error('The argument to the reducer must have a "state" attribute.')}throw new Error("Reducers can only take 1 arguments, and the argument should be an object.")}})),t.model&&j(s,t.model))throw new Error("The model cannot be another Component. The top level of the model should be an array or an object literal");return I(s,i({},n,t))}function se(e,t,n){return A(t.reducersRaw,function(r,i){return function(){if(0===arguments.length)n(e,t,r,{},i);else{if(arguments.length>1||!k(arguments.length<=0?void 0:arguments[0]))throw new Error("Reducers can only take 1 or 0 arguments, and the argument should be an object.");n(e,t,r,arguments.length<=0?void 0:arguments[0],i)}}})}function le(e,t,n){return y(t.signalNames.map(function(t){return[t,{call:function(r){return n(e,t,r)}}]}))}function ue(e,t,n,r,i){var o=A(t.methods,function(t){return function(a){"undefined"!==typeof Event&&a instanceof Event?n(e,t,i,o,r,this,a,{}):n(e,t,i,o,r,null,null,a)}});return o}function ce(e,t){return function(t,n,r,o,a,s,l,u){if(null===e.get([]))throw new Error("Cannot call method before the app is initialized (e.g. in signalSetup).");var c=e.get(t);n(i({state:c,signals:r,methods:o,reducers:a,target:s,event:l},u))}}function he(e,t,n,r,h,d){return function(f,p,g,v,m){if(!T(g))throw new Error("Reducer "+m+" is not a function");var _=t.get(f),b=g(i({},v,{state:_}));d.verbose&&(console.log("Called reducer "+m+" for "+p.displayName+" at ["+f.join(", ")+"]."),console.log(_),console.log(b)),K(p.model,b);var y=t.get([]);t.set(f,b);var x=G(e,t.get([]),y,[],f),k=x.minSignals,S=x.minUpdate,C=r.get(k.address),E=ne(k.modelNode,k.address,k.diff,C,h);r.set(k.address,E);var P=n.get(S.address),O=P.data,M=t.get(S.address),R=function e(t,n,r,i,h,d,f,p){var g,v=function(r,i){var o=r[0],a=r[1],s=null!==i?n.component:n,l=null!==i?H(t,i):t,u=null!==i?w(h,i):h,g=null!==i?w(d,i):d,v=W(l,s,a,o.data,w(u,"data"),g,f,p),m=null!==v.bindings?v.bindings:V(u.children),_=v.lastRenderedEl,b=e(l,s.model,a,o.children,w(u,"children"),m,f,p);return I(c,{data:_,children:b})},m=function(n,o){return e(H(t,o),n,w(r,o),i[o],w(h,o),w(d,o),f,p)};return F(n,((g={})[a]=function(e){return A(N([i,r]),v)},g[o]=function(e){return z([i,r]).map(v)},g[s]=function(e){return v([i,r],null)},g[l]=function(e){return e.map(m)},g[u]=function(e){return A(e,m)},g))}(S.address,S.modelNode,M,S.diff,P,O,h,d);n.set(S.address,R)}}function de(e,t,n,r,i){var o={};return o.callMethod=ce(t),o.callSignal=function(e,t){return function(n,r,i){t.verbose&&console.log("Called signal "+r+" at ["+n.join(", ")+"]."),e.get(n).data.signals[r].call(i)}}(r,i),o.callReducer=he(e,t,n,r,o,i),o}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$(null,!1),i=$(I(c,{data:t,children:null}),!0),o=$(null,!0),a=de(e,r,i,o,n),s="initialState"in n?n.initialState:e.init(),l=function(e){return e.newState},u=function(t){return a.callReducer([],e,l,{newState:t},"setState")};u(s);var h=se([],e,a.callReducer),d=le([],e,a.callSignal);return{setState:u,setStateNoRender:function(e){return r.set([],e)},getState:function(){return r.get([])},reducers:h,methods:ue([],e,a.callMethod,h,d),signals:w(o.get([]).data,"signals")}}var pe=t.BINDING="@TINIER_BINDING",ge=t.ELEMENT="@TINIER_ELEMENT",ve="@TINIER_LISTENERS";var me={},_e=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(me),be={checked:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("input"!==t)throw new Error('"checked" attribute is only supported on input elements.');e.checked=n},value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(-1===["input","textarea"].indexOf(t))throw new Error('"value" attribute is only supported on input and textarea elements.');e.value=n}},ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function we(e,t){if(x(e[0]))return t;var n,r=e[0];if(C(r))return(n={})[r]=we(e.slice(1),t),n;var i=Array(r+1);return i[r]=we(e.slice(1),t),i}function xe(e){return S(e[0])?function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if(!S(i))throw Error("Incompatible bindings: mix of types");var o=i.length;o>t&&(t=o)}for(var a=[],s=0;s<t;s++)for(var l=0,u=e.length;l<u;l++){var c=e[l];null!=c[s]&&(null!=a[s]?a[s]=xe([c[s],a[s]]):a[s]=c[s])}return a}(e):function(e){return e.reduce(function(e,t){if(S(t))throw Error("Incompatible bindings: mix of types");for(var n in t)t[n]&&(e[n]?e[n]=xe([t[n],e[n]]):e[n]=t[n]);return e},{})}(e)}var ke=function(e){return j(pe,e)},Se=function(e){return j(ge,e)};function Ce(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return I(ge,{tagName:e,attributes:null==t?{}:t,children:r})}function Ee(e){var t=S(e)?e:[e];return I(pe,{address:t})}function Te(e){var t=e.indexOf(":");if(-1!==t){var n=e.slice(0,t);return n in ye?{name:"xmlns"===n?e:e.slice(t+1),explicit:ye[n]}:{name:e,explicit:null}}return{name:e,explicit:null}}function Pe(e,t){var n=e.tagName,r=Te(n),i=r.name,o=r.explicit,a=null!==o?o:n in ye?ye[n]:t.namespaceURI;return ze(a===ye.xhtml?document.createElement(i):document.createElementNS(a,i),e)}function Ae(e){for(var t=/([^:; ]+):/g,n=[],r=void 0;null!==(r=t.exec(e));)n.push(r[1]);return n}function Oe(e,t,n,r){var i=!0===r?n:r;e===ye.xhtml?t.setAttribute(n,i):t.setAttributeNS(e,n,i)}function ze(e,t){var n=null,r=e.namespaceURI;e.hasOwnProperty(ve)&&(A(e[ve],function(t,n){e.removeEventListener(n,t)}),delete e[ve]),A(t.attributes,function(i,o){if("id"===o)e.id=i;else if("style"!==o||C(i))if(0===o.indexOf("on")){if(e.hasOwnProperty(ve)||(e[ve]={}),null!==i){var a=function(e){return e.slice(2).toLowerCase()}(o);if(!T(i)&&null!==i)throw new Error(i+" is not a function.");e[ve][a]=i,e.addEventListener(a,i)}}else if(o in me){var s=Te(o),l=(s.name,s.explicit);Oe(null!==l?l:r,e,me[l],i)}else if(o in be)be[o](e,t.tagName,i);else if("then"===o){if(null!==i){if(!T(i))throw new Error(i+" is not a function or null.");n=i}}else{var u=Te(o),c=u.name,h=u.explicit;Oe(null!==h?h:r,e,c,i)}else A(i,function(t,n){e.style.setProperty(n,t)})});for(var i=[],o=0,a=e.attributes.length;o<a;o++)i.push(e.attributes[o].name);i.filter(function(e){return!(e in t.attributes)||!1===t.attributes[e]}).map(function(n){n in _e?e.removeAttribute(_e[n]):n in be?be[n](e,t.tagName):e.removeAttribute(n)});var s=t.attributes.style;return s&&!C(s)&&Ae(e.style.cssText).filter(function(e){return!(e in s||(t=e,t.replace(/-(.)/g,function(e){return e.toUpperCase()}).replace(/-/g,"")in s));var t}).map(function(t){return e.style.removeProperty(t)}),n&&D(function(){return n(e)}),e}function Ne(e){if(!(t=e)||"object"!==("undefined"===typeof t?"undefined":r(t))||null===t||1!==t.nodeType||"string"!==typeof t.nodeName)throw new Error("First argument must be a DOM Element.");for(var t,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=i.reduce(function(e,t){return S(t)?[].concat(e,t):[].concat(e,[t])},[]).filter(P),s=w(a,0);if(ke(s)){if(1!==a.length)throw new Error("A binding cannot have siblings in TinierDOM. At binding: [ "+s.address.join(", ")+" ].");return xe([we(s.address,e)])}var l=function(e,t){var n={};return e.map(function(e){return n[e[t]]=e}),n}(Array.from(e.children).filter(function(e){return e.id}),"id"),u=a.map(function(t,n){if(x(t))throw new Error("Children in Tinier Elements cannot be undefined.");if(Se(t)){var i=e.childNodes[n];if(t.attributes.id in l){var o=l[t.attributes.id];return i?e.replaceChild(o,i):e.appendChild(o),Ne.apply(void 0,[o].concat(t.children))}if(i){if(i.tagName&&i.tagName.toLowerCase()===t.tagName.toLowerCase()){var a=i.id?i.cloneNode(!0):i;return ze(a,t),i.id&&e.replaceChild(a,i),Ne.apply(void 0,[a].concat(t.children))}var s=Pe(t,e);return e.replaceChild(s,i),Ne.apply(void 0,[s].concat(t.children))}var u=Pe(t,e);return e.appendChild(u),Ne.apply(void 0,[u].concat(t.children))}if(ke(t))throw new Error("A binding cannot have siblings in TinierDOM. At binding: [ "+t.address.join(", ")+" ].");var c,h=e.childNodes[n],d=String(t);return(c=h)&&"object"===("undefined"===typeof c?"undefined":r(c))&&null!==c&&3===c.nodeType&&"string"===typeof c.nodeName?h.textContent=d:h?e.replaceChild(document.createTextNode(d),h):e.appendChild(document.createTextNode(d)),null});return function(e,t){for(var n=e.childNodes.length-1;n>=t;n--)e.removeChild(e.childNodes[n])}(e,a.length),xe(u.filter(function(e){return null!==e}))}t.default={arrayOf:ie,objectOf:re,createComponent:ae,run:fe,bind:Ee,createElement:Ce,render:Ne}},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},i=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=(o.left,a);var l=function(e){return null===e?NaN:+e},u=Array.prototype,c=(u.slice,u.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}),h=Math.sqrt(50),d=Math.sqrt(10),f=Math.sqrt(2),p=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=g(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function g(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=h?10:o>=d?5:o>=f?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=h?10:o>=d?5:o>=f?2:1)}function v(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=h?i*=10:o>=d?i*=5:o>=f&&(i*=2),t<e?-i:i}var m=function(e,t,n){if(null==n&&(n=l),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}};var _=n(28),b=Array.prototype,y=b.map,w=b.slice,x={name:"implicit"};function k(e){var t=Object(_.a)(),n=[],r=x;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==x)return r;t.set(o,a=n.push(i))}return e[(a-1)%e.length]}return e=null==e?[]:w.call(e),i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=Object(_.a)();for(var r,o,a=-1,s=e.length;++a<s;)t.has(o=(r=e[a])+"")||t.set(o,n.push(r));return i},i.range=function(t){return arguments.length?(e=w.call(t),i):e.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return k().domain(n).range(e).unknown(r)},i}function S(){var e,t,n=k().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,l=0,u=.5;function h(){var n=r().length,h=o[1]<o[0],d=o[h-0],f=o[1-h];e=(f-d)/Math.max(1,n-s+2*l),a&&(e=Math.floor(e)),d+=(f-d-e*(n-s))*u,t=e*(1-s),a&&(d=Math.round(d),t=Math.round(t));var p=c(n).map(function(t){return d+e*t});return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],h()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,h()):a},n.padding=function(e){return arguments.length?(s=l=Math.max(0,Math.min(1,e)),h()):s},n.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),h()):s},n.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),h()):l},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return S().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(l).align(u)},h()}function C(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(S().paddingInner(1))}var E=n(7),T=function(e){return function(){return e}},P=function(e){return+e},A=[0,1];function O(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:T(t)}function z(e,t,n,r){var i=e[0],o=e[1],a=t[0],s=t[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(e){return a(i(e))}}function N(e,t,n,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),a=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)o[l]=n(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(t){var n=s(e,t,1,i)-1;return a[n](o[n](t))}}function M(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function R(e,t){var n,r,i,o=A,a=A,s=E.a,l=!1;function u(){return n=Math.min(o.length,a.length)>2?N:z,r=i=null,c}function c(t){return(r||(r=n(o,a,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,s)))(+t)}return c.invert=function(e){return(i||(i=n(a,o,O,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},c.domain=function(e){return arguments.length?(o=y.call(e,P),u()):o.slice()},c.range=function(e){return arguments.length?(a=w.call(e),u()):a.slice()},c.rangeRound=function(e){return a=w.call(e),s=E.e,u()},c.clamp=function(e){return arguments.length?(l=!!e,u()):l},c.interpolate=function(e){return arguments.length?(s=e,u()):s},u()}var D=n(17),I=function(e,t,n){var r,i=e[0],o=e[e.length-1],a=v(i,o,null==t?10:t);switch((n=Object(D.formatSpecifier)(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=Object(D.precisionPrefix)(a,s))||(n.precision=r),Object(D.formatPrefix)(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=Object(D.precisionRound)(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Object(D.precisionFixed)(a))||(n.precision=r-2*("%"===n.type))}return Object(D.format)(n)};function j(e){var t=e.domain;return e.ticks=function(e){var n=t();return p(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return I(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=g(s,l,n))>0?r=g(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=g(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,t(i)),e},e}function F(){var e=R(O,E.c);return e.copy=function(){return M(e,F())},j(e)}function L(){var e=[0,1];function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=y.call(n,P),t):e.slice()},t.copy=function(){return L().domain(e)},j(t)}var B=function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e};function U(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:T(t)}function W(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function V(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H(e){return 10===e?V:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function q(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Y(e){return function(t){return-e(-t)}}function $(){var e=R(U,W).domain([1,10]),t=e.domain,n=10,r=q(10),i=H(10);function o(){return r=q(n),i=H(n),t()[0]<0&&(r=Y(r),i=Y(i)),e}return e.base=function(e){return arguments.length?(n=+e,o()):n},e.domain=function(e){return arguments.length?(t(e),o()):t()},e.ticks=function(e){var o,a=t(),s=a[0],l=a[a.length-1];(o=l<s)&&(d=s,s=l,l=d);var u,c,h,d=r(s),f=r(l),g=null==e?10:+e,v=[];if(!(n%1)&&f-d<g){if(d=Math.round(d)-1,f=Math.round(f)+1,s>0){for(;d<f;++d)for(c=1,u=i(d);c<n;++c)if(!((h=u*c)<s)){if(h>l)break;v.push(h)}}else for(;d<f;++d)for(c=n-1,u=i(d);c>=1;--c)if(!((h=u*c)<s)){if(h>l)break;v.push(h)}}else v=p(d,f,Math.min(f-d,g)).map(i);return o?v.reverse():v},e.tickFormat=function(t,o){if(null==o&&(o=10===n?".0e":","),"function"!==typeof o&&(o=Object(D.format)(o)),t===1/0)return o;null==t&&(t=10);var a=Math.max(1,n*t/e.ticks().length);return function(e){var t=e/i(Math.round(r(e)));return t*n<n-.5&&(t*=n),t<=a?o(e):""}},e.nice=function(){return t(B(t(),{floor:function(e){return i(Math.floor(r(e)))},ceil:function(e){return i(Math.ceil(r(e)))}}))},e.copy=function(){return M(e,$().base(n))},e}function K(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function X(){var e=1,t=R(function(t,n){return(n=K(n,e)-(t=K(t,e)))?function(r){return(K(r,e)-t)/n}:T(n)},function(t,n){return n=K(n,e)-(t=K(t,e)),function(r){return K(t+n*r,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return M(t,X().exponent(e))},j(t)}function G(){return X().exponent(.5)}function Q(){var e=[],t=[],n=[];function i(){var r=0,i=Math.max(1,t.length);for(n=new Array(i-1);++r<i;)n[r-1]=m(e,r/i);return o}function o(e){if(!isNaN(e=+e))return t[s(n,e)]}return o.invertExtent=function(r){var i=t.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:e[0],i<n.length?n[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,o=0,a=t.length;o<a;++o)null==(n=t[o])||isNaN(n=+n)||e.push(n);return e.sort(r),i()},o.range=function(e){return arguments.length?(t=w.call(e),i()):t.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return Q().domain(e).range(t)},o}function J(){var e=0,t=1,n=1,r=[.5],i=[0,1];function o(e){if(e<=e)return i[s(r,e,0,n)]}function a(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*t-(i-n)*e)/(n+1);return o}return o.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],a()):[e,t]},o.range=function(e){return arguments.length?(n=(i=w.call(e)).length-1,a()):i.slice()},o.invertExtent=function(o){var a=i.indexOf(o);return a<0?[NaN,NaN]:a<1?[e,r[0]]:a>=n?[r[n-1],t]:[r[a-1],r[a]]},o.copy=function(){return J().domain([e,t]).range(i)},j(o)}function Z(){var e=[.5],t=[0,1],n=1;function r(r){if(r<=r)return t[s(e,r,0,n)]}return r.domain=function(i){return arguments.length?(e=w.call(i),n=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=w.call(i),n=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},r.copy=function(){return Z().domain(e).range(t)},r}var ee=new Date,te=new Date;function ne(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return ne(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return ee.setTime(+t),te.setTime(+r),e(ee),e(te),Math.floor(n(ee,te))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var re=ne(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});re.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?ne(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):re:null};var ie=re,oe=(re.range,6e4),ae=6048e5,se=ne(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),le=se,ue=(se.range,ne(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+t*oe)},function(e,t){return(t-e)/oe},function(e){return e.getMinutes()})),ce=ue,he=(ue.range,ne(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*oe)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()})),de=he,fe=(he.range,ne(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oe)/864e5},function(e){return e.getDate()-1})),pe=fe;fe.range;function ge(e){return ne(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oe)/ae})}var ve=ge(0),me=ge(1),_e=ge(2),be=ge(3),ye=ge(4),we=ge(5),xe=ge(6),ke=(ve.range,me.range,_e.range,be.range,ye.range,we.range,xe.range,ne(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),Se=ke,Ce=(ke.range,ne(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}));Ce.every=function(e){return isFinite(e=Math.floor(e))&&e>0?ne(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Ee=Ce,Te=(Ce.range,ne(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*oe)},function(e,t){return(t-e)/oe},function(e){return e.getUTCMinutes()})),Pe=Te,Ae=(Te.range,ne(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()})),Oe=Ae,ze=(Ae.range,ne(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1})),Ne=ze;ze.range;function Me(e){return ne(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/ae})}var Re=Me(0),De=Me(1),Ie=Me(2),je=Me(3),Fe=Me(4),Le=Me(5),Be=Me(6),Ue=(Re.range,De.range,Ie.range,je.range,Fe.range,Le.range,Be.range,ne(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),We=Ue,Ve=(Ue.range,ne(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));Ve.every=function(e){return isFinite(e=Math.floor(e))&&e>0?ne(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var He=Ve;Ve.range;function qe(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ye(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $e(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}var Ke,Xe,Ge,Qe,Je={"-":"",_:" ",0:"0"},Ze=/^\s*\d+/,et=/^%/,tt=/[\\^$*+?|[\]().{}]/g;function nt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function rt(e){return e.replace(tt,"\\$&")}function it(e){return new RegExp("^(?:"+e.map(rt).join("|")+")","i")}function ot(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function at(e,t,n){var r=Ze.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function st(e,t,n){var r=Ze.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function lt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ut(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ct(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=Ze.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ft(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vt(e,t,n){var r=Ze.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function bt(e,t,n){var r=Ze.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=Ze.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wt(e,t,n){var r=Ze.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xt(e,t,n){var r=et.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kt(e,t,n){var r=Ze.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function St(e,t,n){var r=Ze.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Ct(e,t){return nt(e.getDate(),t,2)}function Et(e,t){return nt(e.getHours(),t,2)}function Tt(e,t){return nt(e.getHours()%12||12,t,2)}function Pt(e,t){return nt(1+pe.count(Ee(e),e),t,3)}function At(e,t){return nt(e.getMilliseconds(),t,3)}function Ot(e,t){return At(e,t)+"000"}function zt(e,t){return nt(e.getMonth()+1,t,2)}function Nt(e,t){return nt(e.getMinutes(),t,2)}function Mt(e,t){return nt(e.getSeconds(),t,2)}function Rt(e){var t=e.getDay();return 0===t?7:t}function Dt(e,t){return nt(ve.count(Ee(e),e),t,2)}function It(e,t){var n=e.getDay();return e=n>=4||0===n?ye(e):ye.ceil(e),nt(ye.count(Ee(e),e)+(4===Ee(e).getDay()),t,2)}function jt(e){return e.getDay()}function Ft(e,t){return nt(me.count(Ee(e),e),t,2)}function Lt(e,t){return nt(e.getFullYear()%100,t,2)}function Bt(e,t){return nt(e.getFullYear()%1e4,t,4)}function Ut(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nt(t/60|0,"0",2)+nt(t%60,"0",2)}function Wt(e,t){return nt(e.getUTCDate(),t,2)}function Vt(e,t){return nt(e.getUTCHours(),t,2)}function Ht(e,t){return nt(e.getUTCHours()%12||12,t,2)}function qt(e,t){return nt(1+Ne.count(He(e),e),t,3)}function Yt(e,t){return nt(e.getUTCMilliseconds(),t,3)}function $t(e,t){return Yt(e,t)+"000"}function Kt(e,t){return nt(e.getUTCMonth()+1,t,2)}function Xt(e,t){return nt(e.getUTCMinutes(),t,2)}function Gt(e,t){return nt(e.getUTCSeconds(),t,2)}function Qt(e){var t=e.getUTCDay();return 0===t?7:t}function Jt(e,t){return nt(Re.count(He(e),e),t,2)}function Zt(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Fe(e):Fe.ceil(e),nt(Fe.count(He(e),e)+(4===He(e).getUTCDay()),t,2)}function en(e){return e.getUTCDay()}function tn(e,t){return nt(De.count(He(e),e),t,2)}function nn(e,t){return nt(e.getUTCFullYear()%100,t,2)}function rn(e,t){return nt(e.getUTCFullYear()%1e4,t,4)}function on(){return"+0000"}function an(){return"%"}function sn(e){return+e}function ln(e){return Math.floor(+e/1e3)}Ke=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=it(i),c=ot(i),h=it(o),d=ot(o),f=it(a),p=ot(a),g=it(s),v=ot(s),m=it(l),_=ot(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Ct,e:Ct,f:Ot,H:Et,I:Tt,j:Pt,L:At,m:zt,M:Nt,p:function(e){return i[+(e.getHours()>=12)]},Q:sn,s:ln,S:Mt,u:Rt,U:Dt,V:It,w:jt,W:Ft,x:null,X:null,y:Lt,Y:Bt,Z:Ut,"%":an},y={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Wt,e:Wt,f:$t,H:Vt,I:Ht,j:qt,L:Yt,m:Kt,M:Xt,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:sn,s:ln,S:Gt,u:Qt,U:Jt,V:Zt,w:en,W:tn,x:null,X:null,y:nn,Y:rn,Z:on,"%":an},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=_[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:gt,e:gt,f:wt,H:mt,I:mt,j:vt,L:yt,m:pt,M:_t,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:kt,s:St,S:bt,u:st,U:lt,V:ut,w:at,W:ct,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:dt,Y:ht,Z:ft,"%":xt};function x(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=Je[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=$e(1900);if(S(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ye($e(o.y))).getUTCDay(),r=i>4||0===i?De.ceil(r):De(r),r=Ne.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=t($e(o.y))).getDay(),r=i>4||0===i?me.ceil(r):me(r),r=pe.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ye($e(o.y)).getUTCDay():t($e(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ye(o)):t(o)}}function S(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Je?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),{format:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",qe);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e,Ye);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Xe=Ke.format,Ke.parse,Ge=Ke.utcFormat,Qe=Ke.utcParse;Date.prototype.toISOString||Ge("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Qe("%Y-%m-%dT%H:%M:%S.%LZ");var un=1e3,cn=60*un,hn=60*cn,dn=24*hn,fn=7*dn,pn=30*dn,gn=365*dn;function vn(e){return new Date(e)}function mn(e){return e instanceof Date?+e:+new Date(+e)}function _n(e,t,n,r,o,a,s,l,u){var c=R(O,E.c),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),_=u("%a %d"),b=u("%b %d"),w=u("%B"),x=u("%Y"),k=[[s,1,un],[s,5,5*un],[s,15,15*un],[s,30,30*un],[a,1,cn],[a,5,5*cn],[a,15,15*cn],[a,30,30*cn],[o,1,hn],[o,3,3*hn],[o,6,6*hn],[o,12,12*hn],[r,1,dn],[r,2,2*dn],[n,1,fn],[t,1,pn],[t,3,3*pn],[e,1,gn]];function S(i){return(s(i)<i?f:a(i)<i?p:o(i)<i?g:r(i)<i?m:t(i)<i?n(i)<i?_:b:e(i)<i?w:x)(i)}function C(t,n,r,o){if(null==t&&(t=10),"number"===typeof t){var a=Math.abs(r-n)/t,s=i(function(e){return e[2]}).right(k,a);s===k.length?(o=v(n/gn,r/gn,t),t=e):s?(o=(s=k[a/k[s-1][2]<k[s][2]/a?s-1:s])[1],t=s[0]):(o=Math.max(v(n,r,t),1),t=l)}return null==o?t:t.every(o)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?d(y.call(e,mn)):d().map(vn)},c.ticks=function(e,t){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=C(e,i,o,t))?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?S:u(t)},c.nice=function(e,t){var n=d();return(e=C(e,n[0],n[n.length-1],t))?d(B(n,e)):c},c.copy=function(){return M(c,_n(e,t,n,r,o,a,s,l,u))},c}var bn=function(){return _n(Ee,Se,ve,pe,de,ce,le,ie,Xe).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},yn=function(){return _n(He,We,Re,Ne,Oe,Pe,le,ie,Ge).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},wn=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},xn=wn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),kn=wn("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Sn=wn("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Cn=wn("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),En=n(4),Tn=Object(E.b)(Object(En.b)(300,.5,0),Object(En.b)(-240,.5,1)),Pn=Object(E.b)(Object(En.b)(-100,.75,.35),Object(En.b)(80,1.5,.8)),An=Object(E.b)(Object(En.b)(260,.75,.35),Object(En.b)(80,1.5,.8)),On=Object(En.b)(),zn=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return On.h=360*e-100,On.s=1.5-1.5*t,On.l=.8-.9*t,On+""};function Nn(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Mn=Nn(wn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Rn=Nn(wn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Dn=Nn(wn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),In=Nn(wn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function jn(e){var t=0,n=1,r=!1;function i(i){var o=(i-t)/(n-t);return e(r?Math.max(0,Math.min(1,o)):o)}return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.clamp=function(e){return arguments.length?(r=!!e,i):r},i.interpolator=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return jn(e).domain([t,n]).clamp(r)},j(i)}n.d(t,"scaleBand",function(){return S}),n.d(t,"scalePoint",function(){return C}),n.d(t,"scaleIdentity",function(){return L}),n.d(t,"scaleLinear",function(){return F}),n.d(t,"scaleLog",function(){return $}),n.d(t,"scaleOrdinal",function(){return k}),n.d(t,"scaleImplicit",function(){return x}),n.d(t,"scalePow",function(){return X}),n.d(t,"scaleSqrt",function(){return G}),n.d(t,"scaleQuantile",function(){return Q}),n.d(t,"scaleQuantize",function(){return J}),n.d(t,"scaleThreshold",function(){return Z}),n.d(t,"scaleTime",function(){return bn}),n.d(t,"scaleUtc",function(){return yn}),n.d(t,"schemeCategory10",function(){return xn}),n.d(t,"schemeCategory20b",function(){return kn}),n.d(t,"schemeCategory20c",function(){return Sn}),n.d(t,"schemeCategory20",function(){return Cn}),n.d(t,"interpolateCubehelixDefault",function(){return Tn}),n.d(t,"interpolateRainbow",function(){return zn}),n.d(t,"interpolateWarm",function(){return Pn}),n.d(t,"interpolateCool",function(){return An}),n.d(t,"interpolateViridis",function(){return Mn}),n.d(t,"interpolateMagma",function(){return Rn}),n.d(t,"interpolateInferno",function(){return Dn}),n.d(t,"interpolatePlasma",function(){return In}),n.d(t,"scaleSequential",function(){return jn})},function(e,t,n){"use strict";n.r(t);var r=n(19),i=n(18),o=n(7),a=n(2),s=n(21),l=function(e){return function(){return e}};function u(e,t,n){this.target=e,this.type=t,this.transform=n}function c(e,t,n){this.k=e,this.x=t,this.y=n}c.prototype={constructor:c,scale:function(e){return 1===e?this:new c(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new c(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var h=new c(1,0,0);function d(e){return e.__zoom||h}function f(){a.event.stopImmediatePropagation()}d.prototype=c.prototype;var p=function(){a.event.preventDefault(),a.event.stopImmediatePropagation()};function g(){return!a.event.button}function v(){var e,t,n=this;return n instanceof SVGElement?(e=(n=n.ownerSVGElement||n).width.baseVal.value,t=n.height.baseVal.value):(e=n.clientWidth,t=n.clientHeight),[[0,0],[e,t]]}function m(){return this.__zoom||h}function _(){return-a.event.deltaY*(a.event.deltaMode?120:1)/500}function b(){return"ontouchstart"in this}function y(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var w=function(){var e,t,n=g,d=v,w=y,x=_,k=b,S=[0,1/0],C=[[-1/0,-1/0],[1/0,1/0]],E=250,T=o.i,P=[],A=Object(r.a)("start","zoom","end"),O=500,z=150,N=0;function M(e){e.property("__zoom",m).on("wheel.zoom",B).on("mousedown.zoom",U).on("dblclick.zoom",W).filter(k).on("touchstart.zoom",V).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(e,t){return(t=Math.max(S[0],Math.min(S[1],t)))===e.k?e:new c(t,e.x,e.y)}function D(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new c(e.k,r,i)}function I(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function j(e,t,n){e.on("start.zoom",function(){F(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=F(this,e),i=d.apply(this,e),o=n||I(i),a=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),s=this.__zoom,l="function"===typeof t?t.apply(this,e):t,u=T(s.invert(o).concat(a/s.k),l.invert(o).concat(a/l.k));return function(e){if(1===e)e=l;else{var t=u(e),n=a/t[2];e=new c(n,o[0]-t[0]*n,o[1]-t[1]*n)}r.zoom(null,e)}})}function F(e,t){for(var n,r=0,i=P.length;r<i;++r)if((n=P[r]).that===e)return n;return new L(e,t)}function L(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=d.apply(e,t)}function B(){if(n.apply(this,arguments)){var e=F(this,arguments),t=this.__zoom,r=Math.max(S[0],Math.min(S[1],t.k*Math.pow(2,x.apply(this,arguments)))),i=Object(a.mouse)(this);if(e.wheel)e.mouse[0][0]===i[0]&&e.mouse[0][1]===i[1]||(e.mouse[1]=t.invert(e.mouse[0]=i)),clearTimeout(e.wheel);else{if(t.k===r)return;e.mouse=[i,t.invert(i)],Object(s.a)(this),e.start()}p(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},z),e.zoom("mouse",w(D(R(t,r),e.mouse[0],e.mouse[1]),e.extent,C))}}function U(){if(!t&&n.apply(this,arguments)){var e=F(this,arguments),r=Object(a.select)(a.event.view).on("mousemove.zoom",function(){if(p(),!e.moved){var t=a.event.clientX-l,n=a.event.clientY-u;e.moved=t*t+n*n>N}e.zoom("mouse",w(D(e.that.__zoom,e.mouse[0]=Object(a.mouse)(e.that),e.mouse[1]),e.extent,C))},!0).on("mouseup.zoom",function(){r.on("mousemove.zoom mouseup.zoom",null),Object(i.dragEnable)(a.event.view,e.moved),p(),e.end()},!0),o=Object(a.mouse)(this),l=a.event.clientX,u=a.event.clientY;Object(i.dragDisable)(a.event.view),f(),e.mouse=[o,this.__zoom.invert(o)],Object(s.a)(this),e.start()}}function W(){if(n.apply(this,arguments)){var e=this.__zoom,t=Object(a.mouse)(this),r=e.invert(t),i=e.k*(a.event.shiftKey?.5:2),o=w(D(R(e,i),t,r),d.apply(this,arguments),C);p(),E>0?Object(a.select)(this).transition().duration(E).call(j,o,t):Object(a.select)(this).call(M.transform,o)}}function V(){if(n.apply(this,arguments)){var t,r,i,o,l=F(this,arguments),u=a.event.changedTouches,c=u.length;for(f(),r=0;r<c;++r)i=u[r],o=[o=Object(a.touch)(this,u,i.identifier),this.__zoom.invert(o),i.identifier],l.touch0?l.touch1||(l.touch1=o):(l.touch0=o,t=!0);if(e&&(e=clearTimeout(e),!l.touch1))return l.end(),void((o=Object(a.select)(this).on("dblclick.zoom"))&&o.apply(this,arguments));t&&(e=setTimeout(function(){e=null},O),Object(s.a)(this),l.start())}}function H(){var t,n,r,i,o=F(this,arguments),s=a.event.changedTouches,l=s.length;for(p(),e&&(e=clearTimeout(e)),t=0;t<l;++t)n=s[t],r=Object(a.touch)(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var u=o.touch0[0],c=o.touch0[1],h=o.touch1[0],d=o.touch1[1],f=(f=h[0]-u[0])*f+(f=h[1]-u[1])*f,g=(g=d[0]-c[0])*g+(g=d[1]-c[1])*g;n=R(n,Math.sqrt(f/g)),r=[(u[0]+h[0])/2,(u[1]+h[1])/2],i=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],i=o.touch0[1]}o.zoom("touch",w(D(n,r,i),o.extent,C))}function q(){var e,n,r=F(this,arguments),i=a.event.changedTouches,o=i.length;for(f(),t&&clearTimeout(t),t=setTimeout(function(){t=null},O),e=0;e<o;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}return M.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",m),e!==n?j(e,t):n.interrupt().each(function(){F(this,arguments).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},M.scaleBy=function(e,t){M.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)})},M.scaleTo=function(e,t){M.transform(e,function(){var e=d.apply(this,arguments),n=this.__zoom,r=I(e),i=n.invert(r),o="function"===typeof t?t.apply(this,arguments):t;return w(D(R(n,o),r,i),e,C)})},M.translateBy=function(e,t,n){M.transform(e,function(){return w(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),d.apply(this,arguments),C)})},M.translateTo=function(e,t,n){M.transform(e,function(){var e=d.apply(this,arguments),r=this.__zoom,i=I(e);return w(h.translate(i[0],i[1]).scale(r.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,C)})},L.prototype={start:function(){return 1===++this.active&&(this.index=P.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(P.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){Object(a.customEvent)(new u(M,e,this.that.__zoom),A.apply,A,[e,this.that,this.args])}},M.wheelDelta=function(e){return arguments.length?(x="function"===typeof e?e:l(+e),M):x},M.filter=function(e){return arguments.length?(n="function"===typeof e?e:l(!!e),M):n},M.touchable=function(e){return arguments.length?(k="function"===typeof e?e:l(!!e),M):k},M.extent=function(e){return arguments.length?(d="function"===typeof e?e:l([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),M):d},M.scaleExtent=function(e){return arguments.length?(S[0]=+e[0],S[1]=+e[1],M):[S[0],S[1]]},M.translateExtent=function(e){return arguments.length?(C[0][0]=+e[0][0],C[1][0]=+e[1][0],C[0][1]=+e[0][1],C[1][1]=+e[1][1],M):[[C[0][0],C[0][1]],[C[1][0],C[1][1]]]},M.constrain=function(e){return arguments.length?(w=e,M):w},M.duration=function(e){return arguments.length?(E=+e,M):E},M.interpolate=function(e){return arguments.length?(T=e,M):T},M.on=function(){var e=A.on.apply(A,arguments);return e===A?M:e},M.clickDistance=function(e){return arguments.length?(N=(e=+e)*e,M):Math.sqrt(N)},M};n.d(t,"zoom",function(){return w}),n.d(t,"zoomTransform",function(){return d}),n.d(t,"zoomIdentity",function(){return h})},function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=n(6),a=n.n(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var u={get:function(e,t,n){if(!t)return e;var r=h(t),i=void 0;try{i=r.reduce(function(e,t){return e[t]},e)}catch(o){}return"undefined"!==typeof i?i:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=h(t),i=void 0,o=e;for(;(i=r.shift())&&r.length;)o[i]||(o[i]={}),o=o[i];return o[i]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort(function(e,i){for(var o=0;o<t.length;o+=1){var a=t[o],s=!1===n[o]||"desc"===n[o],l=a(e,i);if(l)return s?-l:l}return n[0]?e[r]-i[r]:i[r]-e[r]})},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter(function(n,r){var i=t(n);return!!i&&(e.splice(r,1),!0)})},clone:function(e){try{return JSON.parse(JSON.stringify(e,function(e,t){return"function"===typeof t?t.toString():t}))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if("undefined"!==typeof(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce(function(e,t){return e+t},0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,o=l(t,["children","className"]);return i.a.createElement("div",s({className:a()(e,r)},o),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce(function(e,n,r){var i="function"===typeof t?t(n,r):n[t];return e[i]=c(e[i])?e[i]:[],e[i].push(n),e},{})},isArray:c,splitProps:function(e){var t=e.className,n=e.style,r=l(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map(function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&"undefined"!==typeof e[n]&&(t[n]=e[n]),!0});return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"===typeof e?i.a.createElement(e,t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function c(e){return Array.isArray(e)}function h(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),d(n,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach(function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])});["sortable","filterable","resizable"].forEach(function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",i="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[i]}}),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),i=this.getResolvedState({},e),o=i.freezeWhenExpanded;if(i.frozen=!1,o)for(var a=Object.keys(i.expanded),s=0;s<a.length;s+=1)if(i.expanded[a[s]]){i.frozen=!0;break}return(r.frozen&&!i.frozen||r.sorted!==i.sorted||r.filtered!==i.filtered||r.showFilters!==i.showFilters||!i.frozen&&r.resolvedData!==i.resolvedData)&&((r.sorted!==i.sorted&&this.props.collapseOnSortingChange||r.filtered!==i.filtered||r.showFilters!==i.showFilters||r.sortedData&&!i.frozen&&r.resolvedData!==i.resolvedData&&this.props.collapseOnDataChange)&&(i.expanded={}),Object.assign(i,this.getSortedData(i))),r.filtered!==i.filtered&&(i.page=0),i.sortedData&&(i.pages=i.manual?i.pages:Math.ceil(i.sortedData.length/i.pageSize),i.page=i.manual?i.page:Math.max(i.page>=i.pages?i.pages-1:i.page,0)),this.setState(i,function(){t&&t(),r.page===i.page&&r.pageSize===i.pageSize&&r.sorted===i.sorted&&r.filtered===i.filtered||n.fireFetchData()})}}]),n}()},p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var b=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),v(n,[{key:"getResolvedState",value:function(e,t){return g({},u.compactObject(this.state),u.compactObject(this.props),u.compactObject(t),u.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,o=e.pivotBy,a=void 0===o?[]:o,s=e.data,l=e.resolveData,c=e.pivotIDKey,h=e.pivotValKey,d=e.subRowsKey,f=e.aggregatedKey,v=e.nestingLevelKey,b=e.originalKey,y=e.indexKey,w=e.groupedByPivotKey,x=e.SubComponent,k=!1;r.forEach(function(e){e.columns&&(k=!0)});var S=[].concat(_(r)),C=r.find(function(e){return e.expander||e.columns&&e.columns.some(function(e){return e.expander})});C&&!C.expander&&(C=C.columns.find(function(e){return e.expander})),x&&!C&&(S=[C={expander:!0}].concat(_(S)));var E=[],T=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?g({},n.props.column,n.props.expanderDefaults,e):g({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"===typeof r.accessor){r.id=r.id||r.accessor;var i=r.accessor;return r.accessor=function(e){return u.get(e,i)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return E.push(r),r},P=S.map(function(e){return e.columns?g({},e,{columns:e.columns.map(function(t){return T(t,e)})}):T(e)}).slice(),A=[],O=(P=(P=P.map(function(e){if(e.columns){var t=e.columns.filter(function(e){return!(a.indexOf(e.id)>-1)&&u.getFirstDefined(e.show,!0)});return g({},e,{columns:t})}return e})).filter(function(e){return e.columns?e.columns.length:!(a.indexOf(e.id)>-1)&&u.getFirstDefined(e.show,!0)})).findIndex(function(e){return e.pivot});if(a.length){var z=[];a.forEach(function(e){var t=E.find(function(t){return t.id===e});t&&z.push(t)});var N=z.reduce(function(e,t){return e&&e===t.parentColumn&&t.parentColumn},z[0].parentColumn),M=k&&N.Header,R={Header:M=M||function(){return i.a.createElement("strong",null,"Pivoted")},columns:z.map(function(e){return g({},n.props.pivotDefaults,e,{pivoted:!0})})};O>=0?(R=g({},P[O],R),P.splice(O,1,R)):P.unshift(R)}var D=[],I=[],j=function(e,t){D.push(g({},n.props.column,t,{columns:e})),I=[]};P.forEach(function(e){if(e.columns)return A=A.concat(e.columns),I.length>0&&j(I),void j(e.columns,e);A.push(e),I.push(e)}),k&&I.length>0&&j(I);var F=this.resolvedData;this.resolvedData&&!t||(F=l(s),this.resolvedData=F),F=F.map(function(e,t){return function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(m(r={},b,t),m(r,y,n),m(r,d,t[d]),m(r,v,i),r);return E.forEach(function(e){e.expander||(o[e.id]=e.accessor(t))}),o[d]&&(o[d]=o[d].map(function(t,n){return e(t,n,i+1)})),o}(e,t)});var L=A.filter(function(e){return!e.expander&&e.aggregate});if(a.length){F=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var i=Object.entries(u.groupBy(t,n[r])).map(function(e){var t,i=p(e,2),o=i[0],a=i[1];return m(t={},c,n[r]),m(t,h,o),m(t,n[r],o),m(t,d,a),m(t,v,r),m(t,w,!0),t});return i=i.map(function(t){var i,o=e(t[d],n,r+1);return g({},t,(m(i={},d,o),m(i,f,!0),i),function(e){var t={};return L.forEach(function(n){var r=e.map(function(e){return e[n.id]});t[n.id]=n.aggregate(r,e)}),t}(o))})}(F,a)}return g({},e,{resolvedData:F,allVisibleColumns:A,headerGroups:D,allDecoratedColumns:E,hasHeaderGroups:k})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,i=e.defaultFilterMethod,o=e.resolvedData,a=e.allVisibleColumns,s=e.allDecoratedColumns,l={};return s.filter(function(e){return e.sortMethod}).forEach(function(e){l[e.id]=e.sortMethod}),{sortedData:t?o:this.sortData(this.filterData(o,r,i,a),n,l)}}},{key:"fireFetchData",value:function(){var e=g({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filter:this.getStateOrProp("filter")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return u.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return u.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var i=this,o=e;return t.length&&(o=(o=t.reduce(function(e,t){var i=r.find(function(e){return e.id===t.id});if(!i||!1===i.filterable)return e;var o=i.filterMethod||n;return i.filterAll?o(t,e,i):e.filter(function(e){return o(t,e,i)})},o)).map(function(e){return e[i.props.subRowsKey]?g({},e,m({},i.props.subRowsKey,i.filterData(e[i.props.subRowsKey],t,n,r))):e}).filter(function(e){return!e[i.props.subRowsKey]||e[i.props.subRowsKey].length>0})),o}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var i=(this.props.orderByMethod||u.orderBy)(e,t.map(function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}}),t.map(function(e){return!e.desc}),this.props.indexKey);return i.forEach(function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))}),i}},{key:"getMinRows",value:function(){return u.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,i={page:e};r&&(i.expanded={}),this.setStateWithData(i,function(){return n&&n(e)})}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,i=Math.floor(r/e);this.setStateWithData({pageSize:e,page:i},function(){return t&&t(e,i)})}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,i=n.skipNextSort,o=n.defaultSortDesc,a=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:o,s=!a;if(i)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=u.clone(r||[]).map(function(e){return e.desc=u.isSortingDesc(e),e});if(u.isArray(e)){var h=c.findIndex(function(t){return t.id===e[0].id});if(h>-1)c[h].desc===s?t?c.splice(h,e.length):e.forEach(function(e,t){c[h+t].desc=a}):e.forEach(function(e,t){c[h+t].desc=s}),t||(c=c.slice(h,e.length));else c=t?c.concat(e.map(function(e){return{id:e.id,desc:a}})):e.map(function(e){return{id:e.id,desc:a}})}else{var d=c.findIndex(function(t){return t.id===e.id});if(d>-1){var f=c[d];f.desc===s?t?c.splice(d,1):(f.desc=a,c=[f]):(f.desc=s,t||(c=[f]))}else t?c.push({id:e.id,desc:a}):c=[{id:e.id,desc:a}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},function(){return l&&l(c,e,t)})}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,i=(n||[]).filter(function(t){return t.id!==e.id});""!==t&&i.push({id:e.id,value:t}),this.setStateWithData({filtered:i},function(){return r&&r(i,e,t)})}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var i=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:i}},function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))})}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,i=this.getResolvedState(),o=i.resized,a=i.currentlyResizing,s=i.columns.find(function(e){return e.accessor===a.id}),l=s?s.minResizeWidth:r.minResizeWidth,u=o.filter(function(e){return e.id!==a.id}),c=void 0;"touchmove"===e.type?c=e.changedTouches[0].pageX:"mousemove"===e.type&&(c=e.pageX);var h=Math.max(a.parentWidth+c-a.startX,l);u.push({id:a.id,value:h}),this.setStateWithData({resized:u},function(){return n&&n(u,e)})}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),n}()},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var x=function(e){return i.a.createElement("button",w({type:"button"},e,{className:"-btn"}),e.children)},k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),y(t,[{key:"componentWillReceiveProps",value:function(e){this.props.page!==e.page&&this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,o=t.showPageSizeOptions,s=t.pageSizeOptions,l=t.pageSize,u=t.showPageJump,c=t.canPrevious,h=t.canNext,d=t.onPageSizeChange,f=t.className,p=t.PreviousComponent,g=t.NextComponent,v=t.renderPageJump,m=t.renderCurrentPage,_=t.renderTotalPagesCount,b=t.renderPageSizeOptions;return i.a.createElement("div",{className:a()(f,"-pagination"),style:this.props.style},i.a.createElement("div",{className:"-previous"},i.a.createElement(p,{onClick:function(){c&&e.changePage(r-1)},disabled:!c},this.props.previousText)),i.a.createElement("div",{className:"-center"},i.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",u?v(this.getPageJumpProperties()):m(r)," ",this.props.ofText," ",_(n)),o&&b({pageSize:l,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:s,onPageSizeChange:d,rowsText:this.props.rowsText})),i.a.createElement("div",{className:"-next"},i.a.createElement(g,{onClick:function(){h&&e.changePage(r+1)},disabled:!h},this.props.nextText)))}}]),t}();k.defaultProps={PreviousComponent:x,NextComponent:x,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,o=e.onKeyPress,a=e.inputType,s=e.pageJumpText;return i.a.createElement("div",{className:"-pageJump"},i.a.createElement("input",{"aria-label":s,type:a,onChange:t,value:n,onBlur:r,onKeyPress:o}))},renderCurrentPage:function(e){return i.a.createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return i.a.createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,o=e.onPageSizeChange,a=e.rowsText;return i.a.createElement("span",{className:"select-wrap -pageSizeOptions"},i.a.createElement("select",{"aria-label":r,onChange:function(e){return o(Number(e.target.value))},value:t},n.map(function(e,t){return i.a.createElement("option",{key:t,value:e},e+" "+a)})))}};var S=k,C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function E(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var T=function(){return{}},P={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null===t||void 0===t?"":t,(e="string"===typeof(e=null===e||void 0===e?"":e)?e.toLowerCase():e)>(t="string"===typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:T,getTableProps:T,getTheadGroupProps:T,getTheadGroupTrProps:T,getTheadGroupThProps:T,getTheadProps:T,getTheadTrProps:T,getTheadThProps:T,getTheadFilterProps:T,getTheadFilterTrProps:T,getTheadFilterThProps:T,getTbodyProps:T,getTrGroupProps:T,getTrProps:T,getTdProps:T,getTfootProps:T,getTfootTrProps:T,getTfootTdProps:T,getPaginationProps:T,getLoadingProps:T,getNoDataProps:T,getResizerProps:T,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:T,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:T,footerClassName:"",footerStyle:{},getFooterProps:T,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",C({className:a()("rt-table",n),role:"grid"},r),t)},TheadComponent:u.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:u.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",C({className:a()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",C({className:a()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,o=E(e,["toggleSort","className","children"]);return i.a.createElement("div",C({className:a()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},o),r)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=E(e,["toggleSort","className","children"]);return i.a.createElement("div",C({className:a()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:u.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return i.a.createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return i.a.createElement("div",{className:a()("rt-expander",t&&"-open")},"\u2022")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return i.a.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter(function(e){return"undefined"!==typeof e[n.id]}).map(function(e,r){return i.a.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")});return i.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:S,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,o=E(e,["className","loading","loadingText"]);return i.a.createElement("div",C({className:a()("-loading",{"-active":n},t)},o),i.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:u.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:u.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return i.a.createElement("span",null,"\xa0")}},A=n(1),O=n.n(A),z={data:O.a.any,loading:O.a.bool,showPagination:O.a.bool,showPaginationTop:O.a.bool,showPaginationBottom:O.a.bool,showPageSizeOptions:O.a.bool,pageSizeOptions:O.a.array,defaultPageSize:O.a.number,showPageJump:O.a.bool,collapseOnSortingChange:O.a.bool,collapseOnPageChange:O.a.bool,collapseOnDataChange:O.a.bool,freezeWhenExpanded:O.a.bool,sortable:O.a.bool,resizable:O.a.bool,filterable:O.a.bool,defaultSortDesc:O.a.bool,defaultSorted:O.a.array,defaultFiltered:O.a.array,defaultResized:O.a.array,defaultExpanded:O.a.object,defaultFilterMethod:O.a.func,defaultSortMethod:O.a.func,onPageChange:O.a.func,onPageSizeChange:O.a.func,onSortedChange:O.a.func,onFilteredChange:O.a.func,onResizedChange:O.a.func,onExpandedChange:O.a.func,pivotBy:O.a.array,pivotValKey:O.a.string,pivotIDKey:O.a.string,subRowsKey:O.a.string,aggregatedKey:O.a.string,nestingLevelKey:O.a.string,originalKey:O.a.string,indexKey:O.a.string,groupedByPivotKey:O.a.string,onFetchData:O.a.func,className:O.a.string,style:O.a.object,getProps:O.a.func,getTableProps:O.a.func,getTheadGroupProps:O.a.func,getTheadGroupTrProps:O.a.func,getTheadGroupThProps:O.a.func,getTheadProps:O.a.func,getTheadTrProps:O.a.func,getTheadThProps:O.a.func,getTheadFilterProps:O.a.func,getTheadFilterTrProps:O.a.func,getTheadFilterThProps:O.a.func,getTbodyProps:O.a.func,getTrGroupProps:O.a.func,getTrProps:O.a.func,getTdProps:O.a.func,getTfootProps:O.a.func,getTfootTrProps:O.a.func,getTfootTdProps:O.a.func,getPaginationProps:O.a.func,getLoadingProps:O.a.func,getNoDataProps:O.a.func,getResizerProps:O.a.func,columns:O.a.arrayOf(O.a.shape({Cell:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Header:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Footer:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Aggregated:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Pivot:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),PivotValue:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Expander:O.a.oneOfType([O.a.element,O.a.string,O.a.func]),Filter:O.a.oneOfType([O.a.element,O.a.func]),sortable:O.a.bool,resizable:O.a.bool,filterable:O.a.bool,show:O.a.bool,minWidth:O.a.number,minResizeWidth:O.a.number,className:O.a.string,style:O.a.object,getProps:O.a.func,aggregate:O.a.func,headerClassName:O.a.string,headerStyle:O.a.object,getHeaderProps:O.a.func,footerClassName:O.a.string,footerStyle:O.a.object,getFooterProps:O.a.func,filterMethod:O.a.func,filterAll:O.a.bool,sortMethod:O.a.func})),expanderDefaults:O.a.shape({sortable:O.a.bool,resizable:O.a.bool,filterable:O.a.bool,width:O.a.number}),pivotDefaults:O.a.object,previousText:O.a.node,nextText:O.a.node,loadingText:O.a.node,noDataText:O.a.node,pageText:O.a.node,ofText:O.a.node,rowsText:O.a.node,pageJumpText:O.a.node,rowsSelectorText:O.a.node,TableComponent:O.a.oneOfType([O.a.func,O.a.element]),TheadComponent:O.a.oneOfType([O.a.func,O.a.element]),TbodyComponent:O.a.oneOfType([O.a.func,O.a.element]),TrGroupComponent:O.a.oneOfType([O.a.func,O.a.element]),TrComponent:O.a.oneOfType([O.a.func,O.a.element]),ThComponent:O.a.oneOfType([O.a.func,O.a.element]),TdComponent:O.a.oneOfType([O.a.func,O.a.element]),TfootComponent:O.a.oneOfType([O.a.func,O.a.element]),FilterComponent:O.a.oneOfType([O.a.func,O.a.element]),ExpanderComponent:O.a.oneOfType([O.a.func,O.a.element]),PivotValueComponent:O.a.oneOfType([O.a.func,O.a.element]),AggregatedComponent:O.a.oneOfType([O.a.func,O.a.element]),PivotComponent:O.a.oneOfType([O.a.func,O.a.element]),PaginationComponent:O.a.oneOfType([O.a.func,O.a.element]),PreviousComponent:O.a.oneOfType([O.a.func,O.a.element]),NextComponent:O.a.oneOfType([O.a.func,O.a.element]),LoadingComponent:O.a.oneOfType([O.a.func,O.a.element]),NoDataComponent:O.a.oneOfType([O.a.func,O.a.element]),ResizerComponent:O.a.oneOfType([O.a.func,O.a.element]),PadRowComponent:O.a.oneOfType([O.a.func,O.a.element])},N=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var D=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b(f(r["Component"]))),R(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,o=t.style,s=t.getProps,l=t.getTableProps,c=t.getTheadGroupProps,h=t.getTheadGroupTrProps,d=t.getTheadGroupThProps,f=t.getTheadProps,p=t.getTheadTrProps,g=t.getTheadThProps,v=t.getTheadFilterProps,m=t.getTheadFilterTrProps,_=t.getTheadFilterThProps,b=t.getTbodyProps,y=t.getTrGroupProps,w=t.getTrProps,x=t.getTdProps,k=t.getTfootProps,S=t.getTfootTrProps,C=t.getTfootTdProps,E=t.getPaginationProps,T=t.getLoadingProps,A=t.getNoDataProps,O=t.getResizerProps,z=t.showPagination,R=t.showPaginationTop,D=t.showPaginationBottom,I=t.manual,j=t.loadingText,F=t.noDataText,L=t.sortable,B=t.multiSort,U=t.resizable,W=t.filterable,V=t.pivotIDKey,H=t.pivotValKey,q=t.pivotBy,Y=t.subRowsKey,$=t.aggregatedKey,K=t.originalKey,X=t.indexKey,G=t.groupedByPivotKey,Q=t.loading,J=t.pageSize,Z=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,ie=t.pages,oe=t.onExpandedChange,ae=t.TableComponent,se=t.TheadComponent,le=t.TbodyComponent,ue=t.TrGroupComponent,ce=t.TrComponent,he=t.ThComponent,de=t.TdComponent,fe=t.TfootComponent,pe=t.PaginationComponent,ge=t.LoadingComponent,ve=t.SubComponent,me=t.NoDataComponent,_e=t.ResizerComponent,be=t.ExpanderComponent,ye=t.PivotValueComponent,we=t.PivotComponent,xe=t.AggregatedComponent,ke=t.FilterComponent,Se=t.PadRowComponent,Ce=t.resolvedData,Ee=t.allVisibleColumns,Te=t.headerGroups,Pe=t.hasHeaderGroups,Ae=t.sortedData,Oe=t.currentlyResizing,ze=J*Z,Ne=ze+J,Me=I?Ce:Ae.slice(ze,Ne),Re=this.getMinRows(),De=u.range(Math.max(Re-Me.length,0)),Ie=Ee.some(function(e){return e.Footer}),je=W||Ee.some(function(e){return e.filterable}),Fe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map(function(t,i){var o=M({},t,{_viewIndex:r+=1}),a=n.concat([i]);if(o[Y]&&u.get(re,a)){var s=e(o[Y],a,r),l=N(s,2);o[Y]=l[0],r=l[1]}return o}),r]}(Me),Le=N(Fe,1);Me=Le[0];var Be=Z>0,Ue=Z+1<ie,We=u.sum(Ee.map(function(e){var t=ne.find(function(t){return t.id===e.id})||{};return u.getFirstDefined(t.value,e.width,e.minWidth)})),Ve=-1,He=M({},t,{startRow:ze,endRow:Ne,pageRows:Me,minRows:Re,padRows:De,hasColumnFooter:Ie,canPrevious:Be,canNext:Ue,rowMinWidth:We}),qe=u.splitProps(s(He,void 0,void 0,this)),Ye=u.splitProps(l(He,void 0,void 0,this)),$e=u.splitProps(b(He,void 0,void 0,this)),Ke=T(He,void 0,void 0,this),Xe=A(He,void 0,void 0,this),Ge=function(t,n){var r=function(e){return(ne.find(function(t){return t.id===e.id})||{}).value},o=u.sum(t.columns.map(function(e){return e.width||r(e)?0:e.minWidth})),s=u.sum(t.columns.map(function(e){return u.getFirstDefined(r(e),e.width,e.minWidth)})),l=u.sum(t.columns.map(function(e){return u.getFirstDefined(r(e),e.width,e.maxWidth)})),c=u.splitProps(d(He,void 0,t,e)),h=u.splitProps(t.getHeaderProps(He,void 0,t,e)),f=[t.headerClassName,c.className,h.className],p=M({},t.headerStyle,c.style,h.style),g=M({},c.rest,h.rest),v={flex:o+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(l)};return i.a.createElement(he,M({key:n+"-"+t.id,className:a()(f),style:M({},p,v)},g),u.normalizeComponent(t.Header,{data:Ae,column:t}))},Qe=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o=ee.find(function(e){return e.id===t.id}),s="function"===typeof t.show?t.show():t.show,l=u.getFirstDefined(r.value,t.width,t.minWidth),c=u.getFirstDefined(r.value,t.width,t.maxWidth),h=u.splitProps(g(He,void 0,t,e)),d=u.splitProps(t.getHeaderProps(He,void 0,t,e)),f=[t.headerClassName,h.className,d.className],p=M({},t.headerStyle,h.style,d.style),v=M({},h.rest,d.rest),m=u.getFirstDefined(t.resizable,U,!1),_=m?i.a.createElement(_e,M({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},O("finalState",void 0,t,e))):null,b=u.getFirstDefined(t.sortable,L,!1);return i.a.createElement(he,M({key:n+"-"+t.id,className:a()(f,m&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",b&&"-cursor-pointer",!s&&"-hidden",q&&q.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:M({},p,{flex:l+" 0 auto",width:u.asPx(l),maxWidth:u.asPx(c)}),toggleSort:function(n){b&&e.sortColumn(t,!!B&&n.shiftKey)}},v),i.a.createElement("div",{className:a()(m&&"rt-resizable-header-content")},u.normalizeComponent(t.Header,{data:Ae,column:t})),_)},Je=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o=u.getFirstDefined(r.value,t.width,t.minWidth),s=u.getFirstDefined(r.value,t.width,t.maxWidth),l=u.splitProps(_(He,void 0,t,e)),c=u.splitProps(t.getHeaderProps(He,void 0,t,e)),h=[t.headerClassName,l.className,c.className],d=M({},t.headerStyle,l.style,c.style),f=M({},l.rest,c.rest),p=te.find(function(e){return e.id===t.id}),g=t.Filter||ke,v=u.getFirstDefined(t.filterable,W,!1);return i.a.createElement(he,M({key:n+"-"+t.id,className:a()(h),style:M({},d,{flex:o+" 0 auto",width:u.asPx(o),maxWidth:u.asPx(s)})},f),v?u.normalizeComponent(g,{column:t,filter:p,onChange:function(n){return e.filterColumn(t,n)}},P.column.Filter):null)},Ze=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o="function"===typeof t.show?t.show():t.show,s=u.getFirstDefined(r.value,t.width,t.minWidth),l=s,c=u.getFirstDefined(r.value,t.width,t.maxWidth),h=u.splitProps(x(He,void 0,t,e)),d=u.splitProps(t.getProps(He,void 0,t,e)),f=[h.className,t.className,d.className],p=M({},h.style,t.style,d.style);return i.a.createElement(de,M({key:n+"-"+t.id,className:a()(f,!o&&"hidden"),style:M({},p,{flex:l+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(c)})},h.rest),u.normalizeComponent(Se))},et=function(t,n){var r=y(He,void 0,void 0,e),o=u.splitProps(w(He,void 0,void 0,e));return i.a.createElement(ue,M({key:"pad-"+n},r),i.a.createElement(ce,{className:a()("-padRow",(Me.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},Ee.map(Ze)))},tt=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o="function"===typeof t.show?t.show():t.show,s=u.getFirstDefined(r.value,t.width,t.minWidth),l=u.getFirstDefined(r.value,t.width,t.maxWidth),c=u.splitProps(C(He,void 0,void 0,e)),h=u.splitProps(t.getProps(He,void 0,t,e)),d=u.splitProps(t.getFooterProps(He,void 0,t,e)),f=[c.className,t.className,h.className,d.className],p=M({},c.style,t.style,h.style,d.style);return i.a.createElement(de,M({key:n+"-"+t.id,className:a()(f,!o&&"hidden"),style:M({},p,{flex:s+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(l)})},h.rest,c.rest,d.rest),u.normalizeComponent(t.Footer,{data:Ae,column:t}))},nt=function(n){var r=u.splitProps(E(He,void 0,void 0,e));return i.a.createElement(pe,M({},t,{pages:ie,canPrevious:Be,canNext:Ue,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},rt=function(){return i.a.createElement("div",M({className:a()("ReactTable",r,qe.className),style:M({},o,qe.style)},qe.rest),z&&R?i.a.createElement("div",{className:"pagination-top"},nt(!0)):null,i.a.createElement(ae,M({className:a()(Ye.className,Oe?"rt-resizing":""),style:Ye.style},Ye.rest),Pe?function(){var t=u.splitProps(c(He,void 0,void 0,e)),n=u.splitProps(h(He,void 0,void 0,e));return i.a.createElement(se,M({className:a()("-headerGroups",t.className),style:M({},t.style,{minWidth:We+"px"})},t.rest),i.a.createElement(ce,M({className:n.className,style:n.style},n.rest),Te.map(Ge)))}():null,function(){var t=u.splitProps(f(He,void 0,void 0,e)),n=u.splitProps(p(He,void 0,void 0,e));return i.a.createElement(se,M({className:a()("-header",t.className),style:M({},t.style,{minWidth:We+"px"})},t.rest),i.a.createElement(ce,M({className:n.className,style:n.style},n.rest),Ee.map(Qe)))}(),je?function(){var t=u.splitProps(v(He,void 0,void 0,e)),n=u.splitProps(m(He,void 0,void 0,e));return i.a.createElement(se,M({className:a()("-filters",t.className),style:M({},t.style,{minWidth:We+"px"})},t.rest),i.a.createElement(ce,M({className:n.className,style:n.style},n.rest),Ee.map(Je)))}():null,i.a.createElement(le,M({className:a()($e.className),style:M({},$e.style,{minWidth:We+"px"})},$e.rest),Me.map(function(t,n){return function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={original:n[K],row:n,index:n[X],viewIndex:Ve+=1,pageSize:J,page:Z,level:o.length,nestingPath:o.concat([r]),aggregated:n[$],groupedByPivot:n[G],subRows:n[Y]},l=u.get(re,s.nestingPath),c=y(He,s,void 0,e),h=u.splitProps(w(He,s,void 0,e));return i.a.createElement(ue,M({key:s.nestingPath.join("_")},c),i.a.createElement(ce,M({className:a()(h.className,n._viewIndex%2?"-even":"-odd"),style:h.style},h.rest),Ee.map(function(t,r){var o=ne.find(function(e){return e.id===t.id})||{},c="function"===typeof t.show?t.show():t.show,h=u.getFirstDefined(o.value,t.width,t.minWidth),d=u.getFirstDefined(o.value,t.width,t.maxWidth),f=u.splitProps(x(He,s,t,e)),p=u.splitProps(t.getProps(He,s,t,e)),g=[f.className,t.className,p.className],v=M({},f.style,t.style,p.style),m=M({},s,{isExpanded:l,column:M({},t),value:s.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:c,width:h,maxWidth:d,tdProps:f,columnProps:p,classes:g,styles:v}),_=m.value,b=void 0,y=void 0,w=void 0,k=u.normalizeComponent(t.Cell,m,_),S=t.Aggregated||(t.aggregate?t.Cell:xe),C=t.Expander||be,E=t.PivotValue||ye,T=we||function(e){return i.a.createElement("div",null,i.a.createElement(C,e),i.a.createElement(E,e))},P=t.Pivot||T;(m.pivoted||m.expander)&&(m.expandable=!0,b=!0,!m.pivoted||m.subRows||ve||(m.expandable=!1)),m.pivoted?(y=s.row[V]===t.id&&m.subRows,w=q.indexOf(t.id)>q.indexOf(s.row[V])&&m.subRows,k=y?u.normalizeComponent(P,M({},m,{value:n[H]}),n[H]):w?u.normalizeComponent(S,m,_):null):m.aggregated&&(k=u.normalizeComponent(S,m,_)),m.expander&&(k=u.normalizeComponent(C,m,n[H]),q&&(m.groupedByPivot&&(k=null),m.subRows||ve||(k=null)));var A=b?function(t){var n=u.clone(re);return n=l?u.set(n,m.nestingPath,!1):u.set(n,m.nestingPath,{}),e.setStateWithData({expanded:n},function(){return oe&&oe(n,m.nestingPath,t)})}:function(){},O={onClick:A};return f.rest.onClick&&(O.onClick=function(e){f.rest.onClick(e,function(){return A(e)})}),p.rest.onClick&&(O.onClick=function(e){p.rest.onClick(e,function(){return A(e)})}),i.a.createElement(de,M({key:r+"-"+t.id,className:a()(g,!m.expandable&&!c&&"hidden",m.expandable&&"rt-expandable",(y||w)&&"rt-pivot"),style:M({},v,{flex:h+" 0 auto",width:u.asPx(h),maxWidth:u.asPx(d)})},f.rest,p.rest,O),k)})),s.subRows&&l&&s.subRows.map(function(e,n){return t(e,n,s.nestingPath)}),ve&&!s.subRows&&l&&ve(s,function(){var e=u.clone(re);u.set(e,s.nestingPath,!1)}))}(t,n)}),De.map(et)),Ie?function(){var t=u.splitProps(k(He,void 0,void 0,e)),n=u.splitProps(S(He,void 0,void 0,e));return i.a.createElement(fe,M({className:t.className,style:M({},t.style,{minWidth:We+"px"})},t.rest),i.a.createElement(ce,M({className:a()(n.className),style:n.style},n.rest),Ee.map(tt)))}():null),z&&D?i.a.createElement("div",{className:"pagination-bottom"},nt(!1)):null,!Me.length&&i.a.createElement(me,Xe,u.normalizeComponent(F)),i.a.createElement(ge,M({loading:Q,loadingText:j},Ke)))};return n?n(He,rt,this):rt()}}]),t}();D.propTypes=z,D.defaultProps=P;t.a=D},function(e,t,n){var r=n(84),i=n(94),o=!("undefined"===typeof window||!window.document||!window.document.createElement),a={Version:"1.0.0"};a.Drawer=r,a.Parser=i,a.clean=function(e){return e.replace(/[^A-Za-z0-9@\.\+\-\?!\(\)\[\]\{\}\/\\=#\$:\*]/g,"")},a.apply=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"canvas[data-smiles]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new r(e),s=document.querySelectorAll(t),l=function(){var e=s[u];a.parse(e.getAttribute("data-smiles"),function(t){o.draw(t,e,n,!1)},function(e){i&&i(e)})},u=0;u<s.length;u++)l()},a.parse=function(e,t,n){try{t&&t(i.parse(e))}catch(r){n&&n(r)}},o&&(window.SmilesDrawer=a),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1]>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],a=void 0===o?n:o>>0,s=a<0?Math.max(n+a,0):Math.min(a,n);i<s;)t[i]=e,i++;return t}}),e.exports=a},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(e,t,n){var r=n(15),i=n(16),o=n(22),a=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o(0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];r(this,e),this.from=t,this.to=n,this.elementFrom=i,this.elementTo=a,this.chiralFrom=s,this.chiralTo=l}return i(e,[{key:"clone",value:function(){return new e(this.from.clone(),this.to.clone(),this.elementFrom,this.elementTo)}},{key:"getLength",value:function(){return Math.sqrt(Math.pow(this.to.x-this.from.x,2)+Math.pow(this.to.y-this.from.y,2))}},{key:"getAngle",value:function(){return o.subtract(this.getRightVector(),this.getLeftVector()).angle()}},{key:"getRightVector",value:function(){return this.from.x<this.to.x?this.to:this.from}},{key:"getLeftVector",value:function(){return this.from.x<this.to.x?this.from:this.to}},{key:"getRightElement",value:function(){return this.from.x<this.to.x?this.elementTo:this.elementFrom}},{key:"getLeftElement",value:function(){return this.from.x<this.to.x?this.elementFrom:this.elementTo}},{key:"getRightChiral",value:function(){return this.from.x<this.to.x?this.chiralTo:this.chiralFrom}},{key:"getLeftChiral",value:function(){return this.from.x<this.to.x?this.chiralFrom:this.chiralTo}},{key:"setRightVector",value:function(e,t){return this.from.x<this.to.x?(this.to.x=e,this.to.y=t):(this.from.x=e,this.from.y=t),this}},{key:"setLeftVector",value:function(e,t){return this.from.x<this.to.x?(this.from.x=e,this.from.y=t):(this.to.x=e,this.to.y=t),this}},{key:"rotateToXAxis",value:function(){var e=this.getLeftVector();return this.setRightVector(e.x+this.getLength(),e.y),this}},{key:"rotate",value:function(e){var t=this.getLeftVector(),n=this.getRightVector(),r=Math.sin(e),i=Math.cos(e),o=i*(n.x-t.x)-r*(n.y-t.y)+t.x,a=r*(n.x-t.x)-i*(n.y-t.y)+t.y;return this.setRightVector(o,a),this}},{key:"shortenFrom",value:function(e){var t=o.subtract(this.to,this.from);return t.normalize(),t.multiplyScalar(e),this.from.add(t),this}},{key:"shortenTo",value:function(e){var t=o.subtract(this.from,this.to);return t.normalize(),t.multiplyScalar(e),this.to.add(t),this}},{key:"shortenRight",value:function(e){return this.from.x<this.to.x?this.shortenTo(e):this.shortenFrom(e),this}},{key:"shortenLeft",value:function(e){return this.from.x<this.to.x?this.shortenFrom(e):this.shortenTo(e),this}},{key:"shorten",value:function(e){var t=o.subtract(this.from,this.to);return t.normalize(),t.multiplyScalar(e/2),this.to.add(t),this.from.subtract(t),this}}]),e}();e.exports=a},function(e,t,n){var r=n(34),i=n(15),o=n(16),a=(n(23),n(26),function(){"use strict";function e(t,n){i(this,e),this.id=null,this.firstRingId=t.id,this.secondRingId=n.id,this.vertices=new Set;for(var r=0;r<t.members.length;r++)for(var o=t.members[r],a=0;a<n.members.length;a++){o===n.members[a]&&this.addVertex(o)}}return o(e,[{key:"addVertex",value:function(e){this.vertices.add(e)}},{key:"updateOther",value:function(e,t){this.firstRingId===t?this.secondRingId=e:this.firstRingId=e}},{key:"containsRing",value:function(e){return this.firstRingId===e||this.secondRingId===e}},{key:"isBridge",value:function(e){if(this.vertices.size>2)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=this.vertices[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(e[i.value].value.rings.length>2)return!0}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}}],[{key:"isBridge",value:function(e,t,n,r){for(var i=null,o=0;o<e.length;o++)if((i=e[o]).firstRingId===n&&i.secondRingId===r||i.firstRingId===r&&i.secondRingId===n)return i.isBridge(t);return!1}},{key:"getNeighbours",value:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i.firstRingId===t?n.push(i.secondRingId):i.secondRingId===t&&n.push(i.firstRingId)}return n}},{key:"getVertices",value:function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(o.firstRingId===t&&o.secondRingId===n||o.firstRingId===n&&o.secondRingId===t)return r(o.vertices)}}}]),e}());e.exports=a},function(e,t,n){var r=n(15),i=n(16),o=function(){"use strict";function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r(this,e),this.id=null,this.sourceId=t,this.targetId=n,this.weight=i,this.bondType="-",this.isPartOfAromaticRing=!1,this.center=!1,this.wedge=""}return i(e,[{key:"setBondType",value:function(t){this.bondType=t,this.weight=e.bonds[t]}}],[{key:"bonds",get:function(){return{"-":1,"/":1,"\\":1,"=":2,"#":3,$:4}}}]),e}();e.exports=o},function(e,t,n){var r=n(89),i=n(15),o=n(16),a=n(29),s=(n(22),n(23)),l=n(47),u=(n(26),n(35)),c=function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={},this.isomeric=n,this._time=0,this._init(t)}return o(e,[{key:"_init",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new u(e.atom.element?e.atom.element:e.atom,e.bond);r.branchBond=e.branchBond,r.ringbonds=e.ringbonds,r.bracket=e.atom.element?e.atom:null;var i=new s(r),o=this.vertices[t];if(this.addVertex(i),null!==t){i.setParentVertexId(t),i.value.addNeighbouringElement(o.value.element),o.addChild(i.id),o.value.addNeighbouringElement(r.element),o.spanningTreeChildren.push(i.id);var a=new l(t,i.id,1);n?(a.setBondType(i.value.branchBond||"-"),i.id,a.setBondType(i.value.branchBond||"-"),i.id):(a.setBondType(o.value.bondType||"-"),o.id);this.addEdge(a)}var c=e.ringbondCount+1;r.bracket&&(c+=r.bracket.hcount);var h=0;if(r.bracket&&r.bracket.chirality){r.isStereoCenter=!0,h=r.bracket.hcount;for(var d=0;d<h;d++)this._init({atom:"H",isBracket:"false",branches:Array(),branchCount:0,ringbonds:Array(),ringbondCount:!1,next:null,hasNext:!1,bond:"-"},d,i.id,!0)}for(d=0;d<e.branchCount;d++)this._init(e.branches[d],d+c,i.id,!0);e.hasNext&&this._init(e.next,e.branchCount+c,i.id)}},{key:"clear",value:function(){this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={}}},{key:"addVertex",value:function(e){return e.id=this.vertices.length,this.vertices.push(e),e.id}},{key:"addEdge",value:function(e){var t=this.vertices[e.sourceId],n=this.vertices[e.targetId];return e.id=this.edges.length,this.edges.push(e),this.vertexIdsToEdgeId[e.sourceId+"_"+e.targetId]=e.id,this.vertexIdsToEdgeId[e.targetId+"_"+e.sourceId]=e.id,e.isPartOfAromaticRing=t.value.isPartOfAromaticRing&&n.value.isPartOfAromaticRing,t.value.bondCount+=e.weight,n.value.bondCount+=e.weight,t.edges.push(e.id),n.edges.push(e.id),e.id}},{key:"getEdge",value:function(e,t){var n=this.vertexIdsToEdgeId[e+"_"+t];return void 0===n?null:this.edges[n]}},{key:"getEdges",value:function(e){for(var t=Array(),n=this.vertices[e],r=0;r<n.neighbours.length;r++)t.push(this.vertexIdsToEdgeId[e+"_"+n.neighbours[r]]);return t}},{key:"hasEdge",value:function(e,t){return void 0!==this.vertexIdsToEdgeId[e+"_"+t]}},{key:"getVertexList",value:function(){for(var e=[this.vertices.length],t=0;t<this.vertices.length;t++)e[t]=this.vertices[t].id;return e}},{key:"getEdgeList",value:function(){for(var e=Array(this.edges.length),t=0;t<this.edges.length;t++)e[t]=[this.edges[t].sourceId,this.edges[t].targetId];return e}},{key:"getAdjacencyMatrix",value:function(){for(var e=this.vertices.length,t=Array(e),n=0;n<e;n++)t[n]=new Array(e),t[n].fill(0);for(n=0;n<this.edges.length;n++){var r=this.edges[n];t[r.sourceId][r.targetId]=1,t[r.targetId][r.sourceId]=1}return t}},{key:"getComponentsAdjacencyMatrix",value:function(){for(var e=this.vertices.length,t=Array(e),n=this.getBridges(),r=0;r<e;r++)t[r]=new Array(e),t[r].fill(0);for(r=0;r<this.edges.length;r++){var i=this.edges[r];t[i.sourceId][i.targetId]=1,t[i.targetId][i.sourceId]=1}for(r=0;r<n.length;r++)t[n[r][0]][n[r][1]]=0,t[n[r][1]][n[r][0]]=0;return t}},{key:"getSubgraphAdjacencyMatrix",value:function(e){for(var t=e.length,n=Array(t),r=0;r<t;r++){n[r]=new Array(t),n[r].fill(0);for(var i=0;i<t;i++)r!==i&&this.hasEdge(e[r],e[i])&&(n[r][i]=1)}return n}},{key:"getDistanceMatrix",value:function(){for(var e=this.vertices.length,t=this.getAdjacencyMatrix(),n=Array(e),r=0;r<e;r++)n[r]=Array(e),n[r].fill(1/0);for(r=0;r<e;r++)for(var i=0;i<e;i++)1===t[r][i]&&(n[r][i]=1);for(var o=0;o<e;o++)for(r=0;r<e;r++)for(i=0;i<e;i++)n[r][i]>n[r][o]+n[o][i]&&(n[r][i]=n[r][o]+n[o][i]);return n}},{key:"getSubgraphDistanceMatrix",value:function(e){for(var t=e.length,n=this.getSubgraphAdjacencyMatrix(e),r=Array(t),i=0;i<t;i++)r[i]=Array(t),r[i].fill(1/0);for(i=0;i<t;i++)for(var o=0;o<t;o++)1===n[i][o]&&(r[i][o]=1);for(var a=0;a<t;a++)for(i=0;i<t;i++)for(o=0;o<t;o++)r[i][o]>r[i][a]+r[a][o]&&(r[i][o]=r[i][a]+r[a][o]);return r}},{key:"getAdjacencyList",value:function(){for(var e=this.vertices.length,t=Array(e),n=0;n<e;n++){t[n]=[];for(var r=0;r<e;r++)n!==r&&this.hasEdge(this.vertices[n].id,this.vertices[r].id)&&t[n].push(r)}return t}},{key:"getSubgraphAdjacencyList",value:function(e){for(var t=e.length,n=Array(t),r=0;r<t;r++){n[r]=Array();for(var i=0;i<t;i++)r!==i&&this.hasEdge(e[r],e[i])&&n[r].push(i)}return n}},{key:"getBridges",value:function(){var e=this.vertices.length,t=new Array(e),n=new Array(e),r=new Array(e),i=new Array(e),o=this.getAdjacencyList(),a=Array();t.fill(!1),i.fill(null),this._time=0;for(var s=0;s<e;s++)t[s]||this._bridgeDfs(s,t,n,r,i,o,a);return a}},{key:"traverseBF",value:function(e,t){var n=this.vertices.length,r=new Array(n);r.fill(!1);for(var i=[e];i.length>0;){var o=i.shift(),a=this.vertices[o];t(a);for(var s=0;s<a.neighbours.length;s++){var l=a.neighbours[s];r[l]||(r[l]=!0,i.push(l))}}}},{key:"getTreeDepth",value:function(e,t){if(null===e||null===t)return 0;for(var n=this.vertices[e].getSpanningTreeNeighbours(t),r=0,i=0;i<n.length;i++){var o=n[i],a=this.getTreeDepth(o,e);a>r&&(r=a)}return r+1}},{key:"traverseTree",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_SAFE_INTEGER,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null===a&&(a=new Uint8Array(this.vertices.length)),!(o>r+1||1===a[e])){a[e]=1;var s=this.vertices[e],l=s.getNeighbours(t);(!i||o>1)&&n(s);for(var u=0;u<l.length;u++)this.traverseTree(l[u],e,n,r,i,o+1,a)}}},{key:"kkLayout",value:function(e,t,n,i,o){for(var s=o,l=e.length;l--;)var u=this.vertices[e[l]].neighbours.length;var c=this.getSubgraphDistanceMatrix(e),h=e.length,d=a.polyCircumradius(500,h),f=a.centralAngle(h),p=0,g=new Float32Array(h),v=new Float32Array(h),m=Array(h);for(l=h;l--;){var _=this.vertices[e[l]];_.positioned?(g[l]=_.position.x,v[l]=_.position.y):(g[l]=t.x+Math.cos(p)*d,v[l]=t.y+Math.sin(p)*d),m[l]=_.positioned,p+=f}var b=Array(h);for(l=h;l--;){b[l]=new Array(h);for(u=h;u--;)b[l][u]=o*c[l][u]}var y=Array(h);for(l=h;l--;){y[l]=Array(h);for(u=h;u--;)y[l][u]=s*Math.pow(c[l][u],-2)}var w,x,k,S,C,E,T,P=Array(h),A=new Float32Array(h),O=new Float32Array(h);for(l=h;l--;)P[l]=Array(h);for(l=h;l--;){w=g[l],x=v[l],k=0,S=0;for(var z=h;z--;)l!==z&&(C=g[z],E=v[z],T=1/Math.sqrt((w-C)*(w-C)+(x-E)*(x-E)),P[l][z]=[y[l][z]*(w-C-b[l][z]*(w-C)*T),y[l][z]*(x-E-b[l][z]*(x-E)*T)],P[z][l]=P[l][z],k+=P[l][z][0],S+=P[l][z][1]);A[l]=k,O[l]=S}for(var N=function(e){return[A[e]*A[e]+O[e]*O[e],A[e],O[e]]},M=function(){var e=0,t=0,n=0,i=0;for(l=h;l--;){var o=N(l),a=r(o,3),s=a[0],u=a[1],c=a[2];s>e&&!1===m[l]&&(e=s,t=l,n=u,i=c)}return[t,e,n,i]},R=function(e,t,n){var r=0,i=0,o=0,a=g[e],s=v[e],u=b[e],c=y[e];for(l=h;l--;)if(l!==e){var d=g[l],f=v[l],p=u[l],m=c[l],_=(a-d)*(a-d),w=1/Math.pow(_+(s-f)*(s-f),1.5);r+=m*(1-p*(s-f)*(s-f)*w),i+=m*(1-p*_*w),o+=m*(p*(a-d)*(s-f)*w)}0===r&&(r=.1),0===i&&(i=.1),0===o&&(o=.1);var x=t/r+n/o,k=-(o*(x/=o/r-i/o)+t)/r;g[e]+=k,v[e]+=x;var S,C,E,T,z,N=P[e];for(t=0,n=0,a=g[e],s=v[e],l=h;l--;)e!==l&&(S=g[l],C=v[l],E=N[l][0],T=N[l][1],z=1/Math.sqrt((a-S)*(a-S)+(s-C)*(s-C)),k=c[l]*(a-S-u[l]*(a-S)*z),x=c[l]*(s-C-u[l]*(s-C)*z),N[l]=[k,x],t+=k,n+=x,A[l]+=k-E,O[l]+=x-T);A[e]=t,O[e]=n},D=1e9,I=0,j=0,F=0,L=0,B=0,U=0;D>.1&&2e3>B;){B++;var W=M(),V=r(W,4);for(I=V[0],D=V[1],j=V[2],F=V[3],L=D,U=0;L>.1&&50>U;){U++,R(I,j,F);var H=N(I),q=r(H,3);L=q[0],j=q[1],F=q[2]}}for(l=h;l--;){var Y=e[l],$=this.vertices[Y];$.position.x=g[l],$.position.y=v[l],$.positioned=!0,$.forcePositioned=!0}}},{key:"_bridgeDfs",value:function(e,t,n,r,i,o,a){t[e]=!0,n[e]=r[e]=++this._time;for(var s=0;s<o[e].length;s++){var l=o[e][s];t[l]?l!==i[e]&&(r[e]=Math.min(r[e],n[l])):(i[l]=e,this._bridgeDfs(l,t,n,r,i,o,a),r[e]=Math.min(r[e],r[l]),r[l]>n[e]&&a.push([e,l]))}}}],[{key:"getConnectedComponents",value:function(t){var n=t.length,r=new Array(n),i=new Array;r.fill(!1);for(var o=0;o<n;o++)if(!r[o]){var a=Array();r[o]=!0,a.push(o),0,e._ccGetDfs(o,r,t,a),a.length>1&&i.push(a)}return i}},{key:"getConnectedComponentCount",value:function(t){var n=t.length,r=new Array(n),i=0;r.fill(!1);for(var o=0;o<n;o++)r[o]||(r[o]=!0,i++,e._ccCountDfs(o,r,t));return i}},{key:"_ccCountDfs",value:function(t,n,r){for(var i=0;i<r[t].length;i++){r[t][i]&&!n[i]&&t!==i&&(n[i]=!0,e._ccCountDfs(i,n,r))}}},{key:"_ccGetDfs",value:function(t,n,r,i){for(var o=0;o<r[t].length;o++){r[t][o]&&!n[o]&&t!==o&&(n[o]=!0,i.push(o),e._ccGetDfs(o,n,r,i))}}}]),e}();e.exports=c},function(e,t){e.exports={version:"1.6.1",builder_embed:"svg.escher-svg .gene-label,svg.escher-svg .label{text-rendering:optimizelegibility;cursor:default}svg.escher-svg #mouse-node{fill:none}svg.escher-svg #canvas{stroke:#ccc;stroke-width:7px;fill:#fff}svg.escher-svg .resize-rect{fill:#000;opacity:0;stroke:none}svg.escher-svg .label{font-family:sans-serif;font-style:italic;font-weight:700;font-size:8px;fill:#000;stroke:none}svg.escher-svg .reaction-label{font-size:30px;fill:#202078;text-rendering:optimizelegibility}svg.escher-svg .node-label{font-size:20px}svg.escher-svg .gene-label{font-size:18px;fill:#202078}svg.escher-svg .text-label .label,svg.escher-svg .text-label-input{font-size:50px}svg.escher-svg .node-circle{stroke-width:2px}svg.escher-svg .midmarker-circle,svg.escher-svg .multimarker-circle{fill:#fff;fill-opacity:.2;stroke:#323232}svg.escher-svg g.selected .node-circle{stroke-width:6px;stroke:#1471c7}svg.escher-svg g.selected .label{fill:#1471c7}svg.escher-svg .metabolite-circle{stroke:#a24510;fill:#e0865b}svg.escher-svg g.selected .metabolite-circle{stroke:#050200}svg.escher-svg .segment{stroke:#334E75;stroke-width:10px;fill:none}svg.escher-svg .arrowhead{fill:#334E75}svg.escher-svg .stoichiometry-label-rect{fill:#fff;opacity:.5}svg.escher-svg .stoichiometry-label{fill:#334E75;font-size:17px}svg.escher-svg .membrane{fill:none;stroke:#fb0}svg.escher-svg .brush .extent{fill-opacity:.1;fill:#000;stroke:#fff;shape-rendering:crispEdges}svg.escher-svg #brush-container .background{fill:none}svg.escher-svg .bezier-circle{fill:#fff}svg.escher-svg .bezier-circle.b1{stroke:red}svg.escher-svg .bezier-circle.b2{stroke:#00f}svg.escher-svg .connect-line{stroke:#c8c8c8}svg.escher-svg .direction-arrow{stroke:#000;stroke-width:1px;fill:#fff;opacity:.3}svg.escher-svg .start-reaction-cursor{cursor:pointer}svg.escher-svg .start-reaction-target{stroke:#646464;fill:none;opacity:.5}svg.escher-svg .rotation-center-line{stroke:red;stroke-width:5px}svg.escher-svg .highlight{fill:#D97000;text-decoration:underline}svg.escher-svg .cursor-grab{cursor:grab;cursor:-webkit-grab}svg.escher-svg .cursor-grabbing{cursor:grabbing;cursor:-webkit-grabbing}svg.escher-svg .edit-text-cursor{cursor:text}"}},function(e,t){function n(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+t);return n}function r(){this.step="    ",this.shift=n(this.step)}function i(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function o(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}r.prototype.xml=function(e,t){var r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=r.length,o=!1,a=0,s="",l=0,u=t?n(t):this.shift;for(l=0;l<i;l++)r[l].search(/<!/)>-1?(s+=u[a]+r[l],o=!0,(r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1||r[l].search(/!DOCTYPE/)>-1)&&(o=!1)):r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1?(s+=r[l],o=!1):/^<\w/.exec(r[l-1])&&/^<\/\w/.exec(r[l])&&/^<[\w:\-\.\,]+/.exec(r[l-1])==/^<\/[\w:\-\.\,]+/.exec(r[l])[0].replace("/","")?(s+=r[l],o||a--):r[l].search(/<\w/)>-1&&-1==r[l].search(/<\//)&&-1==r[l].search(/\/>/)?s=s+=o?r[l]:u[a++]+r[l]:r[l].search(/<\w/)>-1&&r[l].search(/<\//)>-1?s=s+=o?r[l]:u[a]+r[l]:r[l].search(/<\//)>-1?s=s+=o?r[l]:u[--a]+r[l]:r[l].search(/\/>/)>-1?s=s+=o?r[l]:u[a]+r[l]:r[l].search(/<\?/)>-1?s+=u[a]+r[l]:r[l].search(/xmlns\:/)>-1||r[l].search(/xmlns\=/)>-1?s+=u[a]+r[l]:s+=r[l];return"\n"==s[0]?s.slice(1):s},r.prototype.json=function(e,t){t=t||this.step;return"undefined"===typeof JSON?e:"string"===typeof e?JSON.stringify(JSON.parse(e),null,t):"object"===typeof e?JSON.stringify(e,null,t):e},r.prototype.css=function(e,t){var r=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=r.length,o=0,a="",s=0,l=t?n(t):this.shift;for(s=0;s<i;s++)/\{/.exec(r[s])?a+=l[o++]+r[s]:/\}/.exec(r[s])?a+=l[--o]+r[s]:(/\*\\/.exec(r[s]),a+=l[o]+r[s]);return a.replace(/^\n{1,}/,"")},r.prototype.sql=function(e,t){var r=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),a=r.length,s=[],l=0,u=this.step,c=0,h="",d=0,f=t?n(t):this.shift;for(d=0;d<a;d++)s=d%2?s.concat(r[d]):s.concat(o(r[d],u));for(a=s.length,d=0;d<a;d++){c=i(s[d],c),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+u+u)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+u+u)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[d])?h+=f[++l]+s[d]:/\'/.exec(s[d])?(c<1&&l&&l--,h+=s[d]):(h+=f[l]+s[d],c<1&&l&&l--)}return h=h.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},r.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},r.prototype.jsonmin=function(e){return"undefined"===typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},r.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},r.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},e.exports=new r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r=n(3),i=n(20),o=n(14),a=n(41).zoom,s=(n(41).zoomTransform,n(41).zoomIdentity),l=n(2).select,u=n(2),c=r.make_class();c.prototype={init:function(e,t,n,r){e.classed("escher-container",!0),e.on("touchstart touchmove",function(){u.event.stopPropagation()}),r&&(l("html").classed("fill-screen",!0),l("body").classed("fill-screen",!0),e.classed("fill-screen-div",!0));var o=e.append("div").attr("class","escher-zoom-container"),a=o.append("div").attr("class","escher-3d-transform-container"),s=a.append("svg").attr("class","escher-svg").attr("xmlns","http://www.w3.org/2000/svg");s.select(".zoom-g").remove();var c=s.append("g").attr("class","zoom-g");this.selection=e,this.zoom_container=o,this.css3_transform_container=a,this.svg=s,this.zoomed_sel=c,this.window_translate={x:0,y:0},this.window_scale=1,this._scroll_behavior=t,this._use_3d_transform=n,this._pan_drag_on=!0,this._zoom_behavior=null,this._zoom_timeout=null,this._svg_scale=this.window_scale,this._svg_translate=this.window_translate,this.callback_manager=new i,this._update_scroll()},set_scroll_behavior:function(e){this._scroll_behavior=e,this._update_scroll()},set_use_3d_transform:function(e){this._use_3d_transform=e},_update_scroll:function(){if(!o.contains(["zoom","pan","none"],this._scroll_behavior))throw Error("Bad value for scroll_behavior: "+this._scroll_behavior);this.zoom_container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("dblclick.zoom",null).on("mousewheel.escher",null).on("DOMMouseScroll.escher",null).on("wheel.escher",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this._zoom_behavior=a().on("start",function(){u.event.sourceEvent&&"mousedown"===u.event.sourceEvent.type&&this.zoomed_sel.classed("cursor-grab",!1).classed("cursor-grabbing",!0),null!==u.event.sourceEvent&&(u.event.sourceEvent.stopPropagation(),u.event.sourceEvent.preventDefault())}.bind(this)).on("zoom",function(){this._go_to_callback(u.event.transform.k,{x:u.event.transform.x,y:u.event.transform.y})}.bind(this)).on("end",function(){u.event.sourceEvent&&"mouseup"===u.event.sourceEvent.type&&this.zoomed_sel.classed("cursor-grab",!0).classed("cursor-grabbing",!1)}.bind(this)),this.zoom_container.call(this._zoom_behavior),this.zoom_container.on("dblclick.zoom",null),this._pan_drag_on||this.zoom_container.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null);"zoom"!==this._scroll_behavior&&this.zoom_container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null);if("pan"===this._scroll_behavior){var e=function(){var e=u.event;e.stopPropagation(),e.preventDefault(),e.returnValue=!1;var t=function(e,t){var n=o.isUndefined(e)?t:-e/1.5;return.5*n},n={x:this.window_translate.x-t(e.wheelDeltaX,e.deltaX),y:this.window_translate.y-t(e.wheelDeltaY,e.deltaY)};this.go_to(this.window_scale,n)}.bind(this);this.zoom_container.on("mousewheel.escher",e),this.zoom_container.on("DOMMouseScroll.escher",e),this.zoom_container.on("wheel.escher",e)}this.go_to(this.window_scale,this.window_translate)},toggle_pan_drag:function(e){o.isUndefined(e)?this._pan_drag_on=!this._pan_drag_on:this._pan_drag_on=e;this._pan_drag_on?this.zoomed_sel.classed("cursor-grab",!0).classed("cursor-grabbing",!1):this.zoomed_sel.style("cursor",null).classed("cursor-grab",!1).classed("cursor-grabbing",!1);this._update_scroll()},go_to:function(e,t){if(r.check_undefined(arguments,["scale","translate"]),!e)throw new Error("Bad scale value");if(!t||!("x"in t)||!("y"in t)||o.isNaN(t.x)||o.isNaN(t.y))throw new Error("Bad translate value");var n=s.translate(t.x,t.y).scale(e);this.zoom_container.call(this._zoom_behavior.transform,n)},_go_to_callback:function(e,t){this.window_scale=e,this.window_translate=t,this._use_3d_transform?(o.isNull(this._zoom_timeout)||clearTimeout(this._zoom_timeout),this._go_to_3d(e,t,this._svg_scale,this._svg_translate),this._zoom_timeout=o.delay(function(){this._go_to_svg(e,t)}.bind(this),100)):this._go_to_svg(e,t);this.callback_manager.run("go_to")},_go_to_3d:function(e,t,n,i){var o=e/n,a=r.c_minus_c(t,r.c_times_scalar(i,o)),s="translate("+a.x+"px,"+a.y+"px) scale("+o+")";this.css3_transform_container.style("transform",s),this.css3_transform_container.style("-webkit-transform",s),this.css3_transform_container.style("transform-origin","0 0"),this.css3_transform_container.style("-webkit-transform-origin","0 0")},_clear_3d:function(){this.css3_transform_container.style("transform",null),this.css3_transform_container.style("-webkit-transform",null),this.css3_transform_container.style("transform-origin",null),this.css3_transform_container.style("-webkit-transform-origin",null)},_go_to_svg:function(e,t,n){this.callback_manager.run("svg_start"),o.defer(function(){this._clear_3d(),this.zoomed_sel.attr("transform","translate("+t.x+","+t.y+") scale("+e+")"),this._svg_scale=e,this._svg_translate=t,o.defer(function(){this.callback_manager.run("svg_finish"),o.isUndefined(n)||n()}.bind(this))}.bind(this))},zoom_by:function(e){var t=this.get_size(),n={x:t.width/2-((t.width/2-this.window_translate.x)*e+this.window_translate.x),y:t.height/2-((t.height/2-this.window_translate.y)*e+this.window_translate.y)};this.go_to(this.window_scale*e,r.c_plus_c(this.window_translate,n))},zoom_in:function(){this.zoom_by(1.5)},zoom_out:function(){this.zoom_by(.667)},get_size:function(){var e=parseInt(this.selection.style("width"),10),t=parseInt(this.selection.style("height"),10);if(o.isNaN(e)||o.isNaN(t))throw new Error("Size not defined for ZoomContainer element.");return{width:e,height:t}},translate_off_screen:function(e){var t=this.get_size(),n={x:{min:-this.window_translate.x/this.window_scale+120/this.window_scale,max:-this.window_translate.x/this.window_scale+(t.width-120)/this.window_scale},y:{min:-this.window_translate.y/this.window_scale+120/this.window_scale,max:-this.window_translate.y/this.window_scale+(t.height-120)/this.window_scale}};e.x<n.x.min?(this.window_translate.x=this.window_translate.x-(e.x-n.x.min)*this.window_scale,this.go_to(this.window_scale,this.window_translate)):e.x>n.x.max&&(this.window_translate.x=this.window_translate.x-(e.x-n.x.max)*this.window_scale,this.go_to(this.window_scale,this.window_translate));e.y<n.y.min?(this.window_translate.y=this.window_translate.y-(e.y-n.y.min)*this.window_scale,this.go_to(this.window_scale,this.window_translate)):e.y>n.y.max&&(this.window_translate.y=this.window_translate.y-(e.y-n.y.max)*this.window_scale,this.go_to(this.window_scale,this.window_translate))}},e.exports=c},function(e,t,n){var r=n(3),i=n(101),o=n(56),a=n(102),s=n(38),l=n(57),u=n(20),c=n(58),h=n(103),d=n(24),f=n(60),p=(n(31),n(14)),g=n(2).select,v=r.make_class();function m(){return this.data_statistics}function _(e){return function(t){return e.apply(null,t)}}function b(e){var t,n;this.deselect_text_labels(),this.sel.select("#nodes").selectAll(".node").classed("selected",function(r){var i=String(r.node_id)==String(e);return i&&(n=r,t={x:r.x,y:r.y}),i}),this.sel.selectAll(".start-reaction-target").style("visibility","hidden"),this.callback_manager.run("select_metabolite_with_id",null,n,t)}function y(e,t){this.extend_nodes(e);var n=[t];if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,n)?this.draw_all_nodes(!1):this.draw_these_nodes(n)}else this.draw_these_nodes(n)}function w(e,t,n,i){this.extend_reactions(t),r.extend(this.beziers,n),this.delete_node_data([i]),this.extend_nodes(e);var o=Object.keys(t);if(this.has_data_on_reactions){var a=!1;if(this.imported_reaction_data)a=this.apply_reaction_data_to_map(this.imported_reaction_data,o);else{if(!this.imported_gene_data)throw new Error("imported_gene_data or imported_reaction_data should not be null");a=this.apply_gene_data_to_map(this.imported_gene_data,o)}a?this.draw_all_reactions(!0,!1):this.draw_these_reactions(o)}else this.draw_these_reactions(o);var s=Object.keys(e);if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");(a=this.apply_metabolite_data_to_map(this.imported_metabolite_data,s))?this.draw_all_nodes(!1):this.draw_these_nodes(s)}else this.draw_these_nodes(s);for(var l in e){var u=e[l];if(u.node_is_primary&&l!=i){this.select_metabolite_with_id(l);var c={x:u.x,y:u.y};this.zoom_container&&this.zoom_container.translate_off_screen(c)}}}function x(){return document.fullscreenEnabled?"fullscreenchange":document.mozFullScreenEnabled?"mozfullscreenchange":document.webkitFullscreenEnabled?"webkitfullscreenchange":document.msFullscreenEnabled?"MSFullscreenChange":null}function k(e,t,n,i){e.callback_manager.run(t);var o=e.zoom_container.window_scale,a=e.zoom_container.window_translate,s=e.canvas.size_and_location(),l={w:e.canvas.mouse_node.attr("width"),h:e.canvas.mouse_node.attr("height"),transform:e.canvas.mouse_node.attr("transform")};e.zoom_container._go_to_svg(1,{x:-s.x,y:-s.y},function(){e.svg.attr("width",s.width),e.svg.attr("height",s.height),e.canvas.mouse_node.attr("width","0px"),e.canvas.mouse_node.attr("height","0px"),e.canvas.mouse_node.attr("transform",null);var t=e.sel.selectAll(".multimarker-circle,.midmarker-circle,#canvas").style("visibility","hidden");"svg"==i?r.download_svg("saved_map",e.svg,!0):"png"==i&&r.download_png("saved_map",e.svg,!0),e.zoom_container._go_to_svg(o,a,function(){e.svg.attr("width",null),e.svg.attr("height",null),e.canvas.mouse_node.attr("width",l.w),e.canvas.mouse_node.attr("height",l.h),e.canvas.mouse_node.attr("transform",l.transform),t.style("visibility",null),e.callback_manager.run(n)}.bind(e))}.bind(e))}v.from_data=function(e,t,n,i,o,a,l,u){var c=e[1].canvas,h=e[0].map_name,d=e[0].map_id,f=e[0].map_description.replace(/(\nLast Modified.*)+$/g,"")+"\nLast Modified "+Date(Date.now()).toString(),g=new v(t,n,i,o,a,l,c,u,h,d,f);for(var m in g.reactions=e[1].reactions,g.nodes=e[1].nodes,g.text_labels=e[1].text_labels,g.nodes){var _=g.nodes[m];if(_.connected_segments=[],u){if("metabolite"!==_.node_type)continue;g.search_index.insert("n"+m,{name:_.bigg_id,data:{type:"metabolite",node_id:m}}),g.search_index.insert("n_name"+m,{name:_.name,data:{type:"metabolite",node_id:m}})}}for(var b in g.reactions){var y=g.reactions[b];if(u)for(var w in g.search_index.insert("r"+b,{name:y.bigg_id,data:{type:"reaction",reaction_id:b}}),g.search_index.insert("r_name"+b,{name:y.name,data:{type:"reaction",reaction_id:b}}),y.genes){var x=y.genes[w];g.search_index.insert("r"+b+"_g"+w,{name:x.bigg_id,data:{type:"reaction",reaction_id:b}}),g.search_index.insert("r"+b+"_g_name"+w,{name:x.name,data:{type:"reaction",reaction_id:b}})}var k=[];for(var S in y.segments){var C=y.segments[S];if(C.reversibility=y.reversibility,C.from_node_id in g.nodes&&C.to_node_id in g.nodes){var E=g.nodes[C.from_node_id],T=g.nodes[C.to_node_id];y.metabolites.forEach(function(e){e.bigg_id==E.bigg_id?C.from_node_coefficient=e.coefficient:e.bigg_id==T.bigg_id&&(C.to_node_coefficient=e.coefficient)}),[E,T].forEach(function(e){e.connected_segments.push({segment_id:S,reaction_id:b})});var P=g.nodes[C.from_node_id],A=g.nodes[C.to_node_id];if("metabolite"==P.node_type||"metabolite"==A.node_type){var O=r.c_plus_c(P,r.c_times_scalar(r.c_minus_c(A,P),.5));null===C.b1&&(C.b1=O),null===C.b2&&(C.b2=O)}}else console.warn("Bad node references in segment "+S+". Deleting segment."),k.push(S)}k.forEach(function(e){delete y.segments[e]})}if(u)for(var z in g.text_labels){var N=g.text_labels[z];g.search_index.insert("l"+z,{name:N.text,data:{type:"text_label",text_label_id:z}})}g.beziers=s.new_beziers_for_reactions(g.reactions),g.largest_ids.reactions=D(g.reactions),g.largest_ids.nodes=D(g.nodes),g.largest_ids.text_labels=D(g.text_labels);var M=0;for(var R in g.reactions)M=D(g.reactions[R].segments,M);return g.largest_ids.segments=M,g.apply_reaction_data_to_map(null),g.apply_metabolite_data_to_map(null),g.apply_gene_data_to_map(null),g;function D(e,t){return p.isUndefined(t)&&(t=0),p.isUndefined(e)?t:Math.max.apply(null,Object.keys(e).map(function(e){return parseInt(e)}).concat([t]))}},v.prototype={init:function(e,t,n,s,d,g,v,_,b,y,w){if(null===v){var x=s.get_size();v={x:-x.width,y:-x.height,width:3*x.width,height:3*x.height}}b=p.isUndefined(b)||null===b||""===b?"new_map":String(b);y=p.isUndefined(y)||null===y||""===y?r.generate_map_id():String(y);w=p.isUndefined(w)||null===w?"":String(w);this.callback_manager=new u,this.svg=e,this.defs=r.setup_defs(e,t),this.canvas=new h(n,v),this.setup_containers(n),this.sel=n,this.zoom_container=s,this.settings=d,this.cobra_model=g,this.largest_ids={reactions:-1,nodes:-1,segments:-1,text_labels:-1},this.scale=new a,this.calc_data_stats("reaction"),this.calc_data_stats("metabolite"),this.scale.connect_to_settings(this.settings,this,m.bind(this)),this.undo_stack=new l,this.behavior=new o(this,this.undo_stack),this.draw=new i(this.behavior,this.settings),this.key_manager=new c,this.key_manager.ctrl_equals_cmd=!0,this.enable_search=_,this.search_index=new f,this.map_name=b,this.map_id=y,this.map_description=w;this.beziers_enabled=!1,this.has_data_on_reactions=!1,this.has_data_on_nodes=!1,this.imported_reaction_data=null,this.imported_metabolite_data=null,this.imported_gene_data=null,this.nodes={},this.reactions={},this.beziers={},this.text_labels={},this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.rotation_on=!1,this.listen_for_full_screen(function(){setTimeout(function(){this.zoom_extent_canvas()}.bind(this),50)}.bind(this))},setup_containers:function(e){e.append("g").attr("id","reactions"),e.append("g").attr("id","nodes"),e.append("g").attr("id","beziers"),e.append("g").attr("id","text-labels")},reset_containers:function(){this.sel.select("#reactions").selectAll(".reaction").remove(),this.sel.select("#nodes").selectAll(".node").remove(),this.sel.select("#beziers").selectAll(".bezier").remove(),this.sel.select("#text-labels").selectAll(".text-label").remove()},set_status:function(e,t){this.callback_manager.run("set_status",null,e),clearTimeout(this._status_timer),this._status_timer=null,void 0!==t&&(this._status_timer=setTimeout(function(){this.callback_manager.run("set_status",null,"")}.bind(this),t))},clear_map:function(){this.reactions={},this.beziers={},this.nodes={},this.text_labels={},this.map_name="new_map",this.map_id=r.generate_map_id(),this.map_description="",this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.draw_everything()},select_all:function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",!0)},select_none:function(){this.sel.selectAll(".selected").classed("selected",!1)},invert_selection:function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",function(){return!g(this).classed("selected")})},select_selectable:function(e,t,n){n=!p.isUndefined(n)&&n;var r,i=this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label");r=-1==g(e).attr("class").indexOf("text-label")?e.parentNode:e;n?g(r).classed("selected",!g(r).classed("selected")):(i.classed("selected",!1),g(r).classed("selected",!0));var o,a,s=this.sel.select("#nodes").selectAll(".selected"),l=0;s.each(function(e){a=e,o={x:e.x,y:e.y},l++}),this.callback_manager.run("select_selectable",null,l,a,o)},select_metabolite_with_id:b,select_single_node:function(){var e=null;return this.sel.select("#nodes").selectAll(".selected").classed("selected",function(t,n){return 0===n&&(e=t,!0)}),e},deselect_nodes:function(){this.sel.select("#nodes").selectAll(".node").classed("selected",!1),this.callback_manager.run("deselect_nodes")},select_text_label:function(e,t){this.deselect_nodes(),this.sel.select("#text-labels").selectAll(".text-label").classed("selected",function(e){return t===e}),this.sel.select("#text-labels").selectAll(".selected").each(function(e){({x:e.x,y:e.y})}),this.callback_manager.run("select_text_label")},deselect_text_labels:function(){this.sel.select("#text-labels").selectAll(".text-label").classed("selected",!1)},new_reaction_from_scratch:function(e,t,n){if(!this.cobra_model)return void console.error("No CobraModel. Cannot build new reaction");var i=r.clone(this.cobra_model.reactions[e]);if(0===p.size(i.metabolites))throw Error("No metabolites in reaction "+i.bigg_id);var o=p.map(i.metabolites,function(e,t){return[e,t]}).filter(function(e){return e[0]<0}).map(function(e){return e[1]}),a=o.length>0?o[0]:Object.keys(i.metabolites)[0],l=this.cobra_model.metabolites[a],u=String(++this.largest_ids.nodes),c=s.get_met_label_loc(Math.PI/180*n,0,1,!0,a),h={connected_segments:[],x:t.x,y:t.y,node_is_primary:!0,label_x:t.x+c.x,label_y:t.y+c.y,name:l.name,bigg_id:a,node_type:"metabolite"},d={};d[u]=h,y.apply(this,[d,u]);var f=r.clone(d),g=this.new_reaction_for_metabolite(e,u,n,!1),v=g.redo,m=g.undo;return void this.undo_stack.push(function(){m(),this.delete_node_data(Object.keys(d)),d=r.clone(f),this.clear_deleted_nodes(),this.deselect_nodes()}.bind(this),function(){y.apply(this,[d,u]),v()}.bind(this))},extend_nodes:function(e){if(this.enable_search)for(var t in e){var n=e[t];"metabolite"==n.node_type&&(this.search_index.insert("n"+t,{name:n.bigg_id,data:{type:"metabolite",node_id:t}}),this.search_index.insert("n_name"+t,{name:n.name,data:{type:"metabolite",node_id:t}}))}r.extend(this.nodes,e)},extend_reactions:function(e){if(this.enable_search)for(var t in e){var n=e[t];for(var i in this.search_index.insert("r"+t,{name:n.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r_name"+t,{name:n.name,data:{type:"reaction",reaction_id:t}}),n.genes){var o=n.genes[i];this.search_index.insert("r"+t+"_g"+i,{name:o.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r"+t+"_g_name"+i,{name:o.name,data:{type:"reaction",reaction_id:t}})}}r.extend(this.reactions,e)},new_reaction_for_metabolite:function(e,t,n,i){void 0===i&&(i=!0);var o=this.nodes[t],a=this.cobra_model.reactions[e],l=s.new_reaction(e,a,this.cobra_model.metabolites,t,r.clone(o),this.largest_ids,this.settings.get_option("cofactors"),n),u=l.new_nodes,c=l.new_reactions,h=l.new_beziers;w.apply(this,[u,c,h,t]);var d=r.clone(u),f=r.clone(c),p=r.clone(h),g=function(){if(delete u[t],this.delete_node_data(Object.keys(u)),this.delete_reaction_data(Object.keys(c)),b.apply(this,[t]),u=r.clone(d),c=r.clone(f),h=r.clone(p),this.has_data_on_reactions){var e=this.calc_data_stats("reaction");e?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(!0)}else this.clear_deleted_reactions(!0);if(this.has_data_on_nodes){var e=this.calc_data_stats("metabolite");e?this.draw_all_nodes(!0):this.clear_deleted_nodes()}else this.clear_deleted_nodes()}.bind(this),v=function(){w.apply(this,[u,c,h,t])}.bind(this);i&&this.undo_stack.push(g,v);return{undo:g,redo:v}},cycle_primary_node:function(){var e,t=this.get_selected_nodes(),n=Object.keys(t)[0],r=(t[n],this.reactions),i=this.nodes,o=[];if(i[n].connected_segments.forEach(function(t){var i;e=[t.reaction_id];try{if(void 0===(i=r[t.reaction_id].segments[t.segment_id]))throw new Error("undefined segment")}catch(a){return void console.warn("Could not find connected segment "+t.segment_id)}o.push(i.from_node_id==n?i.to_node_id:i.from_node_id)}),1!=o.length)return void console.error("Only connected nodes with a single reaction can be selected");var a=o[0],s=[n];i[a].connected_segments.forEach(function(e){var t;try{if(void 0===(t=r[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(u){return void console.warn("Could not find connected segment "+e.segment_id)}var o=t.from_node_id==a?t.to_node_id:t.from_node_id,l=i[o];"metabolite"==l.node_type&&o!=n&&s.push(String(o))});for(var l=0;l<s.length;l++)if(i[s[l]].connected_segments.length>1)return void console.error("Only connected nodes with a single reaction can be selected");for(var u in t)if(u!=n&&-1==s.indexOf(u))return void console.warn("Selected nodes are not on the same reaction");var c=[],h=s.length-1,d=i[s[h]],f=d.node_is_primary,p={x:d.x,y:d.y,label_x:d.label_x,label_y:d.label_y};d.connected_segments.length>1&&console.warn("Too many connected segments for node "+d.node_id);var g,v=d.connected_segments[0];try{if(void 0===(g=r[v.reaction_id].segments[v.segment_id]))throw new Error("undefined segment")}catch(w){return void console.error("Could not find connected segment "+v.segment_id)}var m,_={b1:g.b1,b2:g.b2};s.forEach(function(e){var t=i[e],n=t.node_is_primary,o={x:t.x,y:t.y,label_x:t.label_x,label_y:t.label_y},a=t.connected_segments[0],s=r[a.reaction_id].segments[a.segment_id],l={b1:s.b1,b2:s.b2};t.node_is_primary=f,t.x=p.x,t.y=p.y,t.label_x=p.label_x,t.label_y=p.label_y,s.b1=_.b1,s.b2=_.b2,f=n,p=o,_=l,t.node_is_primary&&(m=e),c.push(e)});var b=i[a].connected_segments,h=b.length-1,y=[b[h]];return b.forEach(function(e,t){h!=t&&y.push(e)}),i[a].connected_segments=y,this.draw_these_nodes(c),this.draw_these_reactions(e),void this.select_metabolite_with_id(m)},toggle_selected_node_primary:function(){var e=this.get_selected_node_ids(),t=function(e){var t={},n=this.settings.get_option("hide_secondary_metabolites");if(e.forEach(function(e){if(e in this.nodes){var n=this.nodes[e];"metabolite"==n.node_type&&(n.node_is_primary=!n.node_is_primary,t[e]=n)}else console.warn("Could not find node: "+e)}.bind(this)),this.draw_these_nodes(Object.keys(t)),n){var r=this.segments_and_reactions_for_nodes(t),i={};for(var o in r.segment_objs_w_segments){var a=r.segment_objs_w_segments[o].reaction_id;i[a]=!0}this.draw_these_reactions(Object.keys(i))}}.bind(this);t(e),this.undo_stack.push(function(){t(e)},function(){t(e)})},add_label_to_search_index:function(e,t){this.search_index.insert("l"+e,{name:t,data:{type:"text_label",text_label_id:e}})},new_text_label:function(e,t){var n=s.new_text_label(this.largest_ids,t,e);this.text_labels[n.id]=n.label,this.draw_these_text_labels([n.id]),""!==t&&this.add_label_to_search_index(n.id,t);return n.id},edit_text_label:function(e,t,n,i){p.isUndefined(i)&&(i=!1);if(""===t)throw new Error("Should not be called for empty string");var o=function(t,n){var r=this.text_labels[e];r.text=t,n&&this.draw_these_text_labels([e]);var o="l"+e,a=this.search_index.remove(o);i||a||console.warn("Could not find modified text label in search index"),this.search_index.insert(o,{name:t,data:{type:"text_label",text_label_id:e}})}.bind(this),a=r.clone(this.text_labels[e]);o(t,n),this.undo_stack.push(function(){i?(this.delete_text_label_data([e]),this.clear_deleted_text_labels()):o(a.text,!0)}.bind(this),function(){i?(this.text_labels[e]=r.clone(a),this.text_labels[e].text=t,this.draw_these_text_labels([e]),this.add_label_to_search_index(e,t)):o(t,!0)}.bind(this))},delete_selected:function(){var e=this.get_selected_nodes(),t=this.get_selected_text_labels();(Object.keys(e).length>=1||Object.keys(t).length>=1)&&this.delete_selectable(e,t,!0)},delete_selectable:function(e,t,n){var i=this.segments_and_reactions_for_nodes(e),o=i.segment_objs_w_segments,a=i.reactions,l=r.clone(e),u=r.clone(o),c=r.clone(a),h=r.clone(t),d=function(t,r,i,o){this.delete_node_data(Object.keys(e)),this.delete_segment_data(i),this.delete_reaction_data(Object.keys(r)),this.delete_text_label_data(Object.keys(o));var a=!1,s=!1;this.has_data_on_reactions&&(a=this.calc_data_stats("reaction")),this.has_data_on_nodes&&(s=this.calc_data_stats("metabolite")),n&&(a?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(),s?this.draw_all_nodes(!0):this.clear_deleted_nodes(),this.clear_deleted_text_labels())}.bind(this);d(e,a,o,t),this.undo_stack.push(function(){this.extend_nodes(l),this.extend_reactions(c);var i=Object.keys(c);for(var d in u){var f=u[d],p=f.segment;this.reactions[f.reaction_id].segments[f.segment_id]=p;var g=[p.from_node_id,p.to_node_id];g.forEach(function(e){if(!(e in l)){var t=this.nodes[e];t.connected_segments.push({reaction_id:f.reaction_id,segment_id:f.segment_id})}}.bind(this));var v=f.segment_id,m=f.reaction_id,_={};_[v]=f.segment,r.extend(this.beziers,s.new_beziers_for_segments(_,m)),-1===i.indexOf(f.reaction_id)&&i.push(f.reaction_id)}if(this.has_data_on_reactions){var b=this.calc_data_stats("reaction");b?this.draw_all_reactions(!0,!1):this.draw_these_reactions(i)}else n&&this.draw_these_reactions(i);if(this.has_data_on_nodes){var b=this.calc_data_stats("metabolite");n&&(b?this.draw_all_nodes(!1):this.draw_these_nodes(Object.keys(l)))}else n&&this.draw_these_nodes(Object.keys(l));r.extend(this.text_labels,h),n&&this.draw_these_text_labels(Object.keys(h)),t=r.clone(h),e=r.clone(l),o=r.clone(u),a=r.clone(c)}.bind(this),function(){d(e,a,o,t)}.bind(this))},delete_node_data:function(e){e.forEach(function(e){if(this.enable_search&&"metabolite"==this.nodes[e].node_type){var t=this.search_index.remove("n"+e)&&this.search_index.remove("n_name"+e);t||console.warn("Could not find deleted metabolite in search index")}delete this.nodes[e]}.bind(this))},delete_segment_data:function(e){for(var t in e){var n=e[t],r=this.reactions[n.reaction_id];if(!(n.segment_id in r.segments))return;var i=r.segments[n.segment_id];[i.from_node_id,i.to_node_id].forEach(function(e){if(e in this.nodes){var t=this.nodes[e];t.connected_segments=t.connected_segments.filter(function(e){return e.segment_id!=n.segment_id})}}.bind(this)),["b1","b2"].forEach(function(e){var t=s.bezier_id_for_segment_id(n.segment_id,e);delete this.beziers[t]}.bind(this)),delete r.segments[n.segment_id]}},delete_reaction_data:function(e){e.forEach(function(e){var t=this.reactions[e];for(var n in t.segments)["b1","b2"].forEach(function(e){var t=s.bezier_id_for_segment_id(n,e);delete this.beziers[t]}.bind(this));delete this.reactions[e];var r=this.search_index.remove("r"+e)&&this.search_index.remove("r_name"+e);for(var i in r||console.warn("Could not find deleted reaction "+e+" in search index"),t.genes){var r=this.search_index.remove("r"+e+"_g"+i)&&this.search_index.remove("r"+e+"_g_name"+i);r||console.warn("Could not find deleted gene "+i+" in search index")}}.bind(this))},delete_text_label_data:function(e){e.forEach(function(e){delete this.text_labels[e];var t=this.search_index.remove("l"+e);t||console.warn("Could not find deleted text label in search index")}.bind(this))},get_selected_node_ids:function(){var e=[];return this.sel.select("#nodes").selectAll(".selected").each(function(t){e.push(t.node_id)}),e},get_selected_nodes:function(){var e={};return this.sel.select("#nodes").selectAll(".selected").each(function(t){e[t.node_id]=this.nodes[t.node_id]}.bind(this)),e},get_selected_text_label_ids:function(){var e=[];return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e.push(t.text_label_id)}),e},get_selected_text_labels:function(){var e={};return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e[t.text_label_id]=this.text_labels[t.text_label_id]}.bind(this)),e},segments_and_reactions_for_nodes:function(e){var t={},n={},i={},o=this.reactions;for(var a in e){var s=e[a];s.connected_segments.forEach(function(e){var n;try{if(void 0===(n=o[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(s){return void console.warn("Could not find connected segments for node")}var a=r.clone(e);a.segment=r.clone(n),t[e.segment_id]=a,e.reaction_id in i||(i[e.reaction_id]=[]),i[e.reaction_id].push(e.segment_id)})}for(var l in i){var u=o[l],c=i[l],h=!0;for(var d in u.segments)-1==c.indexOf(d)&&(h=!1);h&&(n[l]=u)}return{segment_objs_w_segments:t,reactions:n}},draw_everything:function(){this.draw_all_reactions(!0,!0),this.draw_all_nodes(!0),this.draw_all_text_labels()},draw_all_reactions:function(e,t){p.isUndefined(e)&&(e=!0);p.isUndefined(t)&&(t=!0);var n=[];for(var r in this.reactions)n.push(r);this.draw_these_reactions(n,!1),e&&this.beziers_enabled&&this.draw_all_beziers();t&&this.clear_deleted_reactions(e)},draw_these_reactions:function(e,t){p.isUndefined(t)&&(t=!0);var n=r.object_slice_for_ids_ref(this.reactions,e),i=function(e){return this.draw.update_reaction(e,this.scale,this.cobra_model,this.nodes,this.defs,this.has_data_on_reactions)}.bind(this);if(r.draw_an_object(this.sel,"#reactions",".reaction",n,"reaction_id",this.draw.create_reaction.bind(this.draw),i),t){var o=s.bezier_ids_for_reaction_ids(n);this.draw_these_beziers(o)}},clear_deleted_reactions:function(e){p.isUndefined(e)&&(e=!0);r.draw_an_object(this.sel,"#reactions",".reaction",this.reactions,"reaction_id",null,function(e){r.draw_a_nested_object(e,".segment-group","segments","segment_id",null,null,function(e){e.remove()})},function(e){e.remove()}),!0===e&&this.clear_deleted_beziers()},draw_all_nodes:function(e){void 0===e&&(e=!0);var t=[];for(var n in this.nodes)t.push(n);this.draw_these_nodes(t),e&&this.clear_deleted_nodes()},draw_these_nodes:function(e){var t=r.object_slice_for_ids_ref(this.nodes,e),n=function(e){return this.draw.create_node(e,this.nodes,this.reactions)}.bind(this),i=function(e){return this.draw.update_node(e,this.scale,this.has_data_on_nodes,this.behavior.selectable_mousedown,this.behavior.selectable_click,this.behavior.node_mouseover,this.behavior.node_mouseout,this.behavior.selectable_drag,this.behavior.node_label_drag)}.bind(this);r.draw_an_object(this.sel,"#nodes",".node",t,"node_id",n,i)},clear_deleted_nodes:function(){r.draw_an_object(this.sel,"#nodes",".node",this.nodes,"node_id",null,null,function(e){e.remove()})},draw_all_text_labels:function(){this.draw_these_text_labels(Object.keys(this.text_labels)),this.clear_deleted_text_labels()},draw_these_text_labels:function(e){var t=r.object_slice_for_ids_ref(this.text_labels,e);r.draw_an_object(this.sel,"#text-labels",".text-label",t,"text_label_id",this.draw.create_text_label.bind(this.draw),this.draw.update_text_label.bind(this.draw))},clear_deleted_text_labels:function(){r.draw_an_object(this.sel,"#text-labels",".text-label",this.text_labels,"text_label_id",null,null,function(e){e.remove()})},draw_all_beziers:function(){var e=[];for(var t in this.beziers)e.push(t);this.draw_these_beziers(e),this.clear_deleted_beziers()},draw_these_beziers:function(e){var t=r.object_slice_for_ids_ref(this.beziers,e),n=function(e){return this.draw.update_bezier(e,this.beziers_enabled,this.behavior.bezier_drag,this.behavior.bezier_mouseover,this.behavior.bezier_mouseout,this.nodes,this.reactions)}.bind(this);r.draw_an_object(this.sel,"#beziers",".bezier",t,"bezier_id",this.draw.create_bezier.bind(this.draw),n)},clear_deleted_beziers:function(){r.draw_an_object(this.sel,"#beziers",".bezier",this.beziers,"bezier_id",null,null,function(e){e.remove()})},toggle_beziers:function(e){p.isUndefined(e)?this.beziers_enabled=!this.beziers_enabled:this.beziers_enabled=e;this.draw_all_beziers(),this.callback_manager.run("toggle_beziers",null,this.beziers_enabled)},hide_beziers:function(){this.toggle_beziers(!1)},show_beziers:function(){this.toggle_beziers(!0)},has_cobra_model:function(){return null!==this.cobra_model},apply_reaction_data_to_map:function(e,t){var n=this.settings.get_option("reaction_styles"),r=this.settings.get_option("reaction_compare_style"),i=d.apply_reaction_data_to_reactions(this.reactions,e,n,r,t);return this.has_data_on_reactions=i,this.imported_reaction_data=i?e:null,this.calc_data_stats("reaction")},apply_metabolite_data_to_map:function(e,t){var n=this.settings.get_option("metabolite_styles"),r=this.settings.get_option("metabolite_compare_style"),i=d.apply_metabolite_data_to_nodes(this.nodes,e,n,r,t);return this.has_data_on_nodes=i,this.imported_metabolite_data=i?e:null,this.calc_data_stats("metabolite")},apply_gene_data_to_map:function(e,t){var n=this.settings.get_option("reaction_styles"),r=this.settings.get_option("reaction_compare_style"),i=this.settings.get_option("identifiers_on_map"),o=this.settings.get_option("and_method_in_gene_reaction_rule"),a=d.apply_gene_data_to_reactions(this.reactions,e,n,i,r,o,t);return this.has_data_on_reactions=a,this.imported_gene_data=a?e:null,this.calc_data_stats("reaction")},get_data_statistics:m,calc_data_stats:function(e){if(-1===["reaction","metabolite"].indexOf(e))throw new Error("Bad type "+e);"data_statistics"in this?e in this.data_statistics||(this.data_statistics[e]={}):(this.data_statistics={},this.data_statistics[e]={});var t=!0,n=[];if("metabolite"===e)for(var i in this.nodes){var o=this.nodes[i];p.isUndefined(o.data)?console.error("metabolite missing "):null!==o.data&&n.push(o.data)}else if("reaction"==e)for(var a in this.reactions){var s=this.reactions[a];p.isUndefined(s.data)?console.error("reaction data missing "):null!==s.data&&n.push(s.data)}var l=r.quartiles(n);if([["min",_(Math.min)],["max",_(Math.max)],["mean",r.mean],["Q1",function(){return l[0]}],["median",function(){return l[1]}],["Q3",function(){return l[2]}]].forEach(function(r){var i,o=r[0];(i=0===n.length?null:(0,r[1])(n))!=this.data_statistics[e][o]&&(t=!1),this.data_statistics[e][o]=i}.bind(this)),this.data_statistics[e].min===this.data_statistics[e].max&&null!==this.data_statistics[e].min){var u=this.data_statistics[e].min,c=this.data_statistics[e].max;this.data_statistics[e].min=u-1-.1*Math.abs(u),this.data_statistics[e].max=c+1+.1*Math.abs(c)}"reaction"===e?this.callback_manager.run("calc_data_stats__reaction",null,!t):this.callback_manager.run("calc_data_stats__metabolite",null,!t);return!t},zoom_extent_nodes:function(e){this._zoom_extent(e,"nodes")},zoom_extent_canvas:function(e){this._zoom_extent(e,"canvas")},_zoom_extent:function(e,t){p.isUndefined(e)&&(e="nodes"===t?.2:0);p.isUndefined(t)&&(t="canvas");var n,r,i=this.get_size();if(e*=i.height,"nodes"===t){var o={x:null,y:null},a={x:null,y:null};for(var s in this.nodes){var l=this.nodes[s];null===o.x&&(o.x=l.x),null===o.y&&(o.y=l.y),null===a.x&&(a.x=l.x),null===a.y&&(a.y=l.y),o.x=Math.min(o.x,l.x),o.y=Math.min(o.y,l.y),a.x=Math.max(a.x,l.x),a.y=Math.max(a.y,l.y)}n=Math.min((i.width-2*e)/(a.x-o.x),(i.height-2*e)/(a.y-o.y)),r={x:-o.x*n+e+(i.width-2*e-(a.x-o.x)*n)/2,y:-o.y*n+e+(i.height-2*e-(a.y-o.y)*n)/2}}else{if("canvas"!=t)return console.error("Did not recognize mode");n=Math.min((i.width-2*e)/this.canvas.width,(i.height-2*e)/this.canvas.height),r={x:-this.canvas.x*n+e+(i.width-2*e-this.canvas.width*n)/2,y:-this.canvas.y*n+e+(i.height-2*e-this.canvas.height*n)/2}}return this.zoom_container.go_to(n,r),null},get_size:function(){return this.zoom_container.get_size()},zoom_to_reaction:function(e){var t=this.reactions[e],n=this.get_size(),r={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoom_container.go_to(.5,r)},zoom_to_node:function(e){var t=this.nodes[e],n=this.get_size(),r={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoom_container.go_to(.5,r)},zoom_to_text_label:function(e){var t=this.text_labels[e],n=this.get_size(),r={x:.5*-t.x+n.width/2,y:.5*-t.y+n.height/2};this.zoom_container.go_to(.5,r)},highlight_reaction:function(e){this.highlight(this.sel.selectAll("#r"+e).selectAll("text"))},highlight_node:function(e){this.highlight(this.sel.selectAll("#n"+e).selectAll("text"))},highlight_text_label:function(e){this.highlight(this.sel.selectAll("#l"+e).selectAll("text"))},highlight:function(e){this.sel.selectAll(".highlight").classed("highlight",!1),null!==e&&e.classed("highlight",!0)},listen_for_full_screen:function(e){document.addEventListener(x(),e),this.full_screen_listener=e},unlisten_for_full_screen:function(){document.removeEventListener(x(),this.full_screen_listener)},full_screen:function(){var e=this.zoom_container.selection,t=e.node(),n=document;if(n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement)if(e.classed("full-screen-on",!1),n.exitFullscreen)n.exitFullscreen();else if(n.mozCancelFullScreen)n.mozCancelFullScreen();else if(n.webkitExitFullscreen)n.webkitExitFullscreen();else{if(!n.msExitFullscreen)throw Error("Cannot exit full screen");n.msExitFullscreen()}else if(e.classed("full-screen-on",!0),t.requestFullscreen)t.requestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else{if(!t.msRequestFullscreen)throw Error("Full screen does not seem to be supported on this system.");t.msRequestFullscreen()}},save:function(){r.download_json(this.map_for_export(),this.map_name)},map_for_export:function(){var e=[{map_name:this.map_name,map_id:this.map_id,map_description:this.map_description,homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:r.clone(this.reactions),nodes:r.clone(this.nodes),text_labels:r.clone(this.text_labels),canvas:this.canvas.size_and_location()}];for(var t in e[1].reactions){var n=e[1].reactions[t],i={},o=["name","bigg_id","reversibility","label_x","label_y","gene_reaction_rule","genes","metabolites"];for(var a in o.forEach(function(e){i[e]=n[e]}),i.segments={},n.segments){var s=n.segments[a],l={},o=["from_node_id","to_node_id","b1","b2"];o.forEach(function(e){l[e]=s[e]}),i.segments[a]=l}e[1].reactions[t]=i}for(var u in e[1].nodes){var c=e[1].nodes[u],h={};(o="metabolite"===c.node_type?["node_type","x","y","bigg_id","name","label_x","label_y","node_is_primary"]:["node_type","x","y"]).forEach(function(e){h[e]=c[e]}),e[1].nodes[u]=h}for(var d in e[1].text_labels){var f=e[1].text_labels[d],p={},o=["x","y","text"];o.forEach(function(e){p[e]=f[e]}),e[1].text_labels[d]=p}var g=e[1].canvas,v={};return(o=["x","y","width","height"]).forEach(function(e){v[e]=g[e]}),e[1].canvas=v,e},save_svg:function(){k(this,"before_svg_export","after_svg_export","svg")},save_png:function(){k(this,"before_png_export","after_png_export","png")},convert_map:function(){if(this.callback_manager.run("before_convert_map"),!this.has_cobra_model())throw Error("No COBRA model loaded.");var e,t=this.cobra_model,n={},r=["name","gene_reaction_rule","genes"],i={},o=["name"];for(var a in this.reactions){var s=this.reactions[a];for(var l in e=!1,t.reactions){var u=t.reactions[l];u.bigg_id==s.bigg_id&&(r.forEach(function(e){s[e]=u[e]}),e=!0)}e||(n[a]=!0)}for(var c in this.nodes){var h=this.nodes[c];if("metabolite"==h.node_type){for(var d in e=!1,t.metabolites){var f=t.metabolites[d];f.bigg_id==h.bigg_id&&(o.forEach(function(e){h[e]=f[e]}),e=!0)}e||(i[c]=!0)}}var p=Object.keys(n).length,g=Object.keys(i).length;0===p&&0===g?this.set_status("Successfully converted attributes.",3e3):0===g?(this.set_status("Converted attributes, but count not find "+p+" reactions in the model.",3e3),this.settings.set_conditional("highlight_missing",!0)):0===p?(this.set_status("Converted attributes, but count not find "+g+" metabolites in the model.",3e3),this.settings.set_conditional("highlight_missing",!0)):(this.set_status("Converted attributes, but count not find "+p+" reactions and "+g+" metabolites in the model.",3e3),this.settings.set_conditional("highlight_missing",!0));this.draw_everything(),this.callback_manager.run("after_convert_map")}},e.exports=v},function(e,t,n){var r=n(3),i=n(38),o=n(18).drag,a=n(2).select,s=n(2).mouse,l=n(2),u=r.make_class();u.prototype={init:function(e,t){this.map=e,this.undo_stack=t,this.empty_behavior=function(){},this.rotation_mode_enabled=!1,this.rotation_drag=o(),this.selectable_mousedown=null,this.text_label_mousedown=null,this.text_label_click=null,this.selectable_drag=this.empty_behavior,this.node_mouseover=null,this.node_mouseout=null,this.label_mousedown=null,this.label_mouseover=null,this.label_mouseout=null,this.bezier_drag=this.empty_behavior,this.bezier_mouseover=null,this.bezier_mouseout=null,this.reaction_label_drag=this.empty_behavior,this.node_label_drag=this.empty_behavior,this.dragging=!1,this.turn_everything_on()},toggle_rotation_mode:function(e){this.rotation_mode_enabled=void 0===e?!this.rotation_mode_enabled:e;var t=this.map.sel.selectAll(".node-circle"),n=this.map.sel.selectAll("#canvas");if(this.rotation_mode_enabled){this.map.callback_manager.run("start_rotation");var a=this.map.get_selected_nodes();if(0===Object.keys(a).length)return void console.warn("No selected nodes");this.center=function(e){var t=[],n=[];for(var i in e){var o=e[i];void 0!==o.x&&t.push(o.x),void 0!==o.y&&n.push(o.y)}return{x:r.mean(t),y:r.mean(n)}}(a),function(){var e=this.map.sel.selectAll("#rotation-center").data([0]),t=e.enter().append("g").attr("id","rotation-center");t.append("path").attr("d","M-32 0 L32 0").attr("class","rotation-center-line"),t.append("path").attr("d","M0 -32 L0 32").attr("class","rotation-center-line");var n=t.merge(e);n.attr("transform","translate("+this.center.x+","+this.center.y+")").attr("visibility","visible").on("mouseover",function(){var e=parseFloat(n.selectAll("path").style("stroke-width"));n.selectAll("path").style("stroke-width",2*e+"px")}).on("mouseout",function(){n.selectAll("path").style("stroke-width",null)}).call(o().on("drag",function(){var e=r.d3_transform_catch(n.attr("transform")),t=[l.event.dx+e.translate[0],l.event.dy+e.translate[1]];n.attr("transform","translate("+t+")"),this.center={x:t[0],y:t[1]}}.bind(this)))}.call(this);var s=this.map,u=Object.keys(a),c=this.map.reactions,h=this.map.nodes,d=this.map.beziers,f=function(){return this.center}.bind(this);this.rotation_drag=this._get_generic_angular_drag(function(e){l.event.sourceEvent.stopPropagation()},function(e,t,n,r){var o=i.rotate_nodes(a,c,d,t,r);s.draw_these_nodes(o.node_ids),s.draw_these_reactions(o.reaction_ids)},function(e){},function(e,t,n){var r={};u.forEach(function(e){r[e]=h[e]});var o=i.rotate_nodes(r,c,d,-t,n);s.draw_these_nodes(o.node_ids),s.draw_these_reactions(o.reaction_ids)},function(e,t,n){var r={};u.forEach(function(e){r[e]=h[e]});var o=i.rotate_nodes(r,c,d,t,n);s.draw_these_nodes(o.node_ids),s.draw_these_reactions(o.reaction_ids)},f,this.map.sel),n.call(this.rotation_drag),this.selectable_drag=this.rotation_drag}else(function(e){this.map.sel.select("#rotation-center").attr("visibility","hidden")}).call(this),t.on("mousedown.center",null),n.on("mousedown.center",null),n.on("mousedown.drag",null),n.on("touchstart.drag",null),this.rotation_drag=null,this.selectable_drag=null},turn_everything_on:function(){this.toggle_selectable_click(!0),this.toggle_selectable_drag(!0),this.toggle_label_drag(!0),this.toggle_label_mouseover(!0)},turn_everything_off:function(){this.toggle_selectable_click(!1),this.toggle_selectable_drag(!1),this.toggle_label_drag(!1),this.toggle_label_mouseover(!1)},toggle_selectable_click:function(e){void 0===e&&(e=null===this.selectable_mousedown);if(e){var t=this.map;this.selectable_mousedown=function(e){l.event.stopPropagation()},this.selectable_click=function(e){l.event.stopPropagation(),l.event.defaultPrevented||t.select_selectable(this,e,l.event.shiftKey)},this.node_mouseover=function(e){a(this).style("stroke-width",null);var t=parseFloat(a(this).style("stroke-width"));a(this.parentNode).classed("selected")||a(this).style("stroke-width",3*t+"px")},this.node_mouseout=function(e){a(this).style("stroke-width",null)}}else this.selectable_mousedown=null,this.selectable_click=null,this.node_mouseover=null,this.node_mouseout=null,this.map.sel.select("#nodes").selectAll(".node-circle").style("stroke-width",null)},toggle_text_label_edit:function(e){void 0===e&&(e=null==this.text_edit_mousedown);if(e){var t=this.map;this.selection;this.text_label_mousedown=function(){if(!l.event.defaultPrevented){var e=r.d3_transform_catch(a(this).attr("transform")).translate,n={x:e[0],y:e[1]};t.callback_manager.run("edit_text_label",null,a(this),n),l.event.stopPropagation()}},this.text_label_click=null,this.map.sel.select("#text-labels").selectAll(".label").classed("edit-text-cursor",!0),this.map.sel.on("mousedown.new_text_label",function(e){l.event.preventDefault();var t={x:s(e)[0],y:s(e)[1]};this.map.callback_manager.run("new_text_label",null,t)}.bind(this,this.map.sel.node()))}else this.text_label_mousedown=this.selectable_mousedown,this.text_label_click=this.selectable_click,this.map.sel.select("#text-labels").selectAll(".label").classed("edit-text-cursor",!1),this.map.sel.on("mousedown.new_text_label",null),this.map.callback_manager.run("hide_text_label_editor")},toggle_selectable_drag:function(e){void 0===e&&(e=this.selectable_drag===this.empty_behavior);e?(this.selectable_drag=this._get_selectable_drag(this.map,this.undo_stack),this.bezier_drag=this._get_bezier_drag(this.map,this.undo_stack)):(this.selectable_drag=this.empty_behavior,this.bezier_drag=this.empty_behavior)},toggle_label_drag:function(e){void 0===e&&(e=this.label_drag===this.empty_behavior);e?(this.reaction_label_drag=this._get_reaction_label_drag(this.map),this.node_label_drag=this._get_node_label_drag(this.map)):(this.reaction_label_drag=this.empty_behavior,this.node_label_drag=this.empty_behavior)},toggle_label_mouseover:function(e){void 0===e&&(e=null===this.label_mouseover);e?(this.label_mouseover=function(e,t){this.dragging||this.map.callback_manager.run("show_tooltip",null,e,t)}.bind(this),this.label_mouseout=function(){this.map.callback_manager.run("delay_hide_tooltip")}.bind(this)):this.label_mouseover=null},toggle_bezier_drag:function(e){void 0===e&&(e=this.bezier_drag===this.empty_behavior);e?(this.bezier_drag=this._get_bezier_drag(this.map),this.bezier_mouseover=function(e){a(this).style("stroke-width",String(3)+"px")},this.bezier_mouseout=function(e){a(this).style("stroke-width",String(1)+"px")}):(this.bezier_drag=this.empty_behavior,this.bezier_mouseover=null,this.bezier_mouseout=null)},turn_off_drag:function(e){e.on("mousedown.drag",null),e.on("touchstart.drag",null)},_get_selectable_drag:function(e,t){var n=o(),s=null,u=null,c=null,h=null,d=null,f=function(t,n){var r=e.text_labels[t];r.x=r.x+n.x,r.y=r.y+n.y},p=function(e){this.dragging=e}.bind(this);return n.on("start",function(t){if(p(!0),l.event.sourceEvent.stopPropagation(),u={x:0,y:0},-1===a(this).attr("class").indexOf("label")){var n=this.parentNode.__data__,r=n.bigg_id,i=this.parentNode;s=setTimeout(function(){i.parentNode.insertBefore(i,i.parentNode.firstChild)},200),e.sel.selectAll(".metabolite-circle").on("mouseover.combine",function(e){e.bigg_id===r&&e.node_id!==n.node_id&&a(this).style("stroke-width",String(12)+"px").classed("node-to-combine",!0)}).on("mouseout.combine",function(t){t.bigg_id===r&&e.sel.selectAll(".node-to-combine").style("stroke-width",String(2)+"px").classed("node-to-combine",!1)})}}),n.on("drag",function(t){a(this.parentNode).classed("selected")||e.select_selectable(this,t);var n={};-1===a(this).attr("class").indexOf("label")?(n.type="node",n.id=this.parentNode.__data__.node_id):(n.type="label",n.id=this.__data__.text_label_id);var o=e.get_selected_node_ids(),s=e.get_selected_text_label_ids();c=[],d=[],"node"==n.type&&-1===o.indexOf(n.id)?c.push(n.id):"label"===n.type&&-1===s.indexOf(n.id)?d.push(n.id):(c=o,d=s),h=[];var p={x:l.event.dx,y:l.event.dy};u=r.c_plus_c(u,p),c.forEach(function(t){var n=e.nodes[t],o=i.move_node_and_dependents(n,t,e.reactions,e.beziers,p);h=r.unique_concat([h,o.reaction_ids])}),d.forEach(function(e){f(e,p)}),e.draw_these_nodes(c),e.draw_these_reactions(h),e.draw_these_text_labels(d)}),n.on("end",function(){if(p(!1),null===c)return u=null,c=null,d=null,h=null,void(s=null);var n=[];if(e.sel.selectAll(".node-to-combine").each(function(e){n.push(e.node_id)}),1===n.length){var o=n[0],a=this.parentNode.__data__.node_id,l=r.clone(e.nodes[a]),v=g(o,a);t.push(function(){e.nodes[a]=l;var t=e.nodes[o],n=[];v.forEach(function(r){var i=e.reactions[r.reaction_id].segments[r.segment_id];i.from_node_id==o?i.from_node_id=a:i.to_node_id==o?i.to_node_id=a:console.error("Segment does not connect to fixed node"),t.connected_segments=t.connected_segments.filter(function(e){return!(e.reaction_id==r.reaction_id&&e.segment_id==r.segment_id)}),-1==n.indexOf(r.reaction_id)&&n.push(r.reaction_id)}),e.draw_these_nodes([a]),e.draw_these_reactions(n)},function(){g(o,a)})}else{var m=r.clone(u),_=r.clone(c),b=r.clone(d),y=r.clone(h);t.push(function(){_.forEach(function(t){var n=e.nodes[t];i.move_node_and_dependents(n,t,e.reactions,e.beziers,r.c_times_scalar(m,-1))}),b.forEach(function(e){f(e,r.c_times_scalar(m,-1))}),e.draw_these_nodes(_),e.draw_these_reactions(y),e.draw_these_text_labels(b)},function(){_.forEach(function(t){var n=e.nodes[t];i.move_node_and_dependents(n,t,e.reactions,e.beziers,m)}),b.forEach(function(e){f(e,m)}),e.draw_these_nodes(_),e.draw_these_reactions(y),e.draw_these_text_labels(b)})}e.sel.selectAll(".metabolite-circle").on("mouseover.combine",null).on("mouseout.combine",null),clearTimeout(s),u=null,c=null,d=null,h=null,s=null}),n;function g(t,n){var i=e.nodes[n],o=e.nodes[t],a=[];return i.connected_segments.forEach(function(i){var s;try{if(void 0===(s=e.reactions[i.reaction_id].segments[i.segment_id]))throw new Error("undefined segment")}catch(l){return void console.warn("Could not find connected segment "+i.segment_id)}if(s.from_node_id==n)s.from_node_id=t;else{if(s.to_node_id!=n)return void console.error("Segment does not connect to dragged node");s.to_node_id=t}o.connected_segments.push(i),a.push(r.clone(i))}),e.delete_node_data([n]),e.sel.selectAll(".node-to-combine").classed("node-to-combine",!1),e.draw_everything(),a}},_get_bezier_drag:function(e){var t=function(t,n,i,o,a){var s=e.reactions[t].segments[n];s[i]=r.c_plus_c(s[i],a),e.beziers[o].x=s[i].x,e.beziers[o].y=s[i].y};return this._get_generic_drag(function(e){e.dragging=!0},function(n,r,i){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,r),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])},function(e){e.dragging=!1},function(n,i){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,r.c_times_scalar(i,-1)),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])},function(n,r){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,r),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])},this.map.sel)},_get_reaction_label_drag:function(e){var t=function(t,n){var r=e.reactions[t];r.label_x=r.label_x+n.x,r.label_y=r.label_y+n.y};return this._get_generic_drag(function(t){e.callback_manager.run("hide_tooltip")},function(n,r,i){t(n.reaction_id,r),e.draw_these_reactions([n.reaction_id])},function(e){},function(n,i){t(n.reaction_id,r.c_times_scalar(i,-1)),e.draw_these_reactions([n.reaction_id])},function(n,r){t(n.reaction_id,r),e.draw_these_reactions([n.reaction_id])},this.map.sel)},_get_node_label_drag:function(e){var t=function(t,n){var r=e.nodes[t];r.label_x=r.label_x+n.x,r.label_y=r.label_y+n.y};return this._get_generic_drag(function(t){e.callback_manager.run("hide_tooltip")},function(n,r,i){t(n.node_id,r),e.draw_these_nodes([n.node_id])},function(e){},function(n,i){t(n.node_id,r.c_times_scalar(i,-1)),e.draw_these_nodes([n.node_id])},function(n,r){t(n.node_id,r),e.draw_these_nodes([n.node_id])},this.map.sel)},_get_generic_drag:function(e,t,n,i,a,u){var c,h=o(),d=this.undo_stack,f=u.node();return h.on("start",function(t){this.dragging=!0,l.event.sourceEvent.stopPropagation(),c={x:0,y:0},e(t)}.bind(this)),h.on("drag",function(e){var n={x:l.event.dx,y:l.event.dy},i={x:s(f)[0],y:s(f)[1]};c=r.c_plus_c(c,n),t(e,n,c,i)}.bind(this)),h.on("end",function(e){this.dragging=!1;var t=r.clone(e),o=r.clone(c),l={x:s(f)[0],y:s(f)[1]};d.push(function(){i(t,o,l)},function(){a(t,o,l)}),n(e)}.bind(this)),h},_get_generic_angular_drag:function(e,t,n,i,a,u,c){var h,d=o(),f=this.undo_stack,p=c.node();return d.on("start",function(t){this.dragging=!0,l.event.sourceEvent.stopPropagation(),h=0,e(t)}.bind(this)),d.on("drag",function(e){var n={x:l.event.dx,y:l.event.dy},i={x:s(p)[0],y:s(p)[1]},o=u(),a=r.angle_for_event(n,i,o);t(e,a,h+=a,o)}.bind(this)),d.on("end",function(e){this.dragging=!1;var t=r.clone(e),o=h,s=r.clone(u());f.push(function(){i(t,o,s)},function(){a(t,o,s)}),n(e)}.bind(this)),d}},e.exports=u},function(e,t,n){var r=n(3).make_class();function i(e,t){return e+1>t-1?0:e+1}r.prototype={init:function(){this.stack=Array(40),this.current=-1,this.oldest=-1,this.newest=-1,this.end_of_stack=!0,this.top_of_stack=!0},push:function(e,t){this.current=i(this.current,this.stack.length),this.end_of_stack?this.oldest=this.current:this.oldest==this.current&&(this.oldest=i(this.oldest,this.stack.length));this.stack[this.current]={undo:e,redo:t},this.newest=this.current,this.top_of_stack=!0,this.end_of_stack=!1},undo:function(){if(this.end_of_stack)return console.warn("End of stack.");this.stack[this.current].undo(),this.current==this.oldest?this.end_of_stack=!0:this.current=(e=this.current,t=this.stack.length,e-1<0?t-1:e-1);var e,t;this.top_of_stack=!1},redo:function(){if(this.top_of_stack)return console.warn("Top of stack.");this.end_of_stack||(this.current=i(this.current,this.stack.length));this.stack[this.current].redo(),this.current==this.newest&&(this.top_of_stack=!0);this.end_of_stack=!1}},e.exports=r},function(e,t,n){var r=n(3),i=n(59),o=n(14),a=r.make_class();function s(e,t){if(!t)return e;var n=o.isArray(e)?e:[e],r=n.reduce(function(e,t){var n=t.replace("ctrl+","meta+");return n!==t&&e.push(n),e},n.slice());return r.length===n.length?e:r}a.prototype={init:function(e,t,n,r){this.assigned_keys=e||{},this.input_list=t||[],this.mousetrap=n?new i(n):new i,this.ctrl_equals_cmd=!!o.isBoolean(r)&&r,this.mousetrap.stopCallback=function(){return!1},this.enabled=!0,this.update()},update:function(){if(this.mousetrap.reset(),!this.enabled)return;for(var e in this.assigned_keys){var t=this.assigned_keys[e];if(t.key){var n=s(t.key,this.ctrl_equals_cmd);t.input_list=this.input_list,this.mousetrap.bind(n,function(e){var t=!1;if(this.ignore_with_input)for(var n=0,r=this.input_list.length;n<r;n++)if(this.input_list[n].is_visible()){t=!0;break}t||(this.fn?this.fn.call(this.target):console.warn("No function for key: "+this.key),e.preventDefault())}.bind(t),"keydown")}}},toggle:function(e){o.isUndefined(e)&&(e=!this.enabled);this.enabled=e,this.update()},add_escape_listener:function(e,t){return this.add_key_listener("escape",e,t)},add_enter_listener:function(e,t){return this.add_key_listener("enter",e,t)},add_key_listener:function(e,t,n){o.isUndefined(n)&&(n=!1);var r=this.mousetrap.unbind.bind(this.mousetrap,e);return this.mousetrap.bind(s(e,this.ctrl_equals_cmd),function(e){e.preventDefault(),t(),n&&r()}),r}},e.exports=a},function(e,t,n){var r;!function(i,o,a){if(i){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();_.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},_.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},_.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},_.prototype.reset=function(){return this._callbacks={},this._directMap={},this},_.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==o&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"===typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},_.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},_.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);s=null},_.init=function(){var e=_(o);for(var t in e)"_"!==t.charAt(0)&&(_[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},_.init(),i.Mousetrap=_,e.exports&&(e.exports=_),void 0===(r=function(){return _}.call(t,n,t,e))||(e.exports=r)}function f(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:u[e.which]?u[e.which]:String.fromCharCode(e.which).toLowerCase()}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t,n){return n||(n=function(){if(!s)for(var e in s={},l)e>95&&e<112||l.hasOwnProperty(e)&&(s[l[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function m(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],h[r]&&(r=h[r]),t&&"keypress"!=t&&c[r]&&(r=c[r],o.push("shift")),g(r)&&o.push(r);return{key:r,modifiers:o,action:t=v(r,o,t)}}function _(e){var t=this;if(e=e||o,!(t instanceof _))return new _(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},i=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function u(e,n,i,o,a,s){var l,u,c,h,d=[],f=i.type;if(!t._callbacks[e])return[];for("keyup"==f&&g(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(u=t._callbacks[e][l],(o||!u.seq||r[u.seq]==u.level)&&f==u.action&&("keypress"==f&&!i.metaKey&&!i.ctrlKey||(c=n,h=u.modifiers,c.sort().join(",")===h.sort().join(",")))){var p=!o&&u.combo==a,v=o&&u.seq==o&&u.level==s;(p||v)&&t._callbacks[e].splice(l,1),d.push(u)}return d}function c(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function h(e){"number"!==typeof e.which&&(e.which=e.keyCode);var n=p(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function d(e,t,o,a){function u(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function h(t){c(o,t,e),"keyup"!==a&&(i=p(t)),setTimeout(l,10)}r[e]=0;for(var d=0;d<t.length;++d){var f=d+1===t.length?h:u(a||m(t[d+1]).action);v(t[d],f,a,e,d)}}function v(e,n,r,i,o){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?d(e,s,n,r):(a=m(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},i,e,o),t._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,i=u(e,t,n),o={},h=0,d=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=h)continue;d=!0,o[i[r].seq]=1,c(i[r].callback,n,i[r].combo,i[r].seq)}else d||c(i[r].callback,n,i[r].combo);var f="keypress"==n.type&&a;n.type!=s||g(e)||f||l(o),a=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)v(e[r],t,n)},f(e,"keypress",h),f(e,"keydown",h),f(e,"keyup",h)}}("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},function(e,t,n){var r=n(3).make_class();r.prototype={init:function(){this.index={}},insert:function(e,t,n,r){if(!n&&e in this.index)throw new Error("id is already in the index");if(r&&!("name"in t&&"data"in t))throw new Error("malformed record");this.index[e]=t},remove:function(e){return e in this.index&&(delete this.index[e],!0)},find:function(e){var t=RegExp(e,"i"),n=[];for(var r in this.index){var i=this.index[r];t.exec(i.name)&&n.push(i.data)}return n}},e.exports=r},function(e,t,n){var r=n(3),i=n(24);function o(e,t){var n=t.ignore_bootstrap||!1;e.attr("class","btn btn-default simple-button");var r=e.append("span"),i=r.append("span");"id"in t&&e.attr("id",t.id),"text"in t&&i.text(t.text),"icon"in t&&!n&&r.classed(t.icon,!0),n||i.attr("class","hidden"),"key"in t&&a(e,t.key),"key_text"in t&&"tooltip"in t&&null!==t.key_text?e.attr("title",t.tooltip+t.key_text):"tooltip"in t&&e.attr("title",t.tooltip)}function a(e,t){e.on("click",function(){t.fn.call(t.target)})}function s(e,t,n,i,o){var a=t.append("input").attr("type","file").style("display","none").on("change",function(){r.load_json(this.files[0],function(e,t){i(e,t),this.value=""}.bind(this),n,o)});return e.on("click",function(e){a.node().click()}),function(){a.node().click()}}function l(e,t,n,o,a){var s=t.append("input").attr("type","file").style("display","none").on("change",function(){r.load_json_or_csv(this.files[0],i.csv_converter,function(e,t){o(e,t),this.value=""}.bind(this),n,a)});return e.on("click",function(e){s.node().click()}),function(){s.node().click()}}e.exports={individual_button:function(e,t){o(e.append("button"),t)},radio_button_group:function(e){var t=e.append("li").attr("class","btn-group-vertical").attr("data-toggle","buttons");return{button:function(e){e.ignore_bootstrap;var n=t.append("label");return n.append("input").attr("type","radio"),o(n,e),this}}},button_group:function(e){var t=e.attr("class","btn-group-vertical");return{button:function(e){var n=t.append("button");return o(n,e),this}}},dropdown_menu:function(e,t,n){void 0===n&&(n=!1);var r=e.append("li").attr("class","dropdown");r.append("button").text(t+" ").attr("class","btn btn-link btn-sm dropdown-button").attr("data-toggle","dropdown").append("b").attr("class","caret");var i=r.append("ul").attr("class","dropdown-menu").classed("pull-right",n).attr("role","menu").attr("aria-labelledby","dLabel");return{dropdown:r,button:function(e){var t=i.append("li").attr("role","presentation").datum(e),n=t.append("a").attr("href","#"),r=n.append("span").attr("class","dropdown-button-icon"),o=n.append("span").attr("class","dropdown-button-text");if("id"in e&&t.attr("id",e.id),"key_text"in e&&"text"in e&&null!==e.key_text?o.text(" "+e.text+e.key_text):"text"in e&&o.text(" "+e.text),"icon"in e&&r.classed(e.icon,!0),"key"in e)a(n,e.key);else if("input"in e){var u=e.input,c=u.accept_csv?l(n,t,u.pre_fn,u.fn,u.failure_fn):s(n,t,u.pre_fn,u.fn,u.failure_fn);"assign"in u&&"key"in u&&(u.assign[u.key]=c)}return this},divider:function(){return i.append("li").attr("role","presentation").attr("class","divider"),this}}},set_json_input_button:s,set_json_or_csv_input_button:l}},function(e,t,n){var r=n(3),i=n(31),o=r.make_class();function a(e){var t=e.map(function(e){return"hold"==e}).not().toProperty(!0),n=e.scan(!1,function(e,t){return 0==e&&("accepted"==t||"rejected"==t)}).not(),r=e.scan(!1,function(e,t){return 0==e&&"hold"==t}).not(),o=i.combineAsArray(this,e).scan([],function(e,t){if("hold"==t[1])return e.push(t[0]),e;if("accept"==t[1])return e;if("reject"==t[1])return[];if("rejected"==t[1]||"accepted"==t[1])return[t[0]];throw Error("bad status "+t[1])}).filter(t).filter(n).filter(r).flatMap(function(e){return i.fromArray(e)});return this.filter(t).merge(o)}function s(e){return i.combineAsArray(this,e.toProperty(!1)).map(function(e){return e[0]})}function l(e,t,n,r,o){var a=new i.Bus,s=a.convert_to_conditional_stream(r).force_update_with_bus(o);return s.onValue(function(t){n(e,t)}),a.push(t),{bus:a,stream:s}}o.prototype={init:function(e,t,n){this.set_option=e,this.get_option=t,this.status_bus=new i.Bus,this.force_update_bus=new i.Bus,i.Observable.prototype.convert_to_conditional_stream=a,i.Observable.prototype.force_update_with_bus=s,this.busses={},this.streams={};for(var r=0,o=n.length;r<o;r++){var u=n[r],c=l(u,t(u),e,this.status_bus,this.force_update_bus);this.busses[u]=c.bus,this.streams[u]=c.stream}},set_conditional:function(e,t){if(!(e in this.busses))throw new Error("Invalid setting name");this.busses[e].push(t)},hold_changes:function(){this.status_bus.push("hold")},abandon_changes:function(){this.status_bus.push("reject"),this.status_bus.push("rejected"),this.force_update_bus.push(!0)},accept_changes:function(){this.status_bus.push("accept"),this.status_bus.push("accepted")}},e.exports=o},function(e,t,n){"use strict";n.r(t);var r=n(19),i=n(18),o=n(7),a=n(2),s=n(21),l=function(e){return function(){return e}},u=function(e,t,n){this.target=e,this.type=t,this.selection=n};function c(){a.event.stopImmediatePropagation()}var h=function(){a.event.preventDefault(),a.event.stopImmediatePropagation()},d={name:"drag"},f={name:"space"},p={name:"handle"},g={name:"center"},v={name:"x",handles:["e","w"].map(S),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},m={name:"y",handles:["n","s"].map(S),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},_={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(S),input:function(e){return e},output:function(e){return e}},b={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},y={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},w={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},x={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},k={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function S(e){return{type:e}}function C(){return!a.event.button}function E(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function T(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function P(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function A(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function O(){return M(v)}function z(){return M(m)}var N=function(){return M(_)};function M(e){var t,n=E,_=C,A=Object(r.a)(z,"start","brush","end"),O=6;function z(t){var n=t.property("__brush",I).selectAll(".overlay").data([S("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",b.overlay).merge(n).each(function(){var e=T(this).extent;Object(a.select)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([S("selection")]).enter().append("rect").attr("class","selection").attr("cursor",b.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return b[e.type]}),t.each(N).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",D)}function N(){var e=Object(a.select)(this),t=T(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-O/2:t[0][0]-O/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-O/2:t[0][1]-O/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+O:O}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+O:O})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function M(e,t){return e.__brush.emitter||new R(e,t)}function R(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function D(){if(a.event.touches){if(a.event.changedTouches.length<a.event.touches.length)return h()}else if(t)return;if(_.apply(this,arguments)){var n,r,o,l,u,S,C,E,A,O,z,R,D,I=this,j=a.event.target.__data__.type,F="selection"===(a.event.metaKey?j="overlay":j)?d:a.event.altKey?g:p,L=e===m?null:x[j],B=e===v?null:k[j],U=T(I),W=U.extent,V=U.selection,H=W[0][0],q=W[0][1],Y=W[1][0],$=W[1][1],K=!1,X=Object(a.mouse)(I),G=X,Q=M(I,arguments).beforestart();"overlay"===j?U.selection=V=[[n=e===m?H:X[0],o=e===v?q:X[1]],[u=e===m?Y:n,C=e===v?$:o]]:(n=V[0][0],o=V[0][1],u=V[1][0],C=V[1][1]),r=n,l=o,S=u,E=C;var J=Object(a.select)(I).attr("pointer-events","none"),Z=J.selectAll(".overlay").attr("cursor",b[j]);if(a.event.touches)J.on("touchmove.brush",te,!0).on("touchend.brush touchcancel.brush",re,!0);else{var ee=Object(a.select)(a.event.view).on("keydown.brush",function(){switch(a.event.keyCode){case 16:K=L&&B;break;case 18:F===p&&(L&&(u=S-A*L,n=r+A*L),B&&(C=E-O*B,o=l+O*B),F=g,ne());break;case 32:F!==p&&F!==g||(L<0?u=S-A:L>0&&(n=r-A),B<0?C=E-O:B>0&&(o=l-O),F=f,Z.attr("cursor",b.selection),ne());break;default:return}h()},!0).on("keyup.brush",function(){switch(a.event.keyCode){case 16:K&&(R=D=K=!1,ne());break;case 18:F===g&&(L<0?u=S:L>0&&(n=r),B<0?C=E:B>0&&(o=l),F=p,ne());break;case 32:F===f&&(a.event.altKey?(L&&(u=S-A*L,n=r+A*L),B&&(C=E-O*B,o=l+O*B),F=g):(L<0?u=S:L>0&&(n=r),B<0?C=E:B>0&&(o=l),F=p),Z.attr("cursor",b[j]),ne());break;default:return}h()},!0).on("mousemove.brush",te,!0).on("mouseup.brush",re,!0);Object(i.dragDisable)(a.event.view)}c(),Object(s.a)(I),N.call(I),Q.start()}function te(){var e=Object(a.mouse)(I);!K||R||D||(Math.abs(e[0]-G[0])>Math.abs(e[1]-G[1])?D=!0:R=!0),G=e,z=!0,h(),ne()}function ne(){var e;switch(A=G[0]-X[0],O=G[1]-X[1],F){case f:case d:L&&(A=Math.max(H-n,Math.min(Y-u,A)),r=n+A,S=u+A),B&&(O=Math.max(q-o,Math.min($-C,O)),l=o+O,E=C+O);break;case p:L<0?(A=Math.max(H-n,Math.min(Y-n,A)),r=n+A,S=u):L>0&&(A=Math.max(H-u,Math.min(Y-u,A)),r=n,S=u+A),B<0?(O=Math.max(q-o,Math.min($-o,O)),l=o+O,E=C):B>0&&(O=Math.max(q-C,Math.min($-C,O)),l=o,E=C+O);break;case g:L&&(r=Math.max(H,Math.min(Y,n-A*L)),S=Math.max(H,Math.min(Y,u+A*L))),B&&(l=Math.max(q,Math.min($,o-O*B)),E=Math.max(q,Math.min($,C+O*B)))}S<r&&(L*=-1,e=n,n=u,u=e,e=r,r=S,S=e,j in y&&Z.attr("cursor",b[j=y[j]])),E<l&&(B*=-1,e=o,o=C,C=e,e=l,l=E,E=e,j in w&&Z.attr("cursor",b[j=w[j]])),U.selection&&(V=U.selection),R&&(r=V[0][0],S=V[1][0]),D&&(l=V[0][1],E=V[1][1]),V[0][0]===r&&V[0][1]===l&&V[1][0]===S&&V[1][1]===E||(U.selection=[[r,l],[S,E]],N.call(I),Q.brush())}function re(){if(c(),a.event.touches){if(a.event.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500),J.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Object(i.dragEnable)(a.event.view,z),ee.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);J.attr("pointer-events","all"),Z.attr("cursor",b.overlay),U.selection&&(V=U.selection),P(V)&&(U.selection=null,N.call(I)),Q.end()}}function I(){var t=this.__brush||{selection:null};return t.extent=n.apply(this,arguments),t.dim=e,t}return z.move=function(t,n){t.selection?t.on("start.brush",function(){M(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){M(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,i=M(t,arguments),a=r.selection,s=e.input("function"===typeof n?n.apply(this,arguments):n,r.extent),l=Object(o.a)(a,s);function u(e){r.selection=1===e&&P(s)?null:l(e),N.call(t),i.brush()}return a&&s?u:u(1)}):t.each(function(){var t=arguments,r=this.__brush,i=e.input("function"===typeof n?n.apply(this,t):n,r.extent),o=M(this,t).beforestart();Object(s.a)(this),r.selection=null==i||P(i)?null:i,N.call(this),o.start().brush().end()})},R.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Object(a.customEvent)(new u(z,t,e.output(this.state.selection)),A.apply,A,[t,this.that,this.args])}},z.extent=function(e){return arguments.length?(n="function"===typeof e?e:l([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),z):n},z.filter=function(e){return arguments.length?(_="function"===typeof e?e:l(!!e),z):_},z.handleSize=function(e){return arguments.length?(O=+e,z):O},z.on=function(){var e=A.on.apply(A,arguments);return e===A?z:e},z}n.d(t,"brush",function(){return N}),n.d(t,"brushX",function(){return O}),n.d(t,"brushY",function(){return z}),n.d(t,"brushSelection",function(){return A})},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(68)},function(e,t,n){e.exports={version:n(49).version,Builder:n(96),Map:n(55),Behavior:n(56),KeyManager:n(58),DataMenu:n(112),UndoStack:n(57),CobraModel:n(37),utils:n(3),SearchIndex:n(60),Settings:n(62),data_styles:n(24),ui:n(61),static:n(113),ZoomContainer:n(54),libs:{_:n(14),underscore:n(14),tinier:n(39),baconjs:n(31),mousetrap:n(59),vkbeautify:n(50),d3_selection:n(2),d3_select:n(2).select,d3_json:n(25).json}}},,function(e,t,n){"use strict";var r=n(44),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function _(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||b}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&_("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var S=k.prototype=new x;S.constructor=k,r(S,w.prototype),S.isPureReactComponent=!0;var C={current:null},E={current:null},T=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,r)&&!P.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:E.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var z=/\/+/g,N=[];function M(e,t,n,r){if(N.length){var i=N.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>N.length&&N.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return r(i,t,""===n?"."+I(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+I(s=t[u],u);l+=e(s,c,r,i)}else if(c=null===t||"object"!==typeof t?null:"function"===typeof(c=m&&t[m]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+I(s,u++),r,i);else"object"===s&&_("31","[object Object]"===(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return l}(e,"",t,n)}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,r,n,function(e){return e}):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(z,"$&/")+"/")+n)),r.push(e))}function L(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(z,"$&/")+"/"),D(e,F,t=M(t,o,r,i)),R(t)}function B(){var e=C.current;return null===e&&_("321"),e}var U={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return L(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,j,t=M(null,null,t,n)),R(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return L(e,t,null,function(e){return e}),t},only:function(e){return O(e)||_("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return B().useCallback(e,t)},useContext:function(e,t){return B().useContext(e,t)},useEffect:function(e,t){return B().useEffect(e,t)},useImperativeHandle:function(e,t,n){return B().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return B().useLayoutEffect(e,t)},useMemo:function(e,t){return B().useMemo(e,t)},useReducer:function(e,t,n){return B().useReducer(e,t,n)},useRef:function(e){return B().useRef(e)},useState:function(e){return B().useState(e)},Fragment:s,StrictMode:l,Suspense:p,createElement:A,cloneElement:function(e,t,n){(null===e||void 0===e)&&_("267",e);var i=void 0,a=r({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=E.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)T.call(t,i)&&!P.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var h=0;h<i;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.8.6",unstable_ConcurrentMode:d,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentOwner:E,assign:r}},W={default:U},V=W&&U||W;e.exports=V.default||V},function(e,t,n){"use strict";var r=n(0),i=n(44),o=n(69);function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,l=null,u=!1,c=null,h={onError:function(e){s=!0,l=e}};function d(e,t,n,r,i,o,a,u,c){s=!1,l=null,function(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}.apply(h,arguments)}var f=null,p={};function g(){if(f)for(var e in p){var t=p[e],n=f.indexOf(e);if(-1<n||a("96",e),!m[n])for(var r in t.extractEvents||a("97",e),m[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;_.hasOwnProperty(l)&&a("99",l),_[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&v(u[i],s,l);i=!0}else o.registrationName?(v(o.registrationName,s,l),i=!0):i=!1;i||a("98",r,e)}}}function v(e,t,n){b[e]&&a("100",e),b[e]=t,y[e]=t.eventTypes[n].dependencies}var m=[],_={},b={},y={},w=null,x=null,k=null;function S(e,t,n){var r=e.type||"unknown-event";e.currentTarget=k(n),function(e,t,n,r,i,o,h,f,p){if(d.apply(this,arguments),s){if(s){var g=l;s=!1,l=null}else a("198"),g=void 0;u||(u=!0,c=g)}}(r,t,void 0,e),e.currentTarget=null}function C(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var T=null;function P(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)S(e,t[r],n[r]);else t&&S(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var A={injectEventPluginOrder:function(e){f&&a("101"),f=Array.prototype.slice.call(e),g()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&a("102",t),p[t]=r,n=!0)}n&&g()}};function O(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&a("231",t,typeof n),n)}function z(e){if(null!==e&&(T=C(T,e)),e=T,T=null,e&&(E(e,P),T&&a("95"),u))throw e=c,u=!1,c=null,e}var N=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+N,R="__reactEventHandlers$"+N;function D(e){if(e[M])return e[M];for(;!e[M];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[M]).tag||6===e.tag?e:null}function I(e){return!(e=e[M])||5!==e.tag&&6!==e.tag?null:e}function j(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function F(e){return e[R]||null}function L(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function B(e,t,n){(t=O(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function U(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=L(t);for(t=n.length;0<t--;)B(n[t],"captured",e);for(t=0;t<n.length;t++)B(n[t],"bubbled",e)}}function W(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=O(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function V(e){e&&e.dispatchConfig.registrationName&&W(e._targetInst,null,e)}function H(e){E(e,U)}var q=!("undefined"===typeof window||!window.document||!window.document.createElement);function Y(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $={animationend:Y("Animation","AnimationEnd"),animationiteration:Y("Animation","AnimationIteration"),animationstart:Y("Animation","AnimationStart"),transitionend:Y("Transition","TransitionEnd")},K={},X={};function G(e){if(K[e])return K[e];if(!$[e])return e;var t,n=$[e];for(t in n)if(n.hasOwnProperty(t)&&t in X)return K[e]=n[t];return e}q&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete $.animationend.animation,delete $.animationiteration.animation,delete $.animationstart.animation),"TransitionEvent"in window||delete $.transitionend.transition);var Q=G("animationend"),J=G("animationiteration"),Z=G("animationstart"),ee=G("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function oe(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function ae(){return!0}function se(){return!1}function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:se,this.isPropagationStopped=se,this}function ue(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function ce(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=ue,e.release=ce}i(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,he(n),n},he(le);var de=le.extend({data:null}),fe=le.extend({data:null}),pe=[9,13,27,32],ge=q&&"CompositionEvent"in window,ve=null;q&&"documentMode"in document&&(ve=document.documentMode);var me=q&&"TextEvent"in window&&!ve,_e=q&&(!ge||ve&&8<ve&&11>=ve),be=String.fromCharCode(32),ye={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function xe(e,t){switch(e){case"keyup":return-1!==pe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ke(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Se=!1;var Ce={eventTypes:ye,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(ge)e:{switch(e){case"compositionstart":i=ye.compositionStart;break e;case"compositionend":i=ye.compositionEnd;break e;case"compositionupdate":i=ye.compositionUpdate;break e}i=void 0}else Se?xe(e,n)&&(i=ye.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=ye.compositionStart);return i?(_e&&"ko"!==n.locale&&(Se||i!==ye.compositionStart?i===ye.compositionEnd&&Se&&(o=oe()):(re="value"in(ne=r)?ne.value:ne.textContent,Se=!0)),i=de.getPooled(i,t,n,r),o?i.data=o:null!==(o=ke(n))&&(i.data=o),H(i),o=i):o=null,(e=me?function(e,t){switch(e){case"compositionend":return ke(t);case"keypress":return 32!==t.which?null:(we=!0,be);case"textInput":return(e=t.data)===be&&we?null:e;default:return null}}(e,n):function(e,t){if(Se)return"compositionend"===e||!ge&&xe(e,t)?(e=oe(),ie=re=ne=null,Se=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _e&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=fe.getPooled(ye.beforeInput,t,n,r)).data=e,H(t)):t=null,null===o?t:null===t?o:[o,t]}},Ee=null,Te=null,Pe=null;function Ae(e){if(e=x(e)){"function"!==typeof Ee&&a("280");var t=w(e.stateNode);Ee(e.stateNode,e.type,t)}}function Oe(e){Te?Pe?Pe.push(e):Pe=[e]:Te=e}function ze(){if(Te){var e=Te,t=Pe;if(Pe=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ne(e,t){return e(t)}function Me(e,t,n){return e(t,n)}function Re(){}var De=!1;function Ie(e,t){if(De)return e(t);De=!0;try{return Ne(e,t)}finally{De=!1,(null!==Te||null!==Pe)&&(Re(),ze())}}var je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!je[e.type]:"textarea"===t}function Le(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Be(e){if(!q)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Ue(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=Ue(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ue(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var He=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;He.hasOwnProperty("ReactCurrentDispatcher")||(He.ReactCurrentDispatcher={current:null});var qe=/^(.*)[\\\/]/,Ye="function"===typeof Symbol&&Symbol.for,$e=Ye?Symbol.for("react.element"):60103,Ke=Ye?Symbol.for("react.portal"):60106,Xe=Ye?Symbol.for("react.fragment"):60107,Ge=Ye?Symbol.for("react.strict_mode"):60108,Qe=Ye?Symbol.for("react.profiler"):60114,Je=Ye?Symbol.for("react.provider"):60109,Ze=Ye?Symbol.for("react.context"):60110,et=Ye?Symbol.for("react.concurrent_mode"):60111,tt=Ye?Symbol.for("react.forward_ref"):60112,nt=Ye?Symbol.for("react.suspense"):60113,rt=Ye?Symbol.for("react.memo"):60115,it=Ye?Symbol.for("react.lazy"):60116,ot="function"===typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case et:return"ConcurrentMode";case Xe:return"Fragment";case Ke:return"Portal";case Qe:return"Profiler";case Ge:return"StrictMode";case nt:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case Ze:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=st(e.type);n=null,r&&(n=st(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(qe,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var ut=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ct=Object.prototype.hasOwnProperty,ht={},dt={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new ft(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new ft(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new ft(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new ft(e,5,!1,e.toLowerCase(),null)});var gt=/[\-:]([a-z])/g;function vt(e){return e[1].toUpperCase()}function mt(e,t,n,r){var i=pt.hasOwnProperty(t)?pt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ct.call(dt,e)||!ct.call(ht,e)&&(ut.test(e)?dt[e]=!0:(ht[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function _t(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function yt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_t(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&mt(e,"checked",t,!1)}function xt(e,t){wt(e,t);var n=_t(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?St(e,t.type,n):t.hasOwnProperty("defaultValue")&&St(e,t.type,_t(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function St(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gt,vt);pt[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gt,vt);pt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gt,vt);pt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new ft(e,1,!1,e.toLowerCase(),null)});var Ct={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Et(e,t,n){return(e=le.getPooled(Ct.change,e,t,n)).type="change",Oe(n),H(e),e}var Tt=null,Pt=null;function At(e){z(e)}function Ot(e){if(Ve(j(e)))return e}function zt(e,t){if("change"===e)return t}var Nt=!1;function Mt(){Tt&&(Tt.detachEvent("onpropertychange",Rt),Pt=Tt=null)}function Rt(e){"value"===e.propertyName&&Ot(Pt)&&Ie(At,e=Et(Pt,e,Le(e)))}function Dt(e,t,n){"focus"===e?(Mt(),Pt=n,(Tt=t).attachEvent("onpropertychange",Rt)):"blur"===e&&Mt()}function It(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ot(Pt)}function jt(e,t){if("click"===e)return Ot(t)}function Ft(e,t){if("input"===e||"change"===e)return Ot(t)}q&&(Nt=Be("input")&&(!document.documentMode||9<document.documentMode));var Lt={eventTypes:Ct,_isInputEventSupported:Nt,extractEvents:function(e,t,n,r){var i=t?j(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=zt:Fe(i)?Nt?o=Ft:(o=It,a=Dt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=jt),o&&(o=o(e,t)))return Et(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&St(i,"number",i.value)}},Bt=le.extend({view:null,detail:null}),Ut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ut[e])&&!!t[e]}function Vt(){return Wt}var Ht=0,qt=0,Yt=!1,$t=!1,Kt=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ht;return Ht=e.screenX,Yt?"mousemove"===e.type?e.screenX-t:0:(Yt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=qt;return qt=e.screenY,$t?"mousemove"===e.type?e.screenY-t:0:($t=!0,0)}}),Xt=Kt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Gt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qt={eventTypes:Gt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?D(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=Kt,s=Gt.mouseLeave,l=Gt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Xt,s=Gt.pointerLeave,l=Gt.pointerEnter,u="pointer");var c=null==o?i:j(o);if(i=null==t?i:j(t),(e=a.getPooled(s,o,n,r)).type=u+"leave",e.target=c,e.relatedTarget=i,(n=a.getPooled(l,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=c,r=t,o&&r)e:{for(i=r,u=0,a=t=o;a;a=L(a))u++;for(a=0,l=i;l;l=L(l))a++;for(;0<u-a;)t=L(t),u--;for(;0<a-u;)i=L(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=L(t),i=L(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=L(o);for(o=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)o.push(r),r=L(r);for(r=0;r<t.length;r++)W(t[r],"bubbled",e);for(r=o.length;0<r--;)W(o[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Zt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=Bt.extend({relatedTarget:null});function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=Bt.extend({key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),dn=Kt.extend({dataTransfer:null}),fn=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),pn=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gn=Kt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),vn=[["abort","abort"],[Q,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mn={},_n={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},mn[e]=t,_n[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),vn.forEach(function(e){bn(e,!1)});var yn={eventTypes:mn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=_n[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=_n[e];if(!i)return null;switch(e){case"keypress":if(0===ln(n))return null;case"keydown":case"keyup":e=hn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Kt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fn;break;case Q:case J:case Z:e=on;break;case ee:e=pn;break;case"scroll":e=Bt;break;case"wheel":e=gn;break;case"copy":case"cut":case"paste":e=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Xt;break;default:e=le}return H(t=e.getPooled(i,t,n,r)),t}},wn=yn.isInteractiveTopLevelEventType,xn=[];function kn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=D(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Le(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<m.length;s++){var l=m[s];l&&(l=l.extractEvents(r,t,o,i))&&(a=C(a,l))}z(a)}}var Sn=!0;function Cn(e,t){if(!t)return null;var n=(wn(e)?Tn:Pn).bind(null,e);t.addEventListener(e,n,!1)}function En(e,t){if(!t)return null;var n=(wn(e)?Tn:Pn).bind(null,e);t.addEventListener(e,n,!0)}function Tn(e,t){Me(Pn,e,t)}function Pn(e,t){if(Sn){var n=Le(t);if(null===(n=D(n))||"number"!==typeof n.tag||2===tn(n)||(n=null),xn.length){var r=xn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ie(kn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>xn.length&&xn.push(e)}}}var An={},On=0,zn="_reactListenersID"+(""+Math.random()).slice(2);function Nn(e){return Object.prototype.hasOwnProperty.call(e,zn)||(e[zn]=On++,An[e[zn]]={}),An[e[zn]]}function Mn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Rn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dn(e,t){var n,r=Rn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rn(r)}}function In(){for(var e=window,t=Mn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Mn((e=t.contentWindow).document)}return t}function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Fn(e){var t=In(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&jn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Dn(n,o);var a=Dn(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ln=q&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,Wn=null,Vn=null,Hn=!1;function qn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hn||null==Un||Un!==Mn(n)?null:("selectionStart"in(n=Un)&&jn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&en(Vn,n)?null:(Vn=n,(e=le.getPooled(Bn.select,Wn,e,t)).type="select",e.target=Un,H(e),e))}var Yn={eventTypes:Bn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Nn(o),i=y.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?j(t):window,e){case"focus":(Fe(o)||"true"===o.contentEditable)&&(Un=o,Wn=t,Vn=null);break;case"blur":Vn=Wn=Un=null;break;case"mousedown":Hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hn=!1,qn(n,r);case"selectionchange":if(Ln)break;case"keydown":case"keyup":return qn(n,r)}return null}};function $n(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Kn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_t(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Xn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:_t(n)}}function Qn(e,t){var n=_t(t.value),r=_t(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=F,x=I,k=j,A.injectEventPluginsByName({SimpleEventPlugin:yn,EnterLeaveEventPlugin:Qt,ChangeEventPlugin:Lt,SelectEventPlugin:Yn,BeforeInputEventPlugin:Ce});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Zn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function lr(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function ur(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=lr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ar).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});var cr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(e,t){t&&(cr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!==typeof t.style&&a("62",""))}function dr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(e,t){var n=Nn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=y[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":En("scroll",e);break;case"focus":case"blur":En("focus",e),En("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Be(i)&&En(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&Cn(i,e)}n[i]=!0}}}function pr(){}var gr=null,vr=null;function mr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _r(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,yr="function"===typeof clearTimeout?clearTimeout:void 0,wr=o.unstable_scheduleCallback,xr=o.unstable_cancelCallback;function kr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Sr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Cr=[],Er=-1;function Tr(e){0>Er||(e.current=Cr[Er],Cr[Er]=null,Er--)}function Pr(e,t){Cr[++Er]=e.current,e.current=t}var Ar={},Or={current:Ar},zr={current:!1},Nr=Ar;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Ar;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Dr(e){Tr(zr),Tr(Or)}function Ir(e){Tr(zr),Tr(Or)}function jr(e,t,n){Or.current!==Ar&&a("168"),Pr(Or,t),Pr(zr,n)}function Fr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||a("108",st(t)||"Unknown",o);return i({},n,r)}function Lr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Ar,Nr=Or.current,Pr(Or,t),Pr(zr,zr.current),!0}function Br(e,t,n){var r=e.stateNode;r||a("169"),n?(t=Fr(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=t,Tr(zr),Tr(Or),Pr(Or,t)):Tr(zr),Pr(zr,n)}var Ur=null,Wr=null;function Vr(e){return function(t){try{return e(t)}catch(n){}}}function Hr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function qr(e,t,n,r){return new Hr(e,t,n,r)}function Yr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $r(e,t){var n=e.alternate;return null===n?((n=qr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kr(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Yr(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case Xe:return Xr(n.children,i,o,t);case et:return Gr(n,3|i,o,t);case Ge:return Gr(n,2|i,o,t);case Qe:return(e=qr(12,n,t,4|i)).elementType=Qe,e.type=Qe,e.expirationTime=o,e;case nt:return(e=qr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Je:s=10;break e;case Ze:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=qr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Xr(e,t,n,r){return(e=qr(7,e,r,t)).expirationTime=n,e}function Gr(e,t,n,r){return e=qr(8,e,r,t),t=0===(1&t)?Ge:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Qr(e,t,n){return(e=qr(6,e,null,t)).expirationTime=n,e}function Jr(e,t,n){return(t=qr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function oi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ai={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=xs(),i=Go(r=Xa(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Va(),Jo(e,i),Ja(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=xs(),i=Go(r=Xa(r,e));i.tag=Ho,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Va(),Jo(e,i),Ja(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=xs(),r=Go(n=Xa(n,e));r.tag=qo,void 0!==t&&null!==t&&(r.callback=t),Va(),Jo(e,r),Ja(e,n)}};function si(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,o))}function li(e,t,n){var r=!1,i=Ar,o=t.contextType;return"object"===typeof o&&null!==o?o=Wo(o):(i=Rr(t)?Nr:Or.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mr(e,i):Ar),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ui(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function ci(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var o=t.contextType;"object"===typeof o&&null!==o?i.context=Wo(o):(o=Rr(t)?Nr:Or.current,i.context=Mr(e,o)),null!==(o=e.updateQueue)&&(na(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(oi(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ai.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(na(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var hi=Array.isArray;function di(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!==typeof e&&a("284"),n._owner||a("290",e)}return e}function fi(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function pi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=$r(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=di(e,t,n),r.return=e,r):((r=Kr(n.type,n.key,n.props,null,e.mode,r)).ref=di(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Xr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case $e:return(n=Kr(t.type,t.key,t.props,null,e.mode,n)).ref=di(e,null,t),n.return=e,n;case Ke:return(t=Jr(t,e.mode,n)).return=e,t}if(hi(t)||at(t))return(t=Xr(t,e.mode,n,null)).return=e,t;fi(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case $e:return n.key===i?n.type===Xe?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case Ke:return n.key===i?c(e,t,n,r):null}if(hi(n)||at(n))return null!==i?null:h(e,t,n,r,null);fi(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case $e:return e=e.get(null===r.key?n:r.key)||null,r.type===Xe?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case Ke:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(hi(r)||at(r))return h(t,e=e.get(n)||null,r,i,null);fi(t,r)}return null}function g(i,a,s,l){for(var u=null,c=null,h=a,g=a=0,v=null;null!==h&&g<s.length;g++){h.index>g?(v=h,h=null):v=h.sibling;var m=f(i,h,s[g],l);if(null===m){null===h&&(h=v);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,g),null===c?u=m:c.sibling=m,c=m,h=v}if(g===s.length)return n(i,h),u;if(null===h){for(;g<s.length;g++)(h=d(i,s[g],l))&&(a=o(h,a,g),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);g<s.length;g++)(v=p(h,i,g,s[g],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?g:v.key),a=o(v,a,g),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return t(i,e)}),u}function v(i,s,l,u){var c=at(l);"function"!==typeof c&&a("150"),null==(l=c.call(l))&&a("151");for(var h=c=null,g=s,v=s=0,m=null,_=l.next();null!==g&&!_.done;v++,_=l.next()){g.index>v?(m=g,g=null):m=g.sibling;var b=f(i,g,_.value,u);if(null===b){g||(g=m);break}e&&g&&null===b.alternate&&t(i,g),s=o(b,s,v),null===h?c=b:h.sibling=b,h=b,g=m}if(_.done)return n(i,g),c;if(null===g){for(;!_.done;v++,_=l.next())null!==(_=d(i,_.value,u))&&(s=o(_,s,v),null===h?c=_:h.sibling=_,h=_);return c}for(g=r(i,g);!_.done;v++,_=l.next())null!==(_=p(g,i,v,_.value,u))&&(e&&null!==_.alternate&&g.delete(null===_.key?v:_.key),s=o(_,s,v),null===h?c=_:h.sibling=_,h=_);return e&&g.forEach(function(e){return t(i,e)}),c}return function(e,r,o,l){var u="object"===typeof o&&null!==o&&o.type===Xe&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case $e:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag?o.type===Xe:u.elementType===o.type){n(e,u.sibling),(r=i(u,o.type===Xe?o.props.children:o.props)).ref=di(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===Xe?((r=Xr(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Kr(o.type,o.key,o.props,null,e.mode,l)).ref=di(e,r,o),l.return=e,e=l)}return s(e);case Ke:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jr(o,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Qr(o,e.mode,l)).return=e,e=r),s(e);if(hi(o))return g(e,r,o,l);if(at(o))return v(e,r,o,l);if(c&&fi(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 0:a("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var gi=pi(!0),vi=pi(!1),mi={},_i={current:mi},bi={current:mi},yi={current:mi};function wi(e){return e===mi&&a("174"),e}function xi(e,t){Pr(yi,t),Pr(bi,e),Pr(_i,mi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Tr(_i),Pr(_i,t)}function ki(e){Tr(_i),Tr(bi),Tr(yi)}function Si(e){wi(yi.current);var t=wi(_i.current),n=tr(t,e.type);t!==n&&(Pr(bi,e),Pr(_i,n))}function Ci(e){bi.current===e&&(Tr(_i),Tr(bi))}var Ei=0,Ti=2,Pi=4,Ai=8,Oi=16,zi=32,Ni=64,Mi=128,Ri=He.ReactCurrentDispatcher,Di=0,Ii=null,ji=null,Fi=null,Li=null,Bi=null,Ui=null,Wi=0,Vi=null,Hi=0,qi=!1,Yi=null,$i=0;function Ki(){a("321")}function Xi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Gi(e,t,n,r,i,o){if(Di=o,Ii=t,Fi=null!==e?e.memoizedState:null,Ri.current=null===Fi?uo:co,t=n(r,i),qi){do{qi=!1,$i+=1,Fi=null!==e?e.memoizedState:null,Ui=Li,Vi=Bi=ji=null,Ri.current=co,t=n(r,i)}while(qi);Yi=null,$i=0}return Ri.current=lo,(e=Ii).memoizedState=Li,e.expirationTime=Wi,e.updateQueue=Vi,e.effectTag|=Hi,e=null!==ji&&null!==ji.next,Di=0,Ui=Bi=Li=Fi=ji=Ii=null,Wi=0,Vi=null,Hi=0,e&&a("300"),t}function Qi(){Ri.current=lo,Di=0,Ui=Bi=Li=Fi=ji=Ii=null,Wi=0,Vi=null,Hi=0,qi=!1,Yi=null,$i=0}function Ji(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Bi?Li=Bi=e:Bi=Bi.next=e,Bi}function Zi(){if(null!==Ui)Ui=(Bi=Ui).next,Fi=null!==(ji=Fi)?ji.next:null;else{null===Fi&&a("310");var e={memoizedState:(ji=Fi).memoizedState,baseState:ji.baseState,queue:ji.queue,baseUpdate:ji.baseUpdate,next:null};Bi=null===Bi?Li=e:Bi.next=e,Fi=ji.next}return Bi}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Zi(),n=t.queue;if(null===n&&a("311"),n.lastRenderedReducer=e,0<$i){var r=n.dispatch;if(null!==Yi){var i=Yi.get(n);if(void 0!==i){Yi.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Jt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var l=i=null,u=r,c=!1;do{var h=u.expirationTime;h<Di?(c||(c=!0,l=s,i=o),h>Wi&&(Wi=h)):o=u.eagerReducer===e?u.eagerState:e(o,u.action),s=u,u=u.next}while(null!==u&&u!==r);c||(l=s,i=o),Jt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate=l,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function no(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Vi?(Vi={lastEffect:null}).lastEffect=e.next=e:null===(t=Vi.lastEffect)?Vi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Vi.lastEffect=e),e}function ro(e,t,n,r){var i=Ji();Hi|=e,i.memoizedState=no(t,n,void 0,void 0===r?null:r)}function io(e,t,n,r){var i=Zi();r=void 0===r?null:r;var o=void 0;if(null!==ji){var a=ji.memoizedState;if(o=a.destroy,null!==r&&Xi(r,a.deps))return void no(Ei,n,o,r)}Hi|=e,i.memoizedState=no(t,n,o,r)}function oo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ao(){}function so(e,t,n){25>$i||a("301");var r=e.alternate;if(e===Ii||null!==r&&r===Ii)if(qi=!0,e={expirationTime:Di,action:n,eagerReducer:null,eagerState:null,next:null},null===Yi&&(Yi=new Map),void 0===(n=Yi.get(t)))Yi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Va();var i=xs(),o={expirationTime:i=Xa(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)o.next=o;else{var l=s.next;null!==l&&(o.next=l),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,c=r(u,n);if(o.eagerReducer=r,o.eagerState=c,Jt(c,u))return}catch(h){}Ja(e,i)}}var lo={readContext:Wo,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki},uo={readContext:Wo,useCallback:function(e,t){return Ji().memoizedState=[e,void 0===t?null:t],e},useContext:Wo,useEffect:function(e,t){return ro(516,Mi|Ni,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ro(4,Pi|zi,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ro(4,Pi|zi,e,t)},useMemo:function(e,t){var n=Ji();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=so.bind(null,Ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ji().memoizedState=e},useState:function(e){var t=Ji();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=so.bind(null,Ii,e),[t.memoizedState,e]},useDebugValue:ao},co={readContext:Wo,useCallback:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Wo,useEffect:function(e,t){return io(516,Mi|Ni,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,io(4,Pi|zi,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4,Pi|zi,e,t)},useMemo:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:to,useRef:function(){return Zi().memoizedState},useState:function(e){return to(eo)},useDebugValue:ao},ho=null,fo=null,po=!1;function go(e,t){var n=qr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function mo(e){if(po){var t=fo;if(t){var n=t;if(!vo(e,t)){if(!(t=kr(n))||!vo(e,t))return e.effectTag|=2,po=!1,void(ho=e);go(ho,n)}ho=e,fo=Sr(t)}else e.effectTag|=2,po=!1,ho=e}}function _o(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ho=e}function bo(e){if(e!==ho)return!1;if(!po)return _o(e),po=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_r(t,e.memoizedProps))for(t=fo;t;)go(e,t),t=kr(t);return _o(e),fo=ho?kr(e.stateNode):null,!0}function yo(){fo=ho=null,po=!1}var wo=He.ReactCurrentOwner,xo=!1;function ko(e,t,n,r){t.child=null===e?vi(t,null,n,r):gi(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var o=t.ref;return Uo(t,i),r=Gi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,ko(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Mo(e,t,i))}function Co(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Yr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eo(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Mo(e,t,o):(t.effectTag|=1,(e=$r(a,r)).ref=t.ref,e.return=t,t.child=e)}function Eo(e,t,n,r,i,o){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(xo=!1,i<o)?Mo(e,t,o):Po(e,t,n,r,o)}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Po(e,t,n,r,i){var o=Rr(n)?Nr:Or.current;return o=Mr(t,o),Uo(t,i),n=Gi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,ko(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Mo(e,t,i))}function Ao(e,t,n,r,i){if(Rr(n)){var o=!0;Lr(t)}else o=!1;if(Uo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),li(t,n,r),ci(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Wo(u):u=Mr(t,u=Rr(n)?Nr:Or.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ui(t,a,r,u),$o=!1;var d=t.memoizedState;l=a.state=d;var f=t.updateQueue;null!==f&&(na(t,f,r,a,i),l=t.memoizedState),s!==r||d!==l||zr.current||$o?("function"===typeof c&&(oi(t,n,c,r),l=t.memoizedState),(s=$o||si(t,n,s,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:ri(t.type,s),l=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Wo(u):u=Mr(t,u=Rr(n)?Nr:Or.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ui(t,a,r,u),$o=!1,l=t.memoizedState,d=a.state=l,null!==(f=t.updateQueue)&&(na(t,f,r,a,i),d=t.memoizedState),s!==r||l!==d||zr.current||$o?("function"===typeof c&&(oi(t,n,c,r),d=t.memoizedState),(c=$o||si(t,n,s,r,l,d,u))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Oo(e,t,n,r,o,i)}function Oo(e,t,n,r,i,o){To(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&Br(t,n,!1),Mo(e,t,o);r=t.stateNode,wo.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=gi(t,e.child,null,o),t.child=gi(t,null,s,o)):ko(e,t,s,o),t.memoizedState=r.state,i&&Br(t,n,!0),t.child}function zo(e){var t=e.stateNode;t.pendingContext?jr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&jr(0,t.context,!1),xi(e,t.containerInfo)}function No(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0===(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Xr(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Xr(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=vi(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,a?(n=i.fallback,i=$r(r,r.pendingProps),0===(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=$r(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=gi(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,(i=Xr(null,r,0,null)).child=s,0===(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Xr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=gi(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Mo(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=$r(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$r(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Ro(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||zr.current)xo=!0;else if(r<n){switch(xo=!1,t.tag){case 3:zo(t),yo();break;case 5:Si(t);break;case 1:Rr(t.type)&&Lr(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:Lo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?No(e,t,n):null!==(t=Mo(e,t,n))?t.sibling:null}return Mo(e,t,n)}}else xo=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Mr(t,Or.current);if(Uo(t,n),i=Gi(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Qi(),Rr(r)){var o=!0;Lr(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&oi(t,r,s,e),i.updater=ai,t.stateNode=i,i._reactInternalFiber=t,ci(t,r,e,n),t=Oo(null,t,r,!0,o,n)}else t.tag=0,ko(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"===typeof e)return Yr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),o=ri(e,o),s=void 0,i){case 0:s=Po(null,t,e,o,n);break;case 1:s=Ao(null,t,e,o,n);break;case 11:s=So(null,t,e,o,n);break;case 14:s=Co(null,t,e,ri(e.type,o),r,n);break;default:a("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Po(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return zo(t),null===(r=t.updateQueue)&&a("282"),i=null!==(i=t.memoizedState)?i.element:null,na(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(yo(),t=Mo(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(fo=Sr(t.stateNode.containerInfo),ho=t,i=po=!0),i?(t.effectTag|=2,t.child=vi(t,null,r,n)):(ko(e,t,r,n),yo()),t=t.child),t;case 5:return Si(t),null===e&&mo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,_r(r,i)?s=null:null!==o&&_r(r,o)&&(t.effectTag|=16),To(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(ko(e,t,s,n),t=t.child),t;case 6:return null===e&&mo(t),null;case 13:return No(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=gi(t,null,r,n):ko(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Lo(t,o=i.value),null!==s){var l=s.value;if(0===(o=Jt(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!zr.current){t=Mo(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.contextDependencies;if(null!==u){s=l.child;for(var c=u.first;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=Go(n)).tag=qo,Jo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var h=l.return;null!==h;){var d=h.alternate;if(h.childExpirationTime<c)h.childExpirationTime=c,null!==d&&d.childExpirationTime<c&&(d.childExpirationTime=c);else{if(!(null!==d&&d.childExpirationTime<c))break;d.childExpirationTime=c}h=h.return}u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}ko(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Uo(t,n),r=r(i=Wo(i,o.unstable_observedBits)),t.effectTag|=1,ko(e,t,r,n),t.child;case 14:return o=ri(i=t.type,t.pendingProps),Co(e,t,i,o=ri(i.type,o),r,n);case 15:return Eo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rr(r)?(e=!0,Lr(t)):e=!1,Uo(t,n),li(t,r,i),ci(t,r,i,n),Oo(null,t,r,!0,e,n)}a("156")}var Do={current:null},Io=null,jo=null,Fo=null;function Lo(e,t){var n=e.type._context;Pr(Do,n._currentValue),n._currentValue=t}function Bo(e){var t=Do.current;Tr(Do),e.type._context._currentValue=t}function Uo(e,t){Io=e,Fo=jo=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(xo=!0),e.contextDependencies=null}function Wo(e,t){return Fo!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(Fo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===jo?(null===Io&&a("308"),jo=t,Io.contextDependencies={first:t,expirationTime:0}):jo=jo.next=t),e._currentValue}var Vo=0,Ho=1,qo=2,Yo=3,$o=!1;function Ko(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Go(e){return{expirationTime:e,tag:Vo,payload:null,callback:null,next:null,nextEffect:null}}function Qo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Jo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ko(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ko(e.memoizedState),i=n.updateQueue=Ko(n.memoizedState)):r=e.updateQueue=Xo(i):null===i&&(i=n.updateQueue=Xo(r));null===i||r===i?Qo(r,t):null===r.lastUpdate||null===i.lastUpdate?(Qo(r,t),Qo(i,t)):(Qo(r,t),i.lastUpdate=t)}function Zo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ko(e.memoizedState):ea(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ea(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xo(t)),t}function ta(e,t,n,r,o,a){switch(n.tag){case Ho:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case Yo:e.effectTag=-2049&e.effectTag|64;case Vo:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case qo:$o=!0}return r}function na(e,t,n,r,i){$o=!1;for(var o=(t=ea(e,t)).baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=ta(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===c&&(c=l,null===a&&(o=u)),s<h&&(s=h)):(u=ta(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function ra(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ia(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ia(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ia(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function oa(e,t){return{value:e,source:t,stack:lt(t)}}function aa(e){e.effectTag|=4}var sa=void 0,la=void 0,ua=void 0,ca=void 0;sa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},la=function(){},ua=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s=t.stateNode;switch(wi(_i.current),e=null,n){case"input":a=bt(s,a),r=bt(s,r),e=[];break;case"option":a=$n(s,a),r=$n(s,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Xn(s,a),r=Xn(s,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(s.onclick=pr)}hr(n,r),s=n=void 0;var l=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var u=a[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(e||(e=[]),e.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&fr(o,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}l&&(e=e||[]).push("style",l),o=e,(t.updateQueue=o)&&aa(t)}},ca=function(e,t,n,r){n!==r&&aa(t)};var ha="function"===typeof WeakSet?WeakSet:Set;function da(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=lt(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function fa(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ka(e,n)}else t.current=null}function pa(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Ei){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Ei&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ga(e){switch("function"===typeof Wr&&Wr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(o){Ka(i,o)}}n=n.next}while(n!==t)}break;case 1:if(fa(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Ka(e,o)}break;case 5:fa(e);break;case 4:_a(e)}}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function ma(e){e:{for(var t=e.return;null!==t;){if(va(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(or(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||va(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,l=n;8===o.nodeType?o.parentNode.insertBefore(s,l):o.insertBefore(s,l)}else t.insertBefore(i.stateNode,n);else r?(s=t,l=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(l,s):(o=s).appendChild(l),null!==(s=s._reactRootContainer)&&void 0!==s||null!==o.onclick||(o.onclick=pr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function _a(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(ga(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(ga(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:pa(Pi,Ai,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i){e[R]=i,"input"===n&&"radio"===i.type&&null!=i.name&&wt(e,i),dr(n,r),r=dr(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?ur(e,s):"dangerouslySetInnerHTML"===a?ir(e,s):"children"===a?or(e,s):mt(e,a,s,r)}switch(n){case"input":xt(e,i);break;case"textarea":Qn(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Kn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Kn(e,!!i.multiple,i.defaultValue,!0):Kn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,e,r)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=xs())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=lr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new ha),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Xa(t=xs(),e),null!==(e=Qa(e,t))&&(Zr(e,t),0!==(t=e.expirationTime)&&ks(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:a("163")}}var ya="function"===typeof WeakMap?WeakMap:Map;function wa(e,t,n){(n=Go(n)).tag=Yo,n.payload={element:null};var r=t.value;return n.callback=function(){Ns(r),da(e,t)},n}function xa(e,t,n){(n=Go(n)).tag=Yo;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Fa?Fa=new Set([this]):Fa.add(this));var n=t.value,i=t.stack;da(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function ka(e){switch(e.tag){case 1:Rr(e.type)&&Dr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return ki(),Ir(),0!==(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Ci(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return ki(),null;case 10:return Bo(e),null;default:return null}}var Sa=He.ReactCurrentDispatcher,Ca=He.ReactCurrentOwner,Ea=1073741822,Ta=!1,Pa=null,Aa=null,Oa=0,za=-1,Na=!1,Ma=null,Ra=!1,Da=null,Ia=null,ja=null,Fa=null;function La(){if(null!==Pa)for(var e=Pa.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Dr();break;case 3:ki(),Ir();break;case 5:Ci(t);break;case 4:ki();break;case 10:Bo(t)}e=e.return}Aa=null,Oa=0,za=-1,Na=!1,Pa=null}function Ba(){for(;null!==Ma;){var e=Ma.effectTag;if(16&e&&or(Ma.stateNode,""),128&e){var t=Ma.alternate;null!==t&&(null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null))}switch(14&e){case 2:ma(Ma),Ma.effectTag&=-3;break;case 6:ma(Ma),Ma.effectTag&=-3,ba(Ma.alternate,Ma);break;case 4:ba(Ma.alternate,Ma);break;case 8:_a(e=Ma),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Ma=Ma.nextEffect}}function Ua(){for(;null!==Ma;){if(256&Ma.effectTag)e:{var e=Ma.alternate,t=Ma;switch(t.tag){case 0:case 11:case 15:pa(Ti,Ei,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Ma=Ma.nextEffect}}function Wa(e,t){for(;null!==Ma;){var n=Ma.effectTag;if(36&n){var r=Ma.alternate,i=Ma,o=t;switch(i.tag){case 0:case 11:case 15:pa(Oi,zi,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var l=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&ra(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}ra(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&mr(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(i=Ma.ref)&&(o=Ma.stateNode,"function"===typeof i?i(o):i.current=o)),512&n&&(Da=e),Ma=Ma.nextEffect}}function Va(){null!==Ia&&xr(Ia),null!==ja&&ja()}function Ha(e,t){Ra=Ta=!0,e.current===t&&a("177");var n=e.pendingCommitExpirationTime;0===n&&a("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Zr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,t)):t>n&&Zr(e,t)}ni(0,e)}(e,i>r?i:r),Ca.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,gr=Sn,vr=function(){var e=In();if(jn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(f){t=null;break e}var o=0,a=-1,s=-1,l=0,u=0,c=e,h=null;t:for(;;){for(var d;c!==t||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(d=c.firstChild);)h=c,c=d;for(;;){if(c===e)break t;if(h===t&&++l===r&&(a=o),h===i&&++u===n&&(s=o),null!==(d=c.nextSibling))break;h=(c=h).parentNode}c=d}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Sn=!1,Ma=r;null!==Ma;){i=!1;var s=void 0;try{Ua()}catch(u){i=!0,s=u}i&&(null===Ma&&a("178"),Ka(Ma,s),null!==Ma&&(Ma=Ma.nextEffect))}for(Ma=r;null!==Ma;){i=!1,s=void 0;try{Ba()}catch(u){i=!0,s=u}i&&(null===Ma&&a("178"),Ka(Ma,s),null!==Ma&&(Ma=Ma.nextEffect))}for(Fn(vr),vr=null,Sn=!!gr,gr=null,e.current=t,Ma=r;null!==Ma;){i=!1,s=void 0;try{Wa(e,n)}catch(u){i=!0,s=u}i&&(null===Ma&&a("178"),Ka(Ma,s),null!==Ma&&(Ma=Ma.nextEffect))}if(null!==r&&null!==Da){var l=function(e,t){ja=Ia=Da=null;var n=is;is=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;pa(Mi,Ei,o),pa(Ei,Ni,o)}catch(l){r=!0,i=l}r&&Ka(t,i)}t=t.nextEffect}while(null!==t);is=n,0!==(n=e.expirationTime)&&ks(e,n),cs||is||Ps(1073741823,!1)}.bind(null,e,r);Ia=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return wr(l)}),ja=l}Ta=Ra=!1,"function"===typeof Ur&&Ur(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Fa=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function qa(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){Pa=e;e:{var o=t,s=Oa,l=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rr(t.type)&&Dr();break;case 3:ki(),Ir(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==o&&null!==o.child||(bo(t),t.effectTag&=-3),la(t);break;case 5:Ci(t);var u=wi(yi.current);if(s=t.type,null!==o&&null!=t.stateNode)ua(o,t,s,l,u),o.ref!==t.ref&&(t.effectTag|=128);else if(l){var c=wi(_i.current);if(bo(t)){o=(l=t).stateNode;var h=l.type,d=l.memoizedProps,f=u;switch(o[M]=l,o[R]=d,s=void 0,u=h){case"iframe":case"object":Cn("load",o);break;case"video":case"audio":for(h=0;h<te.length;h++)Cn(te[h],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"form":Cn("reset",o),Cn("submit",o);break;case"details":Cn("toggle",o);break;case"input":yt(o,d),Cn("invalid",o),fr(f,"onChange");break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Cn("invalid",o),fr(f,"onChange");break;case"textarea":Gn(o,d),Cn("invalid",o),fr(f,"onChange")}for(s in hr(u,d),h=null,d)d.hasOwnProperty(s)&&(c=d[s],"children"===s?"string"===typeof c?o.textContent!==c&&(h=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(h=["children",""+c]):b.hasOwnProperty(s)&&null!=c&&fr(f,s));switch(u){case"input":We(o),kt(o,d,!0);break;case"textarea":We(o),Jn(o);break;case"select":case"option":break;default:"function"===typeof d.onClick&&(o.onclick=pr)}s=h,l.updateQueue=s,(l=null!==s)&&aa(t)}else{d=t,f=s,o=l,h=9===u.nodeType?u:u.ownerDocument,c===Zn.html&&(c=er(f)),c===Zn.html?"script"===f?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"===typeof o.is?h=h.createElement(f,{is:o.is}):(h=h.createElement(f),"select"===f&&(f=h,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):h=h.createElementNS(c,f),(o=h)[M]=d,o[R]=l,sa(o,t,!1,!1),f=o;var p=u,g=dr(h=s,d=l);switch(h){case"iframe":case"object":Cn("load",f),u=d;break;case"video":case"audio":for(u=0;u<te.length;u++)Cn(te[u],f);u=d;break;case"source":Cn("error",f),u=d;break;case"img":case"image":case"link":Cn("error",f),Cn("load",f),u=d;break;case"form":Cn("reset",f),Cn("submit",f),u=d;break;case"details":Cn("toggle",f),u=d;break;case"input":yt(f,d),u=bt(f,d),Cn("invalid",f),fr(p,"onChange");break;case"option":u=$n(f,d);break;case"select":f._wrapperState={wasMultiple:!!d.multiple},u=i({},d,{value:void 0}),Cn("invalid",f),fr(p,"onChange");break;case"textarea":Gn(f,d),u=Xn(f,d),Cn("invalid",f),fr(p,"onChange");break;default:u=d}hr(h,u),c=void 0;var v=h,m=f,_=u;for(c in _)if(_.hasOwnProperty(c)){var y=_[c];"style"===c?ur(m,y):"dangerouslySetInnerHTML"===c?null!=(y=y?y.__html:void 0)&&ir(m,y):"children"===c?"string"===typeof y?("textarea"!==v||""!==y)&&or(m,y):"number"===typeof y&&or(m,""+y):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=y&&fr(p,c):null!=y&&mt(m,c,y,g))}switch(h){case"input":We(f),kt(f,d,!1);break;case"textarea":We(f),Jn(f);break;case"option":null!=d.value&&f.setAttribute("value",""+_t(d.value));break;case"select":(u=f).multiple=!!d.multiple,null!=(f=d.value)?Kn(u,!!d.multiple,f,!1):null!=d.defaultValue&&Kn(u,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof u.onClick&&(f.onclick=pr)}(l=mr(s,l))&&aa(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?ca(o,t,o.memoizedProps,l):("string"!==typeof l&&(null===t.stateNode&&a("166")),o=wi(yi.current),wi(_i.current),bo(t)?(s=(l=t).stateNode,o=l.memoizedProps,s[M]=l,(l=s.nodeValue!==o)&&aa(t)):(s=t,(l=(9===o.nodeType?o:o.ownerDocument).createTextNode(l))[M]=t,s.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=s,Pa=t;break e}l=null!==l,s=null!==o&&null!==o.memoizedState,null!==o&&!l&&s&&(null!==(o=o.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(l||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:ki(),la(t);break;case 10:Bo(t);break;case 9:case 14:break;case 17:Rr(t.type)&&Dr();break;case 18:break;default:a("156")}Pa=null}if(t=e,1===Oa||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)(o=s.expirationTime)>l&&(l=o),(u=s.childExpirationTime)>l&&(l=u),s=s.sibling;t.childExpirationTime=l}if(null!==Pa)return Pa;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=ka(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ya(e){var t=Ro(e.alternate,e,Oa);return e.memoizedProps=e.pendingProps,null===t&&(t=qa(e)),Ca.current=null,t}function $a(e,t){Ta&&a("243"),Va(),Ta=!0;var n=Sa.current;Sa.current=lo;var r=e.nextExpirationTimeToWorkOn;r===Oa&&e===Aa&&null!==Pa||(La(),Oa=r,Pa=$r((Aa=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Pa&&!Es();)Pa=Ya(Pa);else for(;null!==Pa;)Pa=Ya(Pa)}catch(m){if(Fo=jo=Io=null,Qi(),null===Pa)i=!0,Ns(m);else{null===Pa&&a("271");var o=Pa,s=o.return;if(null!==s){e:{var l=e,u=s,c=o,h=m;if(s=Oa,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==h&&"object"===typeof h&&"function"===typeof h.then){var d=h;h=u;var f=-1,p=-1;do{if(13===h.tag){var g=h.alternate;if(null!==g&&null!==(g=g.memoizedState)){p=10*(1073741822-g.timedOutAt);break}"number"===typeof(g=h.pendingProps.maxDuration)&&(0>=g?f=0:(-1===f||g<f)&&(f=g))}h=h.return}while(null!==h);h=u;do{if((g=13===h.tag)&&(g=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),g){if(null===(u=h.updateQueue)?((u=new Set).add(d),h.updateQueue=u):u.add(d),0===(1&h.mode)){h.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((s=Go(1073741823)).tag=qo,Jo(c,s))),c.expirationTime=1073741823;break e}u=s;var v=(c=l).pingCache;null===v?(v=c.pingCache=new ya,g=new Set,v.set(d,g)):void 0===(g=v.get(d))&&(g=new Set,v.set(d,g)),g.has(u)||(g.add(u),c=Ga.bind(null,c,d,u),d.then(c,c)),-1===f?l=1073741823:(-1===p&&(p=10*(1073741822-ti(l,s))-5e3),l=p+f),0<=l&&za<l&&(za=l),h.effectTag|=2048,h.expirationTime=s;break e}h=h.return}while(null!==h);h=Error((st(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(c))}Na=!0,h=oa(h,c),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,Zo(l,s=wa(l,h,s));break e;case 1:if(f=h,p=l.type,c=l.stateNode,0===(64&l.effectTag)&&("function"===typeof p.getDerivedStateFromError||null!==c&&"function"===typeof c.componentDidCatch&&(null===Fa||!Fa.has(c)))){l.effectTag|=2048,l.expirationTime=s,Zo(l,s=xa(l,f,s));break e}}l=l.return}while(null!==l)}Pa=qa(o);continue}i=!0,Ns(m)}}break}if(Ta=!1,Sa.current=n,Fo=jo=Io=null,Qi(),i)Aa=null,e.finishedWork=null;else if(null!==Pa)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),Aa=null,Na){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return ei(e,r),void ws(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void ws(e,n,r,t,-1)}t&&-1!==za?(ei(e,r),(t=10*(1073741822-ti(e,r)))<za&&(za=t),t=10*(1073741822-xs()),t=za-t,ws(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Ka(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fa||!Fa.has(r)))return Jo(n,e=xa(n,e=oa(t,e),1073741823)),void Ja(n,1073741823);break;case 3:return Jo(n,e=wa(n,e=oa(t,e),1073741823)),void Ja(n,1073741823)}n=n.return}3===e.tag&&(Jo(e,n=wa(e,n=oa(t,e),1073741823)),Ja(e,1073741823))}function Xa(e,t){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(Ta&&!Ra)r=Oa;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==Aa&&r===Oa&&--r}return n===o.unstable_UserBlockingPriority&&(0===ss||r<ss)&&(ss=r),r}function Ga(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Aa&&Oa===n?Aa=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&ks(e,n)))}function Qa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ja(e,t){null!==(e=Qa(e,t))&&(!Ta&&0!==Oa&&t>Oa&&La(),Zr(e,t),Ta&&!Ra&&Aa===e||ks(e,e.expirationTime),ms>vs&&(ms=0,a("185")))}function Za(e,t,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var es=null,ts=null,ns=0,rs=void 0,is=!1,os=null,as=0,ss=0,ls=!1,us=null,cs=!1,hs=!1,ds=null,fs=o.unstable_now(),ps=1073741822-(fs/10|0),gs=ps,vs=50,ms=0,_s=null;function bs(){ps=1073741822-((o.unstable_now()-fs)/10|0)}function ys(e,t){if(0!==ns){if(t<ns)return;null!==rs&&o.unstable_cancelCallback(rs)}ns=t,e=o.unstable_now()-fs,rs=o.unstable_scheduleCallback(Ts,{timeout:10*(1073741822-t)-e})}function ws(e,t,n,r,i){e.expirationTime=r,0!==i||Es()?0<i&&(e.timeoutHandle=br(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,bs(),gs=ps,As(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function xs(){return is?gs:(Ss(),0!==as&&1!==as||(bs(),gs=ps),gs)}function ks(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ts?(es=ts=e,e.nextScheduledRoot=e):(ts=ts.nextScheduledRoot=e).nextScheduledRoot=es):t>e.expirationTime&&(e.expirationTime=t),is||(cs?hs&&(os=e,as=1073741823,Os(e,1073741823,!1)):1073741823===t?Ps(1073741823,!1):ys(e,t))}function Ss(){var e=0,t=null;if(null!==ts)for(var n=ts,r=es;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ts)&&a("244"),r===r.nextScheduledRoot){es=ts=r.nextScheduledRoot=null;break}if(r===es)es=i=r.nextScheduledRoot,ts.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ts){(ts=n).nextScheduledRoot=es,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ts)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}os=t,as=e}var Cs=!1;function Es(){return!!Cs||!!o.unstable_shouldYield()&&(Cs=!0)}function Ts(){try{if(!Es()&&null!==es){bs();var e=es;do{var t=e.expirationTime;0!==t&&ps<=t&&(e.nextExpirationTimeToWorkOn=ps),e=e.nextScheduledRoot}while(e!==es)}Ps(0,!0)}finally{Cs=!1}}function Ps(e,t){if(Ss(),t)for(bs(),gs=ps;null!==os&&0!==as&&e<=as&&!(Cs&&ps>as);)Os(os,as,ps>as),Ss(),bs(),gs=ps;else for(;null!==os&&0!==as&&e<=as;)Os(os,as,!1),Ss();if(t&&(ns=0,rs=null),0!==as&&ys(os,as),ms=0,_s=null,null!==ds)for(e=ds,ds=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){ls||(ls=!0,us=r)}}if(ls)throw e=us,us=null,ls=!1,e}function As(e,t){is&&a("253"),os=e,as=t,Os(e,t,!1),Ps(1073741823,!1)}function Os(e,t,n){if(is&&a("245"),is=!0,n){var r=e.finishedWork;null!==r?zs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,yr(r)),$a(e,n),null!==(r=e.finishedWork)&&(Es()?e.finishedWork=r:zs(e,r,t)))}else null!==(r=e.finishedWork)?zs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,yr(r)),$a(e,n),null!==(r=e.finishedWork)&&zs(e,r,t));is=!1}function zs(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===ds?ds=[r]:ds.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===_s?ms++:(_s=e,ms=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Ha(e,t)})}function Ns(e){null===os&&a("246"),os.expirationTime=0,ls||(ls=!0,us=e)}function Ms(e,t){var n=cs;cs=!0;try{return e(t)}finally{(cs=n)||is||Ps(1073741823,!1)}}function Rs(e,t){if(cs&&!hs){hs=!0;try{return e(t)}finally{hs=!1}}return e(t)}function Ds(e,t,n){cs||is||0===ss||(Ps(ss,!1),ss=0);var r=cs;cs=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(cs=r)||is||Ps(1073741823,!1)}}function Is(e,t,n,r,i){var o=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var l=n.type;if(Rr(l)){n=Fr(n,l,s);break e}}n=s}else n=Ar;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Go(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Va(),Jo(o,i),Ja(o,r),r}function js(e,t,n,r){var i=t.current;return Is(e,t,n,i=Xa(xs(),i),r)}function Fs(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ls(e){var t=1073741822-25*(1+((1073741822-xs()+500)/25|0));t>=Ea&&(t=Ea-1),this._expirationTime=Ea=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Us(e,t,n){e={current:t=qr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Ws(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vs(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var e=Fs(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Us(e,!1,t)}(n,r),"function"===typeof i){var s=i;i=function(){var e=Fs(o._internalRoot);s.call(e)}}Rs(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Fs(o._internalRoot)}function Hs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ws(t)||a("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ke,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ee=function(e,t,n){switch(t){case"input":if(xt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=F(r);i||a("90"),Ve(r),xt(r,i)}}}break;case"textarea":Qn(e,n);break;case"select":null!=(t=n.value)&&Kn(e,!!n.multiple,t,!1)}},Ls.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Bs;return Is(e,t,null,n,r._onCommit),r},Ls.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ls.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,As(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ls.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Bs.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&a("191",n),n()}}},Us.prototype.render=function(e,t){var n=this._internalRoot,r=new Bs;return null!==(t=void 0===t?null:t)&&r.then(t),js(e,n,null,r._onCommit),r},Us.prototype.unmount=function(e){var t=this._internalRoot,n=new Bs;return null!==(e=void 0===e?null:e)&&n.then(e),js(null,t,null,n._onCommit),n},Us.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Bs;return null!==(n=void 0===n?null:n)&&i.then(n),js(t,r,e,i._onCommit),i},Us.prototype.createBatch=function(){var e=new Ls(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ne=Ms,Me=Ds,Re=function(){is||0===ss||(Ps(ss,!1),ss=0)};var qs={createPortal:Hs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return Ws(t)||a("200"),Vs(null,e,t,!0,n)},render:function(e,t,n){return Ws(t)||a("200"),Vs(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Ws(n)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),Vs(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Ws(e)||a("40"),!!e._reactRootContainer&&(Rs(function(){Vs(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Hs.apply(void 0,arguments)},unstable_batchedUpdates:Ms,unstable_interactiveUpdates:Ds,flushSync:function(e,t){is&&a("187");var n=cs;cs=!0;try{return Za(e,t)}finally{cs=n,Ps(1073741823,!1)}},unstable_createRoot:function(e,t){return Ws(e)||a("299","unstable_createRoot"),new Us(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=cs;cs=!0;try{Za(e)}finally{(cs=t)||is||Ps(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[I,j,F,A.injectEventPluginsByName,_,H,function(e){E(e,V)},Oe,ze,Pn,z]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ur=Vr(function(e){return t.onCommitFiberRoot(n,e)}),Wr=Vr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(i({},e,{overrideProps:null,currentDispatcherRef:He.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:D,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Ys={default:qs},$s=Ys&&qs||Ys;e.exports=$s.default||$s},function(e,t,n){"use strict";e.exports=n(70)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,l=!1;function u(){if(!s){var e=n.expirationTime;l?k():l=!0,x(d,e)}}function c(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,s=a;i=e,a=t;try{var l=r()}finally{i=o,a=s}if("function"===typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,u()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{do{c()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?u():l=!1}}}function d(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{c()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{c()}while(null!==n&&!S())}finally{s=!1,r=i,null!==n?u():l=!1,h()}}var f,p,g=Date,v="function"===typeof setTimeout?setTimeout:void 0,m="function"===typeof clearTimeout?clearTimeout:void 0,_="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function y(e){f=_(function(t){m(p),e(t)}),p=v(function(){b(f),e(t.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return g.now()};var x,k,S,C=null;if("undefined"!==typeof window?C=window:"undefined"!==typeof e&&(C=e),C&&C._schedMock){var E=C._schedMock;x=E[0],k=E[1],S=E[2],t.unstable_now=E[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var T=null,P=function(e){if(null!==T)try{T(e)}finally{T=null}};x=function(e){null!==T?setTimeout(x,0,e):(T=e,setTimeout(P,0,!1))},k=function(){T=null},S=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof _&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,O=!1,z=-1,N=!1,M=!1,R=0,D=33,I=33;S=function(){return R<=t.unstable_now()};var j=new MessageChannel,F=j.port2;j.port1.onmessage=function(){O=!1;var e=A,n=z;A=null,z=-1;var r=t.unstable_now(),i=!1;if(0>=R-r){if(!(-1!==n&&n<=r))return N||(N=!0,y(L)),A=e,void(z=n);i=!0}if(null!==e){M=!0;try{e(i)}finally{M=!1}}};var L=function e(t){if(null!==A){y(e);var n=t-R+I;n<I&&D<I?(8>n&&(n=8),I=n<D?D:n):D=n,R=t+I,O||(O=!0,F.postMessage(void 0))}else N=!1};x=function(e,t){A=e,z=t,M||0>t?F.postMessage(void 0):N||(N=!0,y(L))},k=function(){A=null,O=!1,z=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,a=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=a,h()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,a=o;i=n,o=t.unstable_now();try{return e()}finally{i=r,o=a,h()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==o?o:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,u();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=e,u()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,a=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=a,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||S())},t.unstable_continueExecution=function(){null!==n&&u()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(33))},,function(e,t,n){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(73),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",u="object"===typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=y;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={},v={};v[a]=function(){return this};var m=Object.getPrototypeOf,_=m&&m(m(z([])));_&&_!==r&&i.call(_,a)&&(v=_);var b=S.prototype=x.prototype=Object.create(v);k.prototype=b.constructor=S,S.constructor=k,S[l]=k.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(b),e},c.awrap=function(e){return{__await:e}},C(E.prototype),E.prototype[s]=function(){return this},c.AsyncIterator=E,c.async=function(e,t,n,r){var i=new E(y(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},C(b),b[l]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=z,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:z(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function y(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=w(e,t,n);if("normal"===l.type){if(r=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function x(){}function k(){}function S(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=w(e[n],e,r);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},function(e){return t("throw",e,o,a)})}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function T(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function z(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},,,function(e,t,n){},function(e,t,n){"use strict";var r=n(78);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,,,,,function(e,t,n){var r=n(34),i=n(15),o=n(16),a=n(29),s=n(30),l=n(22),u=n(45),c=(n(23),n(47)),h=n(35),d=n(26),f=n(46),p=n(88),g=n(48),v=n(93),m=function(){"use strict";function e(t){i(this,e),this.graph=null,this.doubleBondConfigCount=0,this.doubleBondConfig=null,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.canvasWrapper=null,this.totalOverlapScore=0,this.defaultOptions={width:500,height:500,bondThickness:.6,bondLength:15,shortBondLength:.85,bondSpacing:.18*15,atomVisualization:"default",isomeric:!0,debug:!1,terminalCarbons:!1,explicitHydrogens:!1,overlapSensitivity:.42,overlapResolutionIterations:1,compactDrawing:!0,fontSizeLarge:5,fontSizeSmall:3,padding:20,themes:{dark:{C:"#fff",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#fff",BACKGROUND:"#141414"},light:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#222",BACKGROUND:"#fff"}}},this.opts=this.extend(!0,this.defaultOptions,t),this.opts.halfBondSpacing=this.opts.bondSpacing/2,this.opts.bondLengthSq=this.opts.bondLength*this.opts.bondLength,this.opts.halfFontSizeLarge=this.opts.fontSizeLarge/2,this.opts.quarterFontSizeLarge=this.opts.fontSizeLarge/4,this.opts.fifthFontSizeSmall=this.opts.fontSizeSmall/5,this.theme=this.opts.themes.dark}return o(e,[{key:"extend",value:function(){var e=this,t={},n=!1,r=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],r++);for(var o=function(r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n&&"[object Object]"===Object.prototype.toString.call(r[i])?t[i]=e.extend(!0,t[i],r[i]):t[i]=r[i])};r<i;r++){o(arguments[r])}return t}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.data=e,this.infoOnly=r,this.infoOnly||(this.canvasWrapper=new p(t,this.opts.themes[n],this.opts)),this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.graph=new g(e,this.opts.isomeric),this.rings=Array(),this.ringConnections=Array(),this.originalRings=Array(),this.originalRingConnections=Array(),this.bridgedRing=!1,this.doubleBondConfigCount=null,this.doubleBondConfig=null,this.initRings(),this.initHydrogens(),!this.infoOnly){this.position(),this.restoreRingInformation(),this.resolvePrimaryOverlaps();var i=this.getOverlapScore();this.totalOverlapScore=this.getOverlapScore().total;for(var o=0;o<this.opts.overlapResolutionIterations;o++)for(var s=0;s<this.graph.edges.length;s++){var l=this.graph.edges[s];if(this.isEdgeRotatable(l)){var u=this.graph.getTreeDepth(l.sourceId,l.targetId),c=this.graph.getTreeDepth(l.targetId,l.sourceId),h=l.targetId,d=l.sourceId;if(u>c&&(h=l.sourceId,d=l.targetId),this.getSubtreeOverlapScore(d,h,i.vertexScores).value>this.opts.overlapSensitivity){var f=this.graph.vertices[h],v=this.graph.vertices[d],m=v.getNeighbours(h);if(1===m.length){var _=this.graph.vertices[m[0]],b=_.position.getRotateAwayFromAngle(f.position,v.position,a.toRad(120));this.rotateSubtree(_.id,v.id,b,v.position);var y=this.getOverlapScore().total;y>this.totalOverlapScore?this.rotateSubtree(_.id,v.id,-b,v.position):this.totalOverlapScore=y}else if(2===m.length){if(0!==v.value.rings.length&&0!==f.value.rings.length)continue;var w=this.graph.vertices[m[0]],x=this.graph.vertices[m[1]];if(1===w.value.rings.length&&1===x.value.rings.length){if(w.value.rings[0]!==x.value.rings[0])continue}else{if(0!==w.value.rings.length||0!==x.value.rings.length)continue;var k=w.position.getRotateAwayFromAngle(f.position,v.position,a.toRad(120)),S=x.position.getRotateAwayFromAngle(f.position,v.position,a.toRad(120));this.rotateSubtree(w.id,v.id,k,v.position),this.rotateSubtree(x.id,v.id,S,v.position);var C=this.getOverlapScore().total;C>this.totalOverlapScore?(this.rotateSubtree(w.id,v.id,-k,v.position),this.rotateSubtree(x.id,v.id,-S,v.position)):this.totalOverlapScore=C}}i=this.getOverlapScore()}}}this.resolveSecondaryOverlaps(i.scores),this.opts.isomeric&&this.annotateStereochemistry(),this.opts.compactDrawing&&"default"===this.opts.atomVisualization&&this.initPseudoElements(),this.rotateDrawing(),this.canvasWrapper.scale(this.graph.vertices),this.drawEdges(this.opts.debug),this.drawVertices(this.opts.debug),this.canvasWrapper.reset()}}},{key:"edgeRingCount",value:function(e){var t=this.graph.edges[e],n=this.graph.vertices[t.sourceId],r=this.graph.vertices[t.targetId];return Math.min(n.value.rings.length,r.value.rings.length)}},{key:"getBridgedRings",value:function(){for(var e=Array(),t=0;t<this.rings.length;t++)this.rings[t].isBridged&&e.push(this.rings[t]);return e}},{key:"getFusedRings",value:function(){for(var e=Array(),t=0;t<this.rings.length;t++)this.rings[t].isFused&&e.push(this.rings[t]);return e}},{key:"getSpiros",value:function(){for(var e=Array(),t=0;t<this.rings.length;t++)this.rings[t].isSpiro&&e.push(this.rings[t]);return e}},{key:"printRingInfo",value:function(){for(var e="",t=0;t<this.rings.length;t++){var n=this.rings[t];e+=n.id+";",e+=n.members.length+";",e+=n.neighbours.length+";",e+=n.isSpiro?"true;":"false;",e+=n.isFused?"true;":"false;",e+=n.isBridged?"true;":"false;",e+=n.rings.length+";",e+="\n"}return e}},{key:"rotateDrawing",value:function(){for(var e=0,t=0,n=0,r=0;r<this.graph.vertices.length;r++){var i=this.graph.vertices[r];if(i.value.isDrawn)for(var o=r+1;o<this.graph.vertices.length;o++){var a=this.graph.vertices[o];if(a.value.isDrawn){var s=i.position.distanceSq(a.position);s>n&&(n=s,e=r,t=o)}}}var u=-l.subtract(this.graph.vertices[e].position,this.graph.vertices[t].position).angle();if(!isNaN(u)){var c=u%.523599;c<.2617995?u-=c:u+=.523599-c;for(r=0;r<this.graph.vertices.length;r++)r!==t&&this.graph.vertices[r].position.rotateAround(u,this.graph.vertices[t].position);for(r=0;r<this.rings.length;r++)this.rings[r].center.rotateAround(u,this.graph.vertices[t].position)}}},{key:"getTotalOverlapScore",value:function(){return this.totalOverlapScore}},{key:"getRingCount",value:function(){return this.rings.length}},{key:"hasBridgedRing",value:function(){return this.bridgedRing}},{key:"getHeavyAtomCount",value:function(){for(var e=0,t=0;t<this.graph.vertices.length;t++)"H"!==this.graph.vertices[t].value.element&&e++;return e}},{key:"getMolecularFormula",value:function(){for(var e="",t=new Map,n=0;n<this.graph.vertices.length;n++){var r=this.graph.vertices[n].value;if(t.has(r.element)?t.set(r.element,t.get(r.element)+1):t.set(r.element,1),r.bracket&&!r.bracket.chirality&&(t.has("H")?t.set("H",t.get("H")+r.bracket.hcount):t.set("H",r.bracket.hcount)),!r.bracket){var i=h.maxBonds[r.element]-r.bondCount;r.isPartOfAromaticRing&&i--,t.has("H")?t.set("H",t.get("H")+i):t.set("H",i)}}if(t.has("C")){var o=t.get("C");e+="C"+(o>1?o:""),t.delete("C")}if(t.has("H")){var a=t.get("H");e+="H"+(a>1?a:""),t.delete("H")}return Object.keys(h.atomicNumbers).sort().map(function(n){if(t.has(n)){var r=t.get(n);e+=n+(r>1?r:"")}}),e}},{key:"getRingbondType",value:function(e,t){if(e.value.getRingbondCount()<1||t.value.getRingbondCount()<1)return null;for(var n=0;n<e.value.ringbonds.length;n++)for(var r=0;r<t.value.ringbonds.length;r++)if(e.value.ringbonds[n].id===t.value.ringbonds[r].id)return"-"===e.value.ringbonds[n].bondType?t.value.ringbonds[r].bond:e.value.ringbonds[n].bond;return null}},{key:"initRings",value:function(){for(var e=new Map,t=this.graph.vertices.length-1;t>=0;t--){var n=this.graph.vertices[t];if(0!==n.value.ringbonds.length)for(var i=0;i<n.value.ringbonds.length;i++){var o=n.value.ringbonds[i].id,a=n.value.ringbonds[i].bond;if(e.has(o)){var s=n.id,l=e.get(o)[0],u=e.get(o)[1],h=new c(s,l,1);h.setBondType(u||a||"-");var p=this.graph.addEdge(h),g=this.graph.vertices[l];n.addRingbondChild(l,i),n.value.addNeighbouringElement(g.value.element),g.addRingbondChild(s,i),g.value.addNeighbouringElement(n.value.element),n.edges.push(p),g.edges.push(p),e.delete(o)}else e.set(o,[n.id,a])}}var m=v.getRings(this.graph);if(null!==m){for(t=0;t<m.length;t++){var _=r(m[t]),b=this.addRing(new d(_));for(i=0;i<_.length;i++)this.graph.vertices[_[i]].value.rings.push(b)}for(t=0;t<this.rings.length-1;t++)for(i=t+1;i<this.rings.length;i++){var y=this.rings[t],w=this.rings[i],x=new f(y,w);x.vertices.size>0&&this.addRingConnection(x)}for(t=0;t<this.rings.length;t++){var k=this.rings[t];k.neighbours=f.getNeighbours(this.ringConnections,k.id)}for(t=0;t<this.rings.length;t++){var S=this.rings[t];this.graph.vertices[S.members[0]].value.addAnchoredRing(S.id)}for(this.backupRingInformation();this.rings.length>0;){var C=-1;for(t=0;t<this.rings.length;t++){var E=this.rings[t];this.isPartOfBridgedRing(E.id)&&!E.isBridged&&(C=E.id)}if(-1===C)break;var T=this.getRing(C),P=this.getBridgedRingRings(T.id);this.bridgedRing=!0,this.createBridgedRing(P,T.members[0]);for(t=0;t<P.length;t++)this.removeRing(P[t])}}}},{key:"initHydrogens",value:function(){if(!this.opts.explicitHydrogens)for(var e=0;e<this.graph.vertices.length;e++){var t=this.graph.vertices[e];if("H"===t.value.element){var n=this.graph.vertices[t.neighbours[0]];n.value.hasHydrogen=!0,(!n.value.isStereoCenter||n.value.rings.length<2&&!n.value.bridgedRing||n.value.bridgedRing&&n.value.originalRings.length<2)&&(t.value.isDrawn=!1)}}}},{key:"getBridgedRingRings",value:function(e){var t=Array(),n=this;return function e(r){var i=n.getRing(r);t.push(r);for(var o=0;o<i.neighbours.length;o++){var a=i.neighbours[o];-1===t.indexOf(a)&&a!==r&&f.isBridge(n.ringConnections,n.graph.vertices,r,a)&&e(a)}}(e),s.unique(t)}},{key:"isPartOfBridgedRing",value:function(e){for(var t=0;t<this.ringConnections.length;t++)if(this.ringConnections[t].containsRing(e)&&this.ringConnections[t].isBridge(this.graph.vertices))return!0;return!1}},{key:"createBridgedRing",value:function(e,t){for(var n=new Set,i=new Set,o=new Set,a=0;a<e.length;a++){var l=this.getRing(e[a]);l.isPartOfBridged=!0;for(var u=0;u<l.members.length;u++)i.add(l.members[u]);for(u=0;u<l.neighbours.length;u++){var c=l.neighbours[u];-1===e.indexOf(c)&&o.add(l.neighbours[u])}}var h=new Set,f=!0,p=!1,g=void 0;try{for(var v,m=i[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var _=v.value,b=this.graph.vertices[_],y=s.intersection(e,b.value.rings);1===b.value.rings.length||1===y.length?n.add(b.id):h.add(b.id)}}catch(Y){p=!0,g=Y}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}Array();var w=Array(),x=!0,k=!1,S=void 0;try{for(var C,E=h[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){for(var T=C.value,P=this.graph.vertices[T],A=!1,O=0;O<P.edges.length;O++)1===this.edgeRingCount(P.edges[O])&&(A=!0);A?(P.value.isBridgeNode=!0,n.add(P.id)):(P.value.isBridge=!0,n.add(P.id))}}catch(Y){k=!0,S=Y}finally{try{x||null==E.return||E.return()}finally{if(k)throw S}}var z=new d(r(n));z.isBridged=!0,z.neighbours=r(o);for(a=0;a<e.length;a++)z.rings.push(this.getRing(e[a]).clone());this.addRing(z);for(a=0;a<z.members.length;a++)this.graph.vertices[z.members[a]].value.bridgedRing=z.id;for(a=0;a<w.length;a++){this.graph.vertices[w[a]].value.rings=Array()}var N=!0,M=!1,R=void 0;try{for(var D,I=n[Symbol.iterator]();!(N=(D=I.next()).done);N=!0){var j=D.value,F=this.graph.vertices[j];F.value.rings=s.removeAll(F.value.rings,e),F.value.rings.push(z.id)}}catch(Y){M=!0,R=Y}finally{try{N||null==I.return||I.return()}finally{if(M)throw R}}for(a=0;a<e.length;a++)for(u=a+1;u<e.length;u++)this.removeRingConnectionsBetween(e[a],e[u]);var L=!0,B=!1,U=void 0;try{for(var W,V=o[Symbol.iterator]();!(L=(W=V.next()).done);L=!0){var H=W.value,q=this.getRingConnections(H,e);for(u=0;u<q.length;u++)this.getRingConnection(q[u]).updateOther(z.id,H);this.getRing(H).neighbours.push(z.id)}}catch(Y){B=!0,U=Y}finally{try{L||null==V.return||V.return()}finally{if(B)throw U}}return z}},{key:"areVerticesInSameRing",value:function(e,t){for(var n=0;n<e.value.rings.length;n++)for(var r=0;r<t.value.rings.length;r++)if(e.value.rings[n]===t.value.rings[r])return!0;return!1}},{key:"getCommonRings",value:function(e,t){for(var n=Array(),r=0;r<e.value.rings.length;r++)for(var i=0;i<t.value.rings.length;i++)e.value.rings[r]==t.value.rings[i]&&n.push(e.value.rings[r]);return n}},{key:"getLargestOrAromaticCommonRing",value:function(e,t){for(var n=this.getCommonRings(e,t),r=0,i=null,o=0;o<n.length;o++){var a=this.getRing(n[o]),s=a.getSize();if(a.isBenzeneLike(this.graph.vertices))return a;s>r&&(r=s,i=a)}return i}},{key:"getVerticesAt",value:function(e,t,n){for(var r=Array(),i=0;i<this.graph.vertices.length;i++){var o=this.graph.vertices[i];if(o.id!==n&&o.positioned)e.distanceSq(o.position)<=t*t&&r.push(o.id)}return r}},{key:"getClosestVertex",value:function(e){for(var t=99999,n=null,r=0;r<this.graph.vertices.length;r++){var i=this.graph.vertices[r];if(i.id!==e.id){var o=e.position.distanceSq(i.position);o<t&&(t=o,n=i)}}return n}},{key:"addRing",value:function(e){return e.id=this.ringIdCounter++,this.rings.push(e),e.id}},{key:"removeRing",value:function(e){this.rings=this.rings.filter(function(t){return t.id!==e}),this.ringConnections=this.ringConnections.filter(function(t){return t.firstRingId!==e&&t.secondRingId!==e});for(var t=0;t<this.rings.length;t++){var n=this.rings[t];n.neighbours=n.neighbours.filter(function(t){return t!==e})}}},{key:"getRing",value:function(e){for(var t=0;t<this.rings.length;t++)if(this.rings[t].id==e)return this.rings[t]}},{key:"addRingConnection",value:function(e){return e.id=this.ringConnectionIdCounter++,this.ringConnections.push(e),e.id}},{key:"removeRingConnection",value:function(e){this.ringConnections=this.ringConnections.filter(function(t){return t.id!==e})}},{key:"removeRingConnectionsBetween",value:function(e,t){for(var n=Array(),r=0;r<this.ringConnections.length;r++){var i=this.ringConnections[r];(i.firstRingId===e&&i.secondRingId===t||i.firstRingId===t&&i.secondRingId===e)&&n.push(i.id)}for(r=0;r<n.length;r++)this.removeRingConnection(n[r])}},{key:"getRingConnection",value:function(e){for(var t=0;t<this.ringConnections.length;t++)if(this.ringConnections[t].id==e)return this.ringConnections[t]}},{key:"getRingConnections",value:function(e,t){for(var n=Array(),r=0;r<this.ringConnections.length;r++)for(var i=this.ringConnections[r],o=0;o<t.length;o++){var a=t[o];(i.firstRingId===e&&i.secondRingId===a||i.firstRingId===a&&i.secondRingId===e)&&n.push(i.id)}return n}},{key:"getOverlapScore",value:function(){for(var e=0,t=new Float32Array(this.graph.vertices.length),n=0;n<this.graph.vertices.length;n++)t[n]=0;for(n=0;n<this.graph.vertices.length;n++)for(var r=this.graph.vertices.length;--r>n;){var i=this.graph.vertices[n],o=this.graph.vertices[r];if(i.value.isDrawn&&o.value.isDrawn){var a=l.subtract(i.position,o.position).lengthSq();if(a<this.opts.bondLengthSq){var s=(this.opts.bondLength-Math.sqrt(a))/this.opts.bondLength;e+=s,t[n]+=s,t[r]+=s}}}var u=Array();for(n=0;n<this.graph.vertices.length;n++)u.push({id:n,score:t[n]});return u.sort(function(e,t){return t.score-e.score}),{total:e,scores:u,vertexScores:t}}},{key:"chooseSide",value:function(e,t,n){for(var r=e.getNeighbours(t.id),i=t.getNeighbours(e.id),o=r.length,a=i.length,l=s.merge(r,i),u=[0,0],c=0;c<l.length;c++){this.graph.vertices[l[c]].position.sameSideAs(e.position,t.position,n[0])?u[0]++:u[1]++}var h=[0,0];for(c=0;c<this.graph.vertices.length;c++){this.graph.vertices[c].position.sameSideAs(e.position,t.position,n[0])?h[0]++:h[1]++}return{totalSideCount:h,totalPosition:h[0]>h[1]?0:1,sideCount:u,position:u[0]>u[1]?0:1,anCount:o,bnCount:a}}},{key:"setRingCenter",value:function(e){for(var t=e.getSize(),n=new l(0,0),r=0;r<t;r++)n.add(this.graph.vertices[e.members[r]].position);e.center=n.divide(t)}},{key:"getSubringCenter",value:function(e,t){for(var n=t.value.originalRings,r=e.center,i=Number.MAX_VALUE,o=0;o<n.length;o++)for(var a=0;a<e.rings.length;a++)n[o]===e.rings[a].id&&e.rings[a].getSize()<i&&(r=e.rings[a].center,i=e.rings[a].getSize());return r}},{key:"drawEdges",value:function(e){var t=this,n=Array(this.graph.edges.length);if(n.fill(!1),this.graph.traverseBF(0,function(r){for(var i=t.graph.getEdges(r.id),o=0;o<i.length;o++){var a=i[o];n[a]||(n[a]=!0,t.drawEdge(a,e))}}),!this.bridgedRing)for(var r=0;r<this.rings.length;r++){var i=this.rings[r];this.isRingAromatic(i)&&this.canvasWrapper.drawAromaticityRing(i)}}},{key:"drawEdge",value:function(e,t){var n=this.graph.edges[e],r=this.graph.vertices[n.sourceId],i=this.graph.vertices[n.targetId],o=r.value.element,a=i.value.element;if(r.value.isDrawn&&i.value.isDrawn||"default"!==this.opts.atomVisualization){var c=r.position,h=i.position,d=this.getEdgeNormals(n),f=s.clone(d);if(f[0].multiplyScalar(10).add(c),f[1].multiplyScalar(10).add(c),"="===n.bondType||"="===this.getRingbondType(r,i)||n.isPartOfAromaticRing&&this.bridgedRing){var p=this.areVerticesInSameRing(r,i),g=this.chooseSide(r,i,f);if(p){var v=this.getLargestOrAromaticCommonRing(r,i).center;d[0].multiplyScalar(this.opts.bondSpacing),d[1].multiplyScalar(this.opts.bondSpacing);var m=null;(m=v.sameSideAs(r.position,i.position,l.add(c,d[0]))?new u(l.add(c,d[0]),l.add(h,d[0]),o,a):new u(l.add(c,d[1]),l.add(h,d[1]),o,a)).shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),n.isPartOfAromaticRing?this.canvasWrapper.drawLine(m,!0):this.canvasWrapper.drawLine(m),this.canvasWrapper.drawLine(new u(c,h,o,a))}else if(n.center||r.isTerminal()&&i.isTerminal()){d[0].multiplyScalar(this.opts.halfBondSpacing),d[1].multiplyScalar(this.opts.halfBondSpacing);var _=new u(l.add(c,d[0]),l.add(h,d[0]),o,a),b=new u(l.add(c,d[1]),l.add(h,d[1]),o,a);this.canvasWrapper.drawLine(_),this.canvasWrapper.drawLine(b)}else if(0==g.anCount&&g.bnCount>1||0==g.bnCount&&g.anCount>1){d[0].multiplyScalar(this.opts.halfBondSpacing),d[1].multiplyScalar(this.opts.halfBondSpacing);var y=new u(l.add(c,d[0]),l.add(h,d[0]),o,a),w=new u(l.add(c,d[1]),l.add(h,d[1]),o,a);this.canvasWrapper.drawLine(y),this.canvasWrapper.drawLine(w)}else if(g.sideCount[0]>g.sideCount[1]){d[0].multiplyScalar(this.opts.bondSpacing),d[1].multiplyScalar(this.opts.bondSpacing);var x=new u(l.add(c,d[0]),l.add(h,d[0]),o,a);x.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(x),this.canvasWrapper.drawLine(new u(c,h,o,a))}else if(g.sideCount[0]<g.sideCount[1]){d[0].multiplyScalar(this.opts.bondSpacing),d[1].multiplyScalar(this.opts.bondSpacing);var k=new u(l.add(c,d[1]),l.add(h,d[1]),o,a);k.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(k),this.canvasWrapper.drawLine(new u(c,h,o,a))}else if(g.totalSideCount[0]>g.totalSideCount[1]){d[0].multiplyScalar(this.opts.bondSpacing),d[1].multiplyScalar(this.opts.bondSpacing);var S=new u(l.add(c,d[0]),l.add(h,d[0]),o,a);S.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(S),this.canvasWrapper.drawLine(new u(c,h,o,a))}else if(g.totalSideCount[0]<=g.totalSideCount[1]){d[0].multiplyScalar(this.opts.bondSpacing),d[1].multiplyScalar(this.opts.bondSpacing);var C=new u(l.add(c,d[1]),l.add(h,d[1]),o,a);C.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(C),this.canvasWrapper.drawLine(new u(c,h,o,a))}}else if("#"===n.bondType){d[0].multiplyScalar(this.opts.bondSpacing/1.5),d[1].multiplyScalar(this.opts.bondSpacing/1.5);var E=new u(l.add(c,d[0]),l.add(h,d[0]),o,a),T=new u(l.add(c,d[1]),l.add(h,d[1]),o,a);this.canvasWrapper.drawLine(E),this.canvasWrapper.drawLine(T),this.canvasWrapper.drawLine(new u(c,h,o,a))}else if("."===n.bondType);else{var P=r.value.isStereoCenter,A=i.value.isStereoCenter;"up"===n.wedge?this.canvasWrapper.drawWedge(new u(c,h,o,a,P,A)):"down"===n.wedge?this.canvasWrapper.drawDashedWedge(new u(c,h,o,a,P,A)):this.canvasWrapper.drawLine(new u(c,h,o,a,P,A))}if(t){var O=l.midpoint(c,h);this.canvasWrapper.drawDebugText(O.x,O.y,"e: "+e)}}}},{key:"drawVertices",value:function(e){var t=this.graph.vertices.length;for(t=0;t<this.graph.vertices.length;t++){var n=this.graph.vertices[t],r=n.value,i=0,o=0,a=n.value.bondCount,u=r.element,c=h.maxBonds[u]-a,d=n.getTextDirection(this.graph.vertices),f=!(!this.opts.terminalCarbons&&"C"===u&&!r.hasAttachedPseudoElements)&&n.isTerminal(),p="C"===r.element;if("N"===r.element&&r.isPartOfAromaticRing&&(c=0),r.bracket&&(c=r.bracket.hcount,i=r.bracket.charge,o=r.bracket.isotope),"allballs"===this.opts.atomVisualization)this.canvasWrapper.drawBall(n.position.x,n.position.y,u);else if(r.isDrawn&&(!p||r.drawExplicit||f||r.hasAttachedPseudoElements)||1===this.graph.vertices.length)"default"===this.opts.atomVisualization?this.canvasWrapper.drawText(n.position.x,n.position.y,u,c,d,f,i,o,r.getAttachedPseudoElements()):"balls"===this.opts.atomVisualization&&this.canvasWrapper.drawBall(n.position.x,n.position.y,u);else if(2===n.getNeighbourCount()&&1==n.forcePositioned){var g=this.graph.vertices[n.neighbours[0]].position,v=this.graph.vertices[n.neighbours[1]].position,m=l.threePointangle(n.position,g,v);Math.abs(Math.PI-m)<.1&&this.canvasWrapper.drawPoint(n.position.x,n.position.y,u)}if(e){var _="v: "+n.id+" "+s.print(r.ringbonds);this.canvasWrapper.drawDebugText(n.position.x,n.position.y,_)}}if(this.opts.debug)for(t=0;t<this.rings.length;t++){var b=this.rings[t].center;this.canvasWrapper.drawDebugPoint(b.x,b.y,"r: "+this.rings[t].id)}}},{key:"position",value:function(){for(var e=null,t=0;t<this.graph.vertices.length;t++)if(null!==this.graph.vertices[t].value.bridgedRing){e=this.graph.vertices[t];break}for(t=0;t<this.rings.length;t++)this.rings[t].isBridged&&(e=this.graph.vertices[this.rings[t].members[0]]);this.rings.length>0&&null===e&&(e=this.graph.vertices[this.rings[0].members[0]]),null===e&&(e=this.graph.vertices[0]),this.createNextBond(e,null,0)}},{key:"backupRingInformation",value:function(){this.originalRings=Array(),this.originalRingConnections=Array();for(var e=0;e<this.rings.length;e++)this.originalRings.push(this.rings[e]);for(e=0;e<this.ringConnections.length;e++)this.originalRingConnections.push(this.ringConnections[e]);for(e=0;e<this.graph.vertices.length;e++)this.graph.vertices[e].value.backupRings()}},{key:"restoreRingInformation",value:function(){var e=this.getBridgedRings();this.rings=Array(),this.ringConnections=Array();for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.rings.length;r++){var i=n.rings[r];this.originalRings[i.id].center=i.center}for(t=0;t<this.originalRings.length;t++)this.rings.push(this.originalRings[t]);for(t=0;t<this.originalRingConnections.length;t++)this.ringConnections.push(this.originalRingConnections[t]);for(t=0;t<this.graph.vertices.length;t++)this.graph.vertices[t].value.restoreRings()}},{key:"createRing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e.positioned){t=t||new l(0,0);var i=e.getOrderedNeighbours(this.ringConnections),o=n?l.subtract(n.position,t).angle():0,s=a.polyCircumradius(this.opts.bondLength,e.getSize()),u=a.centralAngle(e.getSize());e.centralAngle=u;var c=o,h=this,d=n?n.id:null;if(-1===e.members.indexOf(d)&&(n&&(n.positioned=!1),d=e.members[0]),e.isBridged){this.graph.kkLayout(e.members.slice(),t,n.id,e,this.opts.bondLength),e.positioned=!0,this.setRingCenter(e),t=e.center;for(var p=0;p<e.rings.length;p++)this.setRingCenter(e.rings[p])}else e.eachMember(this.graph.vertices,function(n){var r=h.graph.vertices[n];r.positioned||r.setPosition(t.x+Math.cos(c)*s,t.y+Math.sin(c)*s),c+=u,(!e.isBridged||e.rings.length<3)&&(r.angle=c,r.positioned=!0)},d,r?r.id:null);e.positioned=!0,e.center=t;for(p=0;p<i.length;p++){var g=this.getRing(i[p].neighbour);if(!g.positioned){var v=f.getVertices(this.ringConnections,e.id,g.id);if(2===v.length){e.isFused=!0,g.isFused=!0;var m=this.graph.vertices[v[0]],_=this.graph.vertices[v[1]],b=l.midpoint(m.position,_.position),y=l.normals(m.position,_.position);y[0].normalize(),y[1].normalize();var w=a.polyCircumradius(this.opts.bondLength,g.getSize()),x=a.apothem(w,g.getSize());y[0].multiplyScalar(x).add(b),y[1].multiplyScalar(x).add(b);var k=y[0];l.subtract(t,y[1]).lengthSq()>l.subtract(t,y[0]).lengthSq()&&(k=y[1]);var S=l.subtract(m.position,k),C=l.subtract(_.position,k);-1===S.clockwise(C)?g.positioned||this.createRing(g,k,m,_):g.positioned||this.createRing(g,k,_,m)}else if(1===v.length){e.isSpiro=!0,g.isSpiro=!0;var E=this.graph.vertices[v[0]],T=l.subtract(t,E.position);T.invert(),T.normalize();var P=a.polyCircumradius(this.opts.bondLength,g.getSize());T.multiplyScalar(P),T.add(E.position),g.positioned||this.createRing(g,T,E)}}}for(p=0;p<e.members.length;p++)for(var A=this.graph.vertices[e.members[p]],O=A.neighbours,z=0;z<O.length;z++){var N=this.graph.vertices[O[z]];N.positioned||(N.value.isConnectedToRing=!0,this.createNextBond(N,A,0))}}}},{key:"rotateSubtree",value:function(e,t,n,r){var i=this;this.graph.traverseTree(e,t,function(e){e.position.rotateAround(n,r);for(var t=0;t<e.value.anchoredRings.length;t++){var o=i.rings[e.value.anchoredRings[t]];o&&o.center.rotateAround(n,r)}})}},{key:"getSubtreeOverlapScore",value:function(e,t,n){var r=this,i=0,o=new l(0,0),a=0;return this.graph.traverseTree(e,t,function(e){if(e.value.isDrawn){var t=n[e.id];t>r.opts.overlapSensitivity&&(i+=t,a++);var s=r.graph.vertices[e.id].position.clone();s.multiplyScalar(t),o.add(s)}}),o.divide(i),{value:i/a,center:o}}},{key:"getCurrentCenterOfMass",value:function(){for(var e=new l(0,0),t=0,n=0;n<this.graph.vertices.length;n++){var r=this.graph.vertices[n];r.positioned&&(e.add(r.position),t++)}return e.divide(t)}},{key:"getCurrentCenterOfMassInNeigbourhood",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*this.opts.bondLength,n=new l(0,0),r=0,i=t*t,o=0;o<this.graph.vertices.length;o++){var a=this.graph.vertices[o];a.positioned&&e.distanceSq(a.position)<i&&(n.add(a.position),r++)}return n.divide(r)}},{key:"resolvePrimaryOverlaps",value:function(){for(var e=Array(),t=Array(this.graph.vertices.length),n=0;n<this.rings.length;n++)for(var r=this.rings[n],i=0;i<r.members.length;i++){var o=this.graph.vertices[r.members[i]];if(!t[o.id]){t[o.id]=!0;var a=this.getNonRingNeighbours(o.id);if(a.length>1){for(var s=Array(),l=0;l<o.value.rings.length;l++)s.push(o.value.rings[l]);e.push({common:o,rings:s,vertices:a})}else if(1===a.length&&2===o.value.rings.length){var u=Array();for(l=0;l<o.value.rings.length;l++)u.push(o.value.rings[l]);e.push({common:o,rings:u,vertices:a})}}}for(n=0;n<e.length;n++){var c=e[n];if(2===c.vertices.length){var h=c.vertices[0],d=c.vertices[1];if(!h.value.isDrawn||!d.value.isDrawn)continue;var f=(2*Math.PI-this.getRing(c.rings[0]).getAngle())/6;this.rotateSubtree(h.id,c.common.id,f,c.common.position),this.rotateSubtree(d.id,c.common.id,-f,c.common.position);var p=this.getOverlapScore(),g=this.getSubtreeOverlapScore(h.id,c.common.id,p.vertexScores),v=this.getSubtreeOverlapScore(d.id,c.common.id,p.vertexScores),m=g.value+v.value;this.rotateSubtree(h.id,c.common.id,-2*f,c.common.position),this.rotateSubtree(d.id,c.common.id,2*f,c.common.position),p=this.getOverlapScore(),g=this.getSubtreeOverlapScore(h.id,c.common.id,p.vertexScores),v=this.getSubtreeOverlapScore(d.id,c.common.id,p.vertexScores),g.value+v.value>m&&(this.rotateSubtree(h.id,c.common.id,2*f,c.common.position),this.rotateSubtree(d.id,c.common.id,-2*f,c.common.position))}else 1===c.vertices.length&&c.rings.length}}},{key:"resolveSecondaryOverlaps",value:function(e){for(var t=0;t<e.length;t++)if(e[t].score>this.opts.overlapSensitivity){var n=this.graph.vertices[e[t].id];if(n.isTerminal()){var r=this.getClosestVertex(n);if(r){var i=null;i=r.isTerminal()?0===r.id?this.graph.vertices[1].position:r.previousPosition:0===r.id?this.graph.vertices[1].position:r.position;var o=0===n.id?this.graph.vertices[1].position:n.previousPosition;n.position.rotateAwayFrom(i,o,a.toRad(20))}}}}},{key:"getLastVertexWithAngle",value:function(e){for(var t=0,n=null;!t&&e;)t=(n=this.graph.vertices[e]).angle,e=n.parentVertexId;return n}},{key:"createNextBond",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e.positioned||i){var o=!1;if(t){var u=this.graph.getEdge(e.id,t.id);"/"!==u.bondType&&"\\"!==u.bondType||++this.doubleBondConfigCount%2!==1||null===this.doubleBondConfig&&(this.doubleBondConfig=u.bondType,o=!0,null===t.parentVertexId&&e.value.branchBond&&("/"===this.doubleBondConfig?this.doubleBondConfig="\\":"\\"===this.doubleBondConfig&&(this.doubleBondConfig="/")))}if(!i)if(t)if(t.value.rings.length>0){var c=t.neighbours,h=null,d=new l(0,0);if(null===t.value.bridgedRing&&t.value.rings.length>1)for(var f=0;f<c.length;f++){var p=this.graph.vertices[c[f]];if(s.containsAll(p.value.rings,t.value.rings)){h=p;break}}if(null===h){for(f=0;f<c.length;f++){var g=this.graph.vertices[c[f]];g.positioned&&this.areVerticesInSameRing(g,t)&&d.add(l.subtract(g.position,t.position))}d.invert().normalize().multiplyScalar(this.opts.bondLength).add(t.position)}else d=h.position.clone().rotateAround(Math.PI,t.position);e.previousPosition=t.position,e.setPositionFromVector(d),e.positioned=!0}else{var v=new l(this.opts.bondLength,0);v.rotate(n),v.add(t.position),e.setPositionFromVector(v),e.previousPosition=t.position,e.positioned=!0}else{var m=new l(this.opts.bondLength,0);m.rotate(a.toRad(-60)),e.previousPosition=m,e.setPosition(this.opts.bondLength,0),e.angle=a.toRad(-60),null===e.value.bridgedRing&&(e.positioned=!0)}if(null!==e.value.bridgedRing){var _=this.getRing(e.value.bridgedRing);if(!_.positioned){var b=l.subtract(e.previousPosition,e.position);b.invert(),b.normalize();var y=a.polyCircumradius(this.opts.bondLength,_.members.length);b.multiplyScalar(y),b.add(e.position),this.createRing(_,b,e)}}else if(e.value.rings.length>0){var w=this.getRing(e.value.rings[0]);if(!w.positioned){var x=l.subtract(e.previousPosition,e.position);x.invert(),x.normalize();var k=a.polyCircumradius(this.opts.bondLength,w.getSize());x.multiplyScalar(k),x.add(e.position),this.createRing(w,x,e)}}else{e.value.isStereoCenter;var S=e.getNeighbours(),C=Array();for(f=0;f<S.length;f++)this.graph.vertices[S[f]].value.isDrawn&&C.push(S[f]);t&&(C=s.remove(C,t.id));var E=e.getAngle();if(1===C.length){var T=this.graph.vertices[C[0]];if("#"===e.value.bondType||t&&"#"===t.value.bondType||"="===e.value.bondType&&t&&0===t.value.rings.length&&"="===t.value.bondType&&"-"!==e.value.branchBond){if(e.value.drawExplicit=!1,t)this.graph.getEdge(e.id,t.id).center=!0;this.graph.getEdge(e.id,T.id).center=!0,("#"===e.value.bondType||t&&"#"===t.value.bondType)&&(T.angle=0),T.drawExplicit=!0,this.createNextBond(T,e,E+T.angle)}else if(t&&t.value.rings.length>0){var P=a.toRad(60),A=-P,O=new l(this.opts.bondLength,0),z=new l(this.opts.bondLength,0);O.rotate(P).add(e.position),z.rotate(A).add(e.position);var N=this.getCurrentCenterOfMass(),M=O.distanceSq(N),R=z.distanceSq(N);T.angle=M<R?A:P,this.createNextBond(T,e,E+T.angle)}else{var D=e.angle;if(t&&t.neighbours.length>3)D=D>0?Math.min(1.0472,D):D<0?Math.max(-1.0472,D):1.0472;else if(!D){(D=this.getLastVertexWithAngle(e.id).angle)||(D=1.0472)}if(t&&!o){var I=this.graph.getEdge(e.id,T.id).bondType;"/"===I?("/"===this.doubleBondConfig||"\\"===this.doubleBondConfig&&(D=-D),this.doubleBondConfig=null):"\\"===I&&("/"===this.doubleBondConfig?D=-D:this.doubleBondConfig,this.doubleBondConfig=null)}T.angle=r?D:-D,this.createNextBond(T,e,E+T.angle)}}else if(2===C.length){var j=e.angle;j||(j=1.0472);var F=this.graph.getTreeDepth(C[0],e.id),L=this.graph.getTreeDepth(C[1],e.id),B=this.graph.vertices[C[0]],U=this.graph.vertices[C[1]];B.value.subtreeDepth=F,U.value.subtreeDepth=L;var W=this.graph.getTreeDepth(t?t.id:null,e.id);t&&(t.value.subtreeDepth=W);var V=0,H=1;"C"===U.value.element&&"C"!==B.value.element&&L>1&&F<5?(V=1,H=0):"C"!==U.value.element&&"C"===B.value.element&&F>1&&L<5?(V=0,H=1):L>F&&(V=1,H=0);var q=this.graph.vertices[C[V]],Y=this.graph.vertices[C[H]],$=(this.graph.getEdge(e.id,q.id),this.graph.getEdge(e.id,Y.id),!1);W<F&&W<L&&($=!0),Y.angle=j,q.angle=-j,"\\"===this.doubleBondConfig?"\\"===Y.value.branchBond&&(Y.angle=-j,q.angle=j):"/"===this.doubleBondConfig&&"/"===Y.value.branchBond&&(Y.angle=-j,q.angle=j),this.createNextBond(Y,e,E+Y.angle,$),this.createNextBond(q,e,E+q.angle,$)}else if(3===C.length){var K=this.graph.getTreeDepth(C[0],e.id),X=this.graph.getTreeDepth(C[1],e.id),G=this.graph.getTreeDepth(C[2],e.id),Q=this.graph.vertices[C[0]],J=this.graph.vertices[C[1]],Z=this.graph.vertices[C[2]];Q.value.subtreeDepth=K,J.value.subtreeDepth=X,Z.value.subtreeDepth=G,X>K&&X>G?(Q=this.graph.vertices[C[1]],J=this.graph.vertices[C[0]],Z=this.graph.vertices[C[2]]):G>K&&G>X&&(Q=this.graph.vertices[C[2]],J=this.graph.vertices[C[0]],Z=this.graph.vertices[C[1]]),t&&t.value.rings.length<1&&Q.value.rings.length<1&&J.value.rings.length<1&&Z.value.rings.length<1&&1===this.graph.getTreeDepth(J.id,e.id)&&1===this.graph.getTreeDepth(Z.id,e.id)&&this.graph.getTreeDepth(Q.id,e.id)>1?(Q.angle=-e.angle,e.angle>=0?(J.angle=a.toRad(30),Z.angle=a.toRad(90)):(J.angle=-a.toRad(30),Z.angle=-a.toRad(90)),this.createNextBond(Q,e,E+Q.angle),this.createNextBond(J,e,E+J.angle),this.createNextBond(Z,e,E+Z.angle)):(Q.angle=0,J.angle=a.toRad(90),Z.angle=-a.toRad(90),this.createNextBond(Q,e,E+Q.angle),this.createNextBond(J,e,E+J.angle),this.createNextBond(Z,e,E+Z.angle))}else if(4===C.length){var ee=this.graph.getTreeDepth(C[0],e.id),te=this.graph.getTreeDepth(C[1],e.id),ne=this.graph.getTreeDepth(C[2],e.id),re=this.graph.getTreeDepth(C[3],e.id),ie=this.graph.vertices[C[0]],oe=this.graph.vertices[C[1]],ae=this.graph.vertices[C[2]],se=this.graph.vertices[C[3]];ie.value.subtreeDepth=ee,oe.value.subtreeDepth=te,ae.value.subtreeDepth=ne,se.value.subtreeDepth=re,te>ee&&te>ne&&te>re?(ie=this.graph.vertices[C[1]],oe=this.graph.vertices[C[0]],ae=this.graph.vertices[C[2]],se=this.graph.vertices[C[3]]):ne>ee&&ne>te&&ne>re?(ie=this.graph.vertices[C[2]],oe=this.graph.vertices[C[0]],ae=this.graph.vertices[C[1]],se=this.graph.vertices[C[3]]):re>ee&&re>te&&re>ne&&(ie=this.graph.vertices[C[3]],oe=this.graph.vertices[C[0]],ae=this.graph.vertices[C[1]],se=this.graph.vertices[C[2]]),ie.angle=-a.toRad(36),oe.angle=a.toRad(36),ae.angle=-a.toRad(108),se.angle=a.toRad(108),this.createNextBond(ie,e,E+ie.angle),this.createNextBond(oe,e,E+oe.angle),this.createNextBond(ae,e,E+ae.angle),this.createNextBond(se,e,E+se.angle)}}}}},{key:"getCommonRingbondNeighbour",value:function(e){for(var t=e.neighbours,n=0;n<t.length;n++){var r=this.graph.vertices[t[n]];if(s.containsAll(r.value.rings,e.value.rings))return r}return null}},{key:"isPointInRing",value:function(e){for(var t=0;t<this.rings.length;t++){var n=this.rings[t];if(n.positioned){var r=a.polyCircumradius(this.opts.bondLength,n.getSize()),i=r*r;if(e.distanceSq(n.center)<i)return!0}}return!1}},{key:"isEdgeInRing",value:function(e){var t=this.graph.vertices[e.sourceId],n=this.graph.vertices[e.targetId];return this.areVerticesInSameRing(t,n)}},{key:"isEdgeRotatable",value:function(e){var t=this.graph.vertices[e.sourceId],n=this.graph.vertices[e.targetId];return"-"===e.bondType&&(!t.isTerminal()&&!n.isTerminal()&&!(t.value.rings.length>0&&n.value.rings.length>0&&this.areVerticesInSameRing(t,n)))}},{key:"isRingAromatic",value:function(e){for(var t=0;t<e.members.length;t++){if(!this.graph.vertices[e.members[t]].value.isPartOfAromaticRing)return!1}return!0}},{key:"getEdgeNormals",value:function(e){var t=this.graph.vertices[e.sourceId].position,n=this.graph.vertices[e.targetId].position;return l.units(t,n)}},{key:"getNonRingNeighbours",value:function(e){for(var t=Array(),n=this.graph.vertices[e],r=n.neighbours,i=0;i<r.length;i++){var o=this.graph.vertices[r[i]];0===s.intersection(n.value.rings,o.value.rings).length&&0==o.value.isBridge&&t.push(o)}return t}},{key:"annotateStereochemistry",value:function(){for(var e=0;e<this.graph.vertices.length;e++){var t=this.graph.vertices[e];if(t.value.isStereoCenter){for(var n=t.getNeighbours(),r=n.length,i=Array(r),o=0;o<r;o++){var s=new Uint8Array(this.graph.vertices.length),l=Array(Array());s[t.id]=1,this.visitStereochemistry(n[o],t.id,s,l,10,0);for(var u=0;u<l.length;u++)l[u].sort(function(e,t){return t-e});i[o]=[o,l]}var c=0,h=0;for(o=0;o<i.length;o++){i[o][1].length>c&&(c=i[o][1].length);for(u=0;u<i[o][1].length;u++)i[o][1][u].length>h&&(h=i[o][1][u].length)}for(o=0;o<i.length;o++){var d=c-i[o][1].length;for(u=0;u<d;u++)i[o][1].push([]);i[o][1].push([n[o]]);for(u=0;u<i[o][1].length;u++)for(var f=h-i[o][1][u].length,p=0;p<f;p++)i[o][1][u].push(0)}i.sort(function(e,t){for(var n=0;n<e[1].length;n++)for(var r=0;r<e[1][n].length;r++){if(e[1][n][r]>t[1][n][r])return-1;if(e[1][n][r]<t[1][n][r])return 1}return 0});var g=new Uint8Array(r);for(o=0;o<r;o++)g[o]=i[o][0],t.value.priority=o;var v=this.graph.vertices[n[g[0]]].position,m=this.graph.vertices[n[g[1]]].position,_=this.graph.vertices[n[g[2]]].position,b=v.relativeClockwise(m,t.position),y=(v.relativeClockwise(_,t.position),-1===b),w="@"===t.value.bracket.chirality?-1:1,x=a.parityOfPermutation(g)*w===1?"R":"S",k="down",S="up";(y&&"R"!==x||!y&&"S"!==x)&&(t.value.hydrogenDirection="up",k="up",S="down"),t.value.hasHydrogen&&(this.graph.getEdge(t.id,n[g[g.length-1]]).wedge=k);var C=new Array(n.length-1),E=t.value.rings.length>1&&t.value.hasHydrogen,T=t.value.hasHydrogen?1:0;for(o=0;o<g.length-T;o++){C[o]=new Uint32Array(2);var P=this.graph.vertices[n[g[o]]];C[o][0]+=P.value.isStereoCenter?0:1e5,C[o][0]+=this.areVerticesInSameRing(P,t)?0:1e4,C[o][0]+=P.value.isHeteroAtom()?1e3:0,C[o][0]-=0===P.value.subtreeDepth?1e3:0,C[o][0]+=1e3-P.value.subtreeDepth,C[o][1]=n[g[o]]}if(C.sort(function(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:0}),!E){var A=C[0][1];if(t.value.hasHydrogen)this.graph.getEdge(t.id,A).wedge=S;else{var O=S;for(o=g.length-1;o>=0&&(O=O===k?S:k,n[g[o]]!==A);o--);this.graph.getEdge(t.id,A).wedge=O}}t.value.chirality=x}}}},{key:"visitStereochemistry",value:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;n[e]=1;var s=this.graph.vertices[e],l=s.value.getAtomicNumber();r.length<=o&&r.push(Array());for(var u=0;u<this.graph.getEdge(e,t).weight;u++)r[o].push(1e3*a+l);var c=this.graph.vertices[e].neighbours;for(u=0;u<c.length;u++)1!==n[c[u]]&&o<i-1&&this.visitStereochemistry(c[u],e,n.slice(),r,i,o+1,l);if(o<i-1){var h=0;for(u=0;u<c.length;u++)h+=this.graph.getEdge(e,c[u]).weight;for(u=0;u<s.value.getMaxBonds()-h;u++)r.length<=o+1&&r.push(Array()),r[o+1].push(1e3*l+1)}}},{key:"initPseudoElements",value:function(){for(var e=0;e<this.graph.vertices.length;e++){for(var t=this.graph.vertices[e],n=t.neighbours,r=Array(n.length),i=0;i<n.length;i++)r[i]=this.graph.vertices[n[i]];if(!(t.getNeighbourCount()<3||t.value.rings.length>0)&&("P"!==t.value.element&&("C"!==t.value.element||3!==r.length||"N"!==r[0].value.element||"N"!==r[1].value.element||"N"!==r[2].value.element))){var o=0,a=0;for(i=0;i<r.length;i++){var s=r[i],l=s.value.element,u=s.getNeighbourCount();"C"!==l&&"H"!==l&&1===u&&o++,u>1&&a++}if(!(a>1||o<2)){var c=null;for(i=0;i<r.length;i++){var d=r[i];d.getNeighbourCount()>1&&(c=d)}for(i=0;i<r.length;i++){var f=r[i];if(!(f.getNeighbourCount()>1)){f.value.isDrawn=!1;var p=h.maxBonds[f.value.element]-f.value.bondCount,g="";f.value.bracket&&(p=f.value.bracket.hcount,g=f.value.bracket.charge||0),t.value.attachPseudoElement(f.value.element,c?c.value.element:null,p,g)}}}}}for(e=0;e<this.graph.vertices.length;e++){var v=this.graph.vertices[e],m=v.value,_=m.element;if("C"!==_&&"H"!==_&&m.isDrawn){var b=v.neighbours,y=Array(b.length);for(i=0;i<b.length;i++)y[i]=this.graph.vertices[b[i]];for(i=0;i<y.length;i++){var w=y[i].value;if(w.hasAttachedPseudoElements&&2===w.getAttachedPseudoElementsCount()){var x=w.getAttachedPseudoElements();x.hasOwnProperty("0O")&&x.hasOwnProperty("3C")&&(w.isDrawn=!1,v.value.attachPseudoElement("Ac","",0))}}}}}}]),e}();e.exports=m},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){var r=n(15),i=n(16),o=n(29),a=n(22),s=(n(45),n(23),n(26),function(){"use strict";function e(t,n,i){r(this,e),"string"===typeof t||t instanceof String?this.canvas=document.getElementById(t):this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.colors=n,this.opts=i,this.drawingWidth=0,this.drawingHeight=0,this.offsetX=0,this.offsetY=0,this.fontLarge=this.opts.fontSizeLarge+"pt Helvetica, Arial, sans-serif",this.fontSmall=this.opts.fontSizeSmall+"pt Helvetica, Arial, sans-serif",this.updateSize(this.opts.width,this.opts.height),this.ctx.font=this.fontLarge,this.hydrogenWidth=this.ctx.measureText("H").width,this.halfHydrogenWidth=this.hydrogenWidth/2,this.halfBondThickness=this.opts.bondThickness/2}return i(e,[{key:"updateSize",value:function(e,t){this.devicePixelRatio=window.devicePixelRatio||1,this.backingStoreRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.ratio=this.devicePixelRatio/this.backingStoreRatio,1!==this.ratio?(this.canvas.width=e*this.ratio,this.canvas.height=t*this.ratio,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.ctx.setTransform(this.ratio,0,0,this.ratio,0,0)):(this.canvas.width=e*this.ratio,this.canvas.height=t*this.ratio)}},{key:"setTheme",value:function(e){this.colors=e}},{key:"scale",value:function(e){for(var t=-Number.MAX_VALUE,n=-Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,o=0;o<e.length;o++)if(e[o].value.isDrawn){var a=e[o].position;t<a.x&&(t=a.x),n<a.y&&(n=a.y),r>a.x&&(r=a.x),i>a.y&&(i=a.y)}var s=this.opts.padding;t+=s,n+=s,r-=s,i-=s,this.drawingWidth=t-r,this.drawingHeight=n-i;var l=this.canvas.offsetWidth/this.drawingWidth,u=this.canvas.offsetHeight/this.drawingHeight,c=l<u?l:u;this.ctx.scale(c,c),this.offsetX=-r,this.offsetY=-i,l<u?this.offsetY+=this.canvas.offsetHeight/(2*c)-this.drawingHeight/2:this.offsetX+=this.canvas.offsetWidth/(2*c)-this.drawingWidth/2}},{key:"reset",value:function(){this.ctx.setTransform(1,0,0,1,0,0)}},{key:"getColor",value:function(e){return(e=e.toUpperCase())in this.colors?this.colors[e]:this.colors.C}},{key:"drawCircle",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=this.ctx,u=this.offsetX,c=this.offsetY;l.save(),l.lineWidth=1.5,l.beginPath(),l.arc(e+u,t+c,n,0,o.twoPI,!0),l.closePath(),a?(i?(l.fillStyle="#f00",l.fill()):(l.strokeStyle="#f00",l.stroke()),this.drawDebugText(e,t,s)):i?(l.fillStyle=r,l.fill()):(l.strokeStyle=r,l.stroke()),l.restore()}},{key:"drawLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.ctx,i=this.offsetX,o=this.offsetY,a=e.clone().shorten(4),s=a.getLeftVector().clone(),l=a.getRightVector().clone();s.x+=i,s.y+=o,l.x+=i,l.y+=o,t||(r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.moveTo(s.x,s.y),r.lineTo(l.x,l.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness+1.2,r.strokeStyle=this.getColor("BACKGROUND"),r.stroke(),r.globalCompositeOperation="source-over",r.restore()),s=e.getLeftVector().clone(),l=e.getRightVector().clone(),s.x+=i,s.y+=o,l.x+=i,l.y+=o,r.save(),r.beginPath(),r.moveTo(s.x,s.y),r.lineTo(l.x,l.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness;var u=this.ctx.createLinearGradient(s.x,s.y,l.x,l.y);u.addColorStop(.4,this.getColor(e.getLeftElement())||this.getColor("C")),u.addColorStop(.6,this.getColor(e.getRightElement())||this.getColor("C")),t&&(r.setLineDash([1,1.5]),r.lineWidth=this.opts.bondThickness/1.5),n<1&&(r.globalAlpha=n),r.strokeStyle=u,r.stroke(),r.restore()}},{key:"drawWedge",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(isNaN(e.from.x)||isNaN(e.from.y)||isNaN(e.to.x)||isNaN(e.to.y))){var t=this.ctx,n=this.offsetX,r=this.offsetY,i=e.clone().shorten(5),o=i.getLeftVector().clone(),s=i.getRightVector().clone();o.x+=n,o.y+=r,s.x+=n,s.y+=r,o=e.getLeftVector().clone(),s=e.getRightVector().clone(),o.x+=n,o.y+=r,s.x+=n,s.y+=r,t.save();var l=a.normals(o,s);l[0].normalize(),l[1].normalize();var u=o,c=s;e.getRightChiral()&&(u=s,c=o);var h=a.add(u,a.multiplyScalar(l[0],this.halfBondThickness)),d=a.add(c,a.multiplyScalar(l[0],1.5+this.halfBondThickness)),f=a.add(c,a.multiplyScalar(l[1],1.5+this.halfBondThickness)),p=a.add(u,a.multiplyScalar(l[1],this.halfBondThickness));t.beginPath(),t.moveTo(h.x,h.y),t.lineTo(d.x,d.y),t.lineTo(f.x,f.y),t.lineTo(p.x,p.y);var g=this.ctx.createRadialGradient(s.x,s.y,this.opts.bondLength,s.x,s.y,0);g.addColorStop(.4,this.getColor(e.getLeftElement())||this.getColor("C")),g.addColorStop(.6,this.getColor(e.getRightElement())||this.getColor("C")),t.fillStyle=g,t.fill(),t.restore()}}},{key:"drawDashedWedge",value:function(e){if(!(isNaN(e.from.x)||isNaN(e.from.y)||isNaN(e.to.x)||isNaN(e.to.y))){var t=this.ctx,n=this.offsetX,r=this.offsetY,i=e.getLeftVector().clone(),o=e.getRightVector().clone();i.x+=n,i.y+=r,o.x+=n,o.y+=r,t.save();var s=a.normals(i,o);s[0].normalize(),s[1].normalize();var l,u,c,h,d=e.getRightChiral(),f=e.clone();d?(l=o,u=i,f.shortenRight(1),c=f.getRightVector().clone(),h=f.getLeftVector().clone()):(l=i,u=o,f.shortenLeft(1),c=f.getLeftVector().clone(),h=f.getRightVector().clone()),c.x+=n,c.y+=r,h.x+=n,h.y+=r;var p=a.subtract(u,l).normalize();t.strokeStyle=this.getColor("C"),t.lineCap="round",t.lineWidth=this.opts.bondThickness,t.beginPath();for(var g=e.getLength(),v=1.25/(g/(3*this.opts.bondThickness)),m=!1,_=0;_<1;_+=v){var b=a.multiplyScalar(p,_*g),y=a.add(l,b),w=1.5*_,x=a.multiplyScalar(s[0],w);!m&&_>.5&&(t.stroke(),t.beginPath(),t.strokeStyle=this.getColor(e.getRightElement())||this.getColor("C"),m=!0),y.subtract(x),t.moveTo(y.x,y.y),y.add(a.multiplyScalar(x,2)),t.lineTo(y.x,y.y)}t.stroke(),t.restore()}}},{key:"drawDebugText",value:function(e,t,n){var r=this.ctx;r.save(),r.font="5px Droid Sans, sans-serif",r.textAlign="start",r.textBaseline="top",r.fillStyle="#ff0000",r.fillText(n,e+this.offsetX,t+this.offsetY),r.restore()}},{key:"drawBall",value:function(e,t,n){var r=this.ctx;r.save(),r.beginPath(),r.arc(e+this.offsetX,t+this.offsetY,this.opts.bondLength/4.5,0,o.twoPI,!1),r.fillStyle=this.getColor(n),r.fill(),r.restore()}},{key:"drawPoint",value:function(e,t,n){var r=this.ctx,i=this.offsetX,a=this.offsetY;r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.arc(e+i,t+a,1.5,0,o.twoPI,!0),r.closePath(),r.fill(),r.globalCompositeOperation="source-over",r.beginPath(),r.arc(e+this.offsetX,t+this.offsetY,.75,0,o.twoPI,!1),r.fillStyle=this.getColor(n),r.fill(),r.restore()}},{key:"drawText",value:function(e,t,n,r,i,a,s,l){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=this.ctx,h=this.offsetX,d=this.offsetY;c.save(),c.textAlign="start",c.textBaseline="alphabetic";var f="",p=0;s&&(f=this.getChargeText(s),c.font=this.fontSmall,p=c.measureText(f).width);var g="0",v=0;l>0&&(g=l.toString(),c.font=this.fontSmall,v=c.measureText(g).width),1===s&&"N"===n&&u.hasOwnProperty("0O")&&u.hasOwnProperty("0O-1")&&(u={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},s=0),c.font=this.fontLarge,c.fillStyle=this.getColor("BACKGROUND");var m=c.measureText(n);m.totalWidth=m.width+p,m.height=parseInt(this.fontLarge,10);var _=m.width>this.opts.fontSizeLarge?m.width:this.opts.fontSizeLarge;_/=1.5,c.globalCompositeOperation="destination-out",c.beginPath(),c.arc(e+h,t+d,_,0,o.twoPI,!0),c.closePath(),c.fill(),c.globalCompositeOperation="source-over";var b=-m.width/2,y=-m.width/2;c.fillStyle=this.getColor(n),c.fillText(n,e+h+b,t+this.opts.halfFontSizeLarge+d),b+=m.width,s&&(c.font=this.fontSmall,c.fillText(f,e+h+b,t-this.opts.fifthFontSizeSmall+d),b+=p),l>0&&(c.font=this.fontSmall,c.fillText(g,e+h+y-v,t-this.opts.fifthFontSizeSmall+d),y-=v),c.font=this.fontLarge;var w=0,x=0;if(1===r){var k=e+h,S=t+d+this.opts.halfFontSizeLarge;y-=w=this.hydrogenWidth,"left"===i?k+=y:"right"===i?k+=b:"up"===i&&a?k+=b:"down"===i&&a?k+=b:"up"!==i||a?"down"!==i||a||(S+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,k-=this.halfHydrogenWidth):(S-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,k-=this.halfHydrogenWidth),c.fillText("H",k,S),b+=w}else if(r>1){var C=e+h,E=t+d+this.opts.halfFontSizeLarge;w=this.hydrogenWidth,c.font=this.fontSmall,y-=w+(x=c.measureText(r).width),"left"===i?C+=y:"right"===i?C+=b:"up"===i&&a?C+=b:"down"===i&&a?C+=b:"up"!==i||a?"down"!==i||a||(E+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,C-=this.halfHydrogenWidth):(E-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,C-=this.halfHydrogenWidth),c.font=this.fontLarge,c.fillText("H",C,E),c.font=this.fontSmall,c.fillText(r,C+this.halfHydrogenWidth+x,E+this.opts.fifthFontSizeSmall),b+=w+this.halfHydrogenWidth+x}for(var T in u)if(u.hasOwnProperty(T)){var P=0,A=0,O=u[T].element,z=u[T].count,N=u[T].hydrogenCount,M=u[T].charge;c.font=this.fontLarge,z>1&&N>0&&(P=c.measureText("(").width,A=c.measureText(")").width);var R=c.measureText(O).width,D=0,I="",j=0;w=0,N>0&&(w=this.hydrogenWidth),c.font=this.fontSmall,z>1&&(D=c.measureText(z).width),0!==M&&(I=this.getChargeText(M),j=c.measureText(I).width),x=0,N>1&&(x=c.measureText(N).width),c.font=this.fontLarge;var F=e+h,L=t+d+this.opts.halfFontSizeLarge;c.fillStyle=this.getColor(O),z>0&&(y-=D),z>1&&N>0&&("left"===i?(y-=A,c.fillText(")",F+y,L)):(c.fillText("(",F+b,L),b+=P)),"left"===i?(y-=R,c.fillText(O,F+y,L)):(c.fillText(O,F+b,L),b+=R),N>0&&("left"===i?(y-=w+x,c.fillText("H",F+y,L),N>1&&(c.font=this.fontSmall,c.fillText(N,F+y+w,L+this.opts.fifthFontSizeSmall))):(c.fillText("H",F+b,L),b+=w,N>1&&(c.font=this.fontSmall,c.fillText(N,F+b,L+this.opts.fifthFontSizeSmall),b+=x))),c.font=this.fontLarge,z>1&&N>0&&("left"===i?(y-=P,c.fillText("(",F+y,L)):(c.fillText(")",F+b,L),b+=A)),c.font=this.fontSmall,z>1&&("left"===i?c.fillText(z,F+y+P+A+w+x+R,L+this.opts.fifthFontSizeSmall):(c.fillText(z,F+b,L+this.opts.fifthFontSizeSmall),b+=D)),0!==M&&("left"===i?c.fillText(I,F+y+P+A+w+x+R,t-this.opts.fifthFontSizeSmall+d):(c.fillText(I,F+b,t-this.opts.fifthFontSizeSmall+d),b+=j))}c.restore()}},{key:"getChargeText",value:function(e){return 1===e?"+":2===e?"2+":-1===e?"-":-2===e?"2-":""}},{key:"drawDebugPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#f00";this.drawCircle(e,t,2,r,!0,!0,n)}},{key:"drawAromaticityRing",value:function(e){var t=this.ctx,n=o.apothemFromSideLength(this.opts.bondLength,e.getSize());t.save(),t.strokeStyle=this.getColor("C"),t.lineWidth=this.opts.bondThickness,t.beginPath(),t.arc(e.center.x+this.offsetX,e.center.y+this.offsetY,n-this.opts.bondSpacing,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.restore()}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}}]),e}());e.exports=s},function(e,t,n){var r=n(90),i=n(91),o=n(92);e.exports=function(e,t){return r(e)||i(e,t)||o()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var r=n(34),i=n(15),o=n(16),a=n(48),s=function(){"use strict";function e(){i(this,e)}return o(e,null,[{key:"getRings",value:function(t){var n=t.getComponentsAdjacencyMatrix();if(0===n.length)return null;for(var i=a.getConnectedComponents(n),o=Array(),s=0;s<i.length;s++){for(var l=i[s],u=t.getSubgraphAdjacencyMatrix(r(l)),c=new Uint16Array(u.length),h=new Uint16Array(u.length),d=0;d<u.length;d++){h[d]=0,c[d]=0;for(var f=0;f<u[d].length;f++)c[d]+=u[d][f]}var p=0;for(d=0;d<u.length;d++)for(f=d+1;f<u.length;f++)p+=u[d][f];var g=p-u.length+1,v=!0;for(d=0;d<c.length;d++)3!==c[d]&&(v=!1);if(v&&(g=2+p-u.length),1!==g){var m=e.getPathIncludedDistanceMatrices(u),_=m.d,b=m.pe,y=m.pe_prime,w=e.getRingCandidates(_,b,y),x=e.getSSSR(w,_,u,b,y,c,h,g);for(d=0;d<x.length;d++){var k=Array(x[d].size),S=0,C=!0,E=!1,T=void 0;try{for(var P,A=x[d][Symbol.iterator]();!(C=(P=A.next()).done);C=!0){var O=P.value;k[S++]=l[O]}}catch(z){E=!0,T=z}finally{try{C||null==A.return||A.return()}finally{if(E)throw T}}o.push(k)}}else o.push(r(l))}return o}},{key:"matrixToString",value:function(e){for(var t="",n=0;n<e.length;n++){for(var r=0;r<e[n].length;r++)t+=e[n][r]+" ";t+="\n"}return t}},{key:"getPathIncludedDistanceMatrices",value:function(e){for(var t=e.length,n=Array(t),r=Array(t),i=Array(t),o=0,a=0,s=0,l=t;l--;){n[l]=Array(t),r[l]=Array(t),i[l]=Array(t);for(var u=t;u--;)n[l][u]=l===u||1===e[l][u]?e[l][u]:Number.POSITIVE_INFINITY,1===n[l][u]?r[l][u]=[[[l,u]]]:r[l][u]=Array(),i[l][u]=Array()}for(var c=t;c--;)for(l=t;l--;)for(u=t;u--;){var h=n[l][u],d=n[l][c]+n[c][u];if(h>d){if(h===d+1)for(i[l][u]=[r[l][u].length],o=r[l][u].length;o--;)for(i[l][u][o]=[r[l][u][o].length],a=r[l][u][o].length;a--;)for(i[l][u][o][a]=[r[l][u][o][a].length],s=r[l][u][o][a].length;s--;)i[l][u][o][a][s]=[r[l][u][o][a][0],r[l][u][o][a][1]];else i[l][u]=Array();for(n[l][u]=d,r[l][u]=[[]],o=r[l][c][0].length;o--;)r[l][u][0].push(r[l][c][0][o]);for(o=r[c][u][0].length;o--;)r[l][u][0].push(r[c][u][0][o])}else if(h===d){if(r[l][c].length&&r[c][u].length)if(r[l][u].length){var f=Array();for(o=r[l][c][0].length;o--;)f.push(r[l][c][0][o]);for(o=r[c][u][0].length;o--;)f.push(r[c][u][0][o]);r[l][u].push(f)}else{var p=Array();for(o=r[l][c][0].length;o--;)p.push(r[l][c][0][o]);for(o=r[c][u][0].length;o--;)p.push(r[c][u][0][o]);r[l][u][0]=p}}else if(h===d-1){if(i[l][u].length){var g=Array();for(o=r[l][c][0].length;o--;)g.push(r[l][c][0][o]);for(o=r[c][u][0].length;o--;)g.push(r[c][u][0][o]);i[l][u].push(g)}else{var v=Array();for(o=r[l][c][0].length;o--;)v.push(r[l][c][0][o]);for(o=r[c][u][0].length;o--;)v.push(r[c][u][0][o]);i[l][u][0]=v}}}return{d:n,pe:r,pe_prime:i}}},{key:"getRingCandidates",value:function(e,t,n){for(var r=e.length,i=Array(),o=0,a=0;a<r;a++)for(var s=0;s<r;s++)0===e[a][s]||1===t[a][s].length&&0===n[a][s]||(o=0!==n[a][s].length?2*(e[a][s]+.5):2*e[a][s])!==1/0&&i.push([o,t[a][s],n[a][s]]);return i.sort(function(e,t){return e[0]-t[0]}),i}},{key:"getSSSR",value:function(t,n,r,i,o,a,s,l){for(var u=Array(),c=Array(),h=0;h<t.length;h++)if(t[h][0]%2!==0)for(var d=0;d<t[h][2].length;d++){for(var f=t[h][1][0].concat(t[h][2][d]),p=0;p<f.length;p++)f[p][0].constructor===Array&&(f[p]=f[p][0]);var g=e.bondsToAtoms(f);if(e.getBondCount(g,r)!==g.size||e.pathSetsContain(u,g,f,c,a,s)||(u.push(g),c=c.concat(f)),u.length>l)return u}else for(var v=0;v<t[h][1].length-1;v++){var m=t[h][1][v].concat(t[h][1][v+1]);for(p=0;p<m.length;p++)m[p][0].constructor===Array&&(m[p]=m[p][0]);var _=e.bondsToAtoms(m);if(e.getBondCount(_,r)!==_.size||e.pathSetsContain(u,_,m,c,a,s)||(u.push(_),c=c.concat(m)),u.length>l)return u}return u}},{key:"getEdgeCount",value:function(e){for(var t=0,n=e.length,r=n-1;r--;)for(var i=n;i--;)1===e[r][i]&&t++;return t}},{key:"getEdgeList",value:function(e){for(var t=e.length,n=Array(),r=t-1;r--;)for(var i=t;i--;)1===e[r][i]&&n.push([r,i]);return n}},{key:"bondsToAtoms",value:function(e){for(var t=new Set,n=e.length;n--;)t.add(e[n][0]),t.add(e[n][1]);return t}},{key:"getBondCount",value:function(e,t){var n=0,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=!0,c=!1,h=void 0;try{for(var d,f=e[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value;l!==p&&(n+=t[l][p])}}catch(g){c=!0,h=g}finally{try{u||null==f.return||f.return()}finally{if(c)throw h}}}}catch(g){i=!0,o=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n/2}},{key:"pathSetsContain",value:function(t,n,r,i,o,a){for(var s=t.length;s--;){if(e.isSupersetOf(n,t[s]))return!0;if(t[s].size===n.size&&e.areSetsEqual(t[s],n))return!0}var l=0,u=!1;for(s=r.length;s--;)for(var c=i.length;c--;)(r[s][0]===i[c][0]&&r[s][1]===i[c][1]||r[s][1]===i[c][0]&&r[s][0]===i[c][1])&&l++,l===r.length&&(u=!0);var h=!1;if(u){var d=!0,f=!1,p=void 0;try{for(var g,v=n[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var m=g.value;if(a[m]<o[m]){h=!0;break}}}catch(k){f=!0,p=k}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}}if(u&&!h)return!0;var _=!0,b=!1,y=void 0;try{for(var w,x=n[Symbol.iterator]();!(_=(w=x.next()).done);_=!0){a[w.value]++}}catch(k){b=!0,y=k}finally{try{_||null==x.return||x.return()}finally{if(b)throw y}}return!1}},{key:"areSetsEqual",value:function(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!t.has(s))return!1}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}},{key:"isSupersetOf",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!e.has(s))return!1}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}}]),e}();e.exports=s},function(e,t){e.exports=function(){"use strict";function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),e.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],n[i.type](i));if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,n){if(n=void 0!==n?n:{},t.split("(").length-1!==t.split(")").length-1)throw Ve("The number of opening parentheses does not match the number of closing parentheses.",0);var r,i={},o={chain:qe},a=qe,s=function(e){for(var t=[],n=[],r=0;r<e[1].length;r++)t.push(e[1][r]);for(r=0;r<e[2].length;r++){var i=e[2][r][0]?e[2][r][0]:"-";n.push({bond:i,id:e[2][r][1]})}for(r=0;r<e[3].length;r++)t.push(e[3][r]);for(r=0;r<e[6].length;r++)t.push(e[6][r]);return{atom:e[0],isBracket:!!e[0].element,branches:t,branchCount:t.length,ringbonds:n,ringbondCount:n.length,bond:e[4]?e[4]:"-",next:e[5],hasNext:!!e[5]}},l="(",u=Fe("(",!1),c=")",h=Fe(")",!1),d=function(e){var t=e[1]?e[1]:"-";return e[2].branchBond=t,e[2]},f=function(e){return e},p=/^[\-=#$:\/\\.]/,g=Le(["-","=","#","$",":","/","\\","."],!1,!1),v=function(e){return e},m="[",_=Fe("[",!1),b="se",y=Fe("se",!1),w="as",x=Fe("as",!1),k="]",S=Fe("]",!1),C=function(e){return{isotope:e[1],element:e[2],chirality:e[3],hcount:e[4],charge:e[5],class:e[6]}},E="B",T=Fe("B",!1),P="r",A=Fe("r",!1),O="C",z=Fe("C",!1),N="l",M=Fe("l",!1),R=/^[NOPSFI]/,D=Le(["N","O","P","S","F","I"],!1,!1),I=function(e){return e.length>1?e.join(""):e},j=/^[bcnops]/,F=Le(["b","c","n","o","p","s"],!1,!1),L="*",B=Fe("*",!1),U=function(e){return e},W=/^[A-Z]/,V=Le([["A","Z"]],!1,!1),H=/^[a-z]/,q=Le([["a","z"]],!1,!1),Y=function(e){return e.join("")},$="%",K=Fe("%",!1),X=/^[1-9]/,G=Le([["1","9"]],!1,!1),Q=/^[0-9]/,J=Le([["0","9"]],!1,!1),Z=function(e){return 1==e.length?Number(e):Number(e.join("").replace("%",""))},ee="@",te=Fe("@",!1),ne="TH",re=Fe("TH",!1),ie=/^[12]/,oe=Le(["1","2"],!1,!1),ae="AL",se=Fe("AL",!1),le="SP",ue=Fe("SP",!1),ce=/^[1-3]/,he=Le([["1","3"]],!1,!1),de="TB",fe=Fe("TB",!1),pe="OH",ge=Fe("OH",!1),ve=function(e){return e[1]?"@"==e[1]?"@@":e[1].join("").replace(",",""):"@"},me=function(e){return e},_e="+",be=Fe("+",!1),ye=function(e){return e[1]?"+"!=e[1]?Number(e[1].join("")):2:1},we="-",xe=Fe("-",!1),ke=function(e){return e[1]?"-"!=e[1]?-Number(e[1].join("")):-2:-1},Se="H",Ce=Fe("H",!1),Ee=function(e){return e[1]?Number(e[1]):1},Te=":",Pe=Fe(":",!1),Ae=/^[0]/,Oe=Le(["0"],!1,!1),ze=function(e){return Number(e[1][0]+e[1][1].join(""))},Ne=function(e){return Number(e.join(""))},Me=0,Re=[{line:1,column:1}],De=0,Ie=[],je=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=o[n.startRule]}function Fe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Le(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Be(e){var n,r=Re[e];if(r)return r;for(n=e-1;!Re[n];)n--;for(r={line:(r=Re[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Re[e]=r,r}function Ue(e,t){var n=Be(e),r=Be(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function We(e){Me<De||(Me>De&&(De=Me,Ie=[]),Ie.push(e))}function Ve(t,n){return new e(t,null,null,n)}function He(t,n,r){return new e(e.buildMessage(t,n),t,n,r)}function qe(){var e,n,r,o,a,l,u,c,h;if(Me,e=Me,(n=function(){var e;return Me,(e=function(){var e,n,r;return Me,e=Me,66===t.charCodeAt(Me)?(n=E,Me++):(n=i,0===je&&We(T)),n!==i?(114===t.charCodeAt(Me)?(r=P,Me++):(r=i,0===je&&We(A)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e===i&&(e=Me,67===t.charCodeAt(Me)?(n=O,Me++):(n=i,0===je&&We(z)),n!==i?(108===t.charCodeAt(Me)?(r=N,Me++):(r=i,0===je&&We(M)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e===i&&(R.test(t.charAt(Me))?(e=t.charAt(Me),Me++):(e=i,0===je&&We(D)))),e!==i&&(e=I(e)),e}())===i&&(e=Ke())===i&&(e=function(){var e,n,r,o,a,s,l,u,c;return Me,e=Me,91===t.charCodeAt(Me)?(n=m,Me++):(n=i,0===je&&We(_)),n!==i?((r=function(){var e,n,r,o;return Me,e=Me,X.test(t.charAt(Me))?(n=t.charAt(Me),Me++):(n=i,0===je&&We(G)),n!==i?(Q.test(t.charAt(Me))?(r=t.charAt(Me),Me++):(r=i,0===je&&We(J)),r===i&&(r=null),r!==i?(Q.test(t.charAt(Me))?(o=t.charAt(Me),Me++):(o=i,0===je&&We(J)),o===i&&(o=null),o!==i?e=n=[n,r,o]:(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=Ne(e)),e}())===i&&(r=null),r!==i?(t.substr(Me,2)===b?(o=b,Me+=2):(o=i,0===je&&We(y)),o===i&&(t.substr(Me,2)===w?(o=w,Me+=2):(o=i,0===je&&We(x)),o===i&&(o=Ke())===i&&(o=function(){var e,n,r;return Me,e=Me,W.test(t.charAt(Me))?(n=t.charAt(Me),Me++):(n=i,0===je&&We(V)),n!==i?(H.test(t.charAt(Me))?(r=t.charAt(Me),Me++):(r=i,0===je&&We(q)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=Y(e)),e}())===i&&(o=Xe())),o!==i?((a=function(){var e,n,r,o,a,s;return Me,e=Me,64===t.charCodeAt(Me)?(n=ee,Me++):(n=i,0===je&&We(te)),n!==i?(64===t.charCodeAt(Me)?(r=ee,Me++):(r=i,0===je&&We(te)),r===i&&(r=Me,t.substr(Me,2)===ne?(o=ne,Me+=2):(o=i,0===je&&We(re)),o!==i?(ie.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(oe)),a!==i?r=o=[o,a]:(Me=r,r=i)):(Me=r,r=i),r===i&&(r=Me,t.substr(Me,2)===ae?(o=ae,Me+=2):(o=i,0===je&&We(se)),o!==i?(ie.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(oe)),a!==i?r=o=[o,a]:(Me=r,r=i)):(Me=r,r=i),r===i&&(r=Me,t.substr(Me,2)===le?(o=le,Me+=2):(o=i,0===je&&We(ue)),o!==i?(ce.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(he)),a!==i?r=o=[o,a]:(Me=r,r=i)):(Me=r,r=i),r===i&&(r=Me,t.substr(Me,2)===de?(o=de,Me+=2):(o=i,0===je&&We(fe)),o!==i?(X.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(G)),a!==i?(Q.test(t.charAt(Me))?(s=t.charAt(Me),Me++):(s=i,0===je&&We(J)),s===i&&(s=null),s!==i?r=o=[o,a,s]:(Me=r,r=i)):(Me=r,r=i)):(Me=r,r=i),r===i&&(r=Me,t.substr(Me,2)===pe?(o=pe,Me+=2):(o=i,0===je&&We(ge)),o!==i?(X.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(G)),a!==i?(Q.test(t.charAt(Me))?(s=t.charAt(Me),Me++):(s=i,0===je&&We(J)),s===i&&(s=null),s!==i?r=o=[o,a,s]:(Me=r,r=i)):(Me=r,r=i)):(Me=r,r=i)))))),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=ve(e)),e}())===i&&(a=null),a!==i?((s=function(){var e,n,r;return Me,e=Me,72===t.charCodeAt(Me)?(n=Se,Me++):(n=i,0===je&&We(Ce)),n!==i?(Q.test(t.charAt(Me))?(r=t.charAt(Me),Me++):(r=i,0===je&&We(J)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=Ee(e)),e}())===i&&(s=null),s!==i?((l=function(){var e;return Me,(e=function(){var e,n,r,o,a;return Me,e=Me,43===t.charCodeAt(Me)?(n=_e,Me++):(n=i,0===je&&We(be)),n!==i?(43===t.charCodeAt(Me)?(r=_e,Me++):(r=i,0===je&&We(be)),r===i&&(r=Me,X.test(t.charAt(Me))?(o=t.charAt(Me),Me++):(o=i,0===je&&We(G)),o!==i?(Q.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(J)),a===i&&(a=null),a!==i?r=o=[o,a]:(Me=r,r=i)):(Me=r,r=i)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=ye(e)),e}())===i&&(e=function(){var e,n,r,o,a;return Me,e=Me,45===t.charCodeAt(Me)?(n=we,Me++):(n=i,0===je&&We(xe)),n!==i?(45===t.charCodeAt(Me)?(r=we,Me++):(r=i,0===je&&We(xe)),r===i&&(r=Me,X.test(t.charAt(Me))?(o=t.charAt(Me),Me++):(o=i,0===je&&We(G)),o!==i?(Q.test(t.charAt(Me))?(a=t.charAt(Me),Me++):(a=i,0===je&&We(J)),a===i&&(a=null),a!==i?r=o=[o,a]:(Me=r,r=i)):(Me=r,r=i)),r===i&&(r=null),r!==i?e=n=[n,r]:(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=ke(e)),e}()),e!==i&&(e=me(e)),e}())===i&&(l=null),l!==i?((u=function(){var e,n,r,o,a,s;if(Me,e=Me,58===t.charCodeAt(Me)?(n=Te,Me++):(n=i,0===je&&We(Pe)),n!==i){if(r=Me,X.test(t.charAt(Me))?(o=t.charAt(Me),Me++):(o=i,0===je&&We(G)),o!==i){for(a=[],Q.test(t.charAt(Me))?(s=t.charAt(Me),Me++):(s=i,0===je&&We(J));s!==i;)a.push(s),Q.test(t.charAt(Me))?(s=t.charAt(Me),Me++):(s=i,0===je&&We(J));a!==i?r=o=[o,a]:(Me=r,r=i)}else Me=r,r=i;r===i&&(Ae.test(t.charAt(Me))?(r=t.charAt(Me),Me++):(r=i,0===je&&We(Oe))),r!==i?e=n=[n,r]:(Me=e,e=i)}else Me=e,e=i;return e!==i&&(e=ze(e)),e}())===i&&(u=null),u!==i?(93===t.charCodeAt(Me)?(c=k,Me++):(c=i,0===je&&We(S)),c!==i?e=n=[n,r,o,a,s,l,u,c]:(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=C(e)),e}())===i&&(e=Xe()),e!==i&&(e=f(e)),e}())!==i){for(r=[],o=Ye();o!==i;)r.push(o),o=Ye();if(r!==i){for(o=[],a=Me,(l=$e())===i&&(l=null),l!==i&&(u=Ge())!==i?a=l=[l,u]:(Me=a,a=i);a!==i;)o.push(a),a=Me,(l=$e())===i&&(l=null),l!==i&&(u=Ge())!==i?a=l=[l,u]:(Me=a,a=i);if(o!==i){for(a=[],l=Ye();l!==i;)a.push(l),l=Ye();if(a!==i)if((l=$e())===i&&(l=null),l!==i)if((u=qe())===i&&(u=null),u!==i){for(c=[],h=Ye();h!==i;)c.push(h),h=Ye();c!==i?e=n=[n,r,o,a,l,u,c]:(Me=e,e=i)}else Me=e,e=i;else Me=e,e=i;else Me=e,e=i}else Me=e,e=i}else Me=e,e=i}else Me=e,e=i;return e!==i&&(e=s(e)),e}function Ye(){var e,n,r,o,a;return Me,e=Me,40===t.charCodeAt(Me)?(n=l,Me++):(n=i,0===je&&We(u)),n!==i?((r=$e())===i&&(r=null),r!==i&&(o=qe())!==i?(41===t.charCodeAt(Me)?(a=c,Me++):(a=i,0===je&&We(h)),a!==i?e=n=[n,r,o,a]:(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i),e!==i&&(e=d(e)),e}function $e(){var e;return Me,p.test(t.charAt(Me))?(e=t.charAt(Me),Me++):(e=i,0===je&&We(g)),e!==i&&(e=v(e)),e}function Ke(){var e;return Me,j.test(t.charAt(Me))?(e=t.charAt(Me),Me++):(e=i,0===je&&We(F)),e!==i&&(e=f(e)),e}function Xe(){var e;return Me,42===t.charCodeAt(Me)?(e=L,Me++):(e=i,0===je&&We(B)),e!==i&&(e=U(e)),e}function Ge(){var e,n,r,o;return Me,e=Me,37===t.charCodeAt(Me)?(n=$,Me++):(n=i,0===je&&We(K)),n!==i?(X.test(t.charAt(Me))?(r=t.charAt(Me),Me++):(r=i,0===je&&We(G)),r!==i?(Q.test(t.charAt(Me))?(o=t.charAt(Me),Me++):(o=i,0===je&&We(J)),o!==i?e=n=[n,r,o]:(Me=e,e=i)):(Me=e,e=i)):(Me=e,e=i),e===i&&(Q.test(t.charAt(Me))?(e=t.charAt(Me),Me++):(e=i,0===je&&We(J))),e!==i&&(e=Z(e)),e}if((r=a())!==i&&Me===t.length)return r;throw r!==i&&Me<t.length&&We({type:"end"}),He(Ie,De<t.length?t.charAt(De):null,De<t.length?Ue(De,De+1):Ue(De,De))}}}()},,function(e,t,n){var r=n(3),i=n(98),o=n(54),a=n(55),s=n(37),l=n(104),u=n(20),c=n(61),h=n(105),d=n(62),f=n(106),p=n(108),g=n(109),v=n(24),m=n(49).builder_embed,_=n(110),b=n(111).DefaultTooltip,y=n(14),w=n(2).select,x=n(2).selection,k=n(25).json,S=r.make_class();S.prototype={init:function(e,t,n,i,o){i?i instanceof x||(i=w("node"in i?i.node():i)):i=w("body").append("div");o||(o={});n||(n=m);if(this.map_data=e,this.model_data=t,this.embedded_css=n,this.selection=i,this.selection.datum(this),this.selection.__builder__=this,this.has_custom_reaction_styles=Boolean(o.reaction_styles),this.options=r.set_options(o,{menu:"all",scroll_behavior:"pan",use_3d_transform:!r.check_browser("safari"),enable_editing:!0,enable_keys:!0,enable_search:!0,fill_screen:!1,zoom_to_element:null,full_screen_button:!1,ignore_bootstrap:!1,starting_reaction:null,never_ask_before_quit:!1,unique_map_id:null,primary_metabolite_radius:20,secondary_metabolite_radius:10,marker_radius:5,gene_font_size:18,hide_secondary_metabolites:!1,show_gene_reaction_rules:!1,hide_all_labels:!1,canvas_size_and_loc:null,reaction_data:null,reaction_styles:["color","size","text"],reaction_compare_style:"log2_fold",reaction_scale:[{type:"min",color:"#c8c8c8",size:12},{type:"median",color:"#9696ff",size:20},{type:"max",color:"#ff0000",size:25}],reaction_no_data_color:"#dcdcdc",reaction_no_data_size:8,gene_data:null,and_method_in_gene_reaction_rule:"mean",metabolite_data:null,metabolite_styles:["color","size","text"],metabolite_compare_style:"log2_fold",metabolite_scale:[{type:"min",color:"#fffaf0",size:20},{type:"median",color:"#f1c470",size:30},{type:"max",color:"#800000",size:40}],metabolite_no_data_color:"#ffffff",metabolite_no_data_size:10,identifiers_on_map:"bigg_id",highlight_missing:!1,allow_building_duplicate_reactions:!1,cofactors:["atp","adp","nad","nadh","nadp","nadph","gtp","gdp","h","coa","ump","h20","ppi"],tooltip_component:b,enable_tooltips:!0,first_load_callback:null},{primary_metabolite_radius:!0,secondary_metabolite_radius:!0,marker_radius:!0,gene_font_size:!0,reaction_no_data_size:!0,metabolite_no_data_size:!0}),r.check_for_parent_tag(this.selection,"svg"))throw new Error("Builder cannot be placed within an svg node becuase UI elements are html-based.");var a=function(e,t){this.options[e]=t}.bind(this),s=function(e){return this.options[e]}.bind(this);this.settings=new d(a,s,["hide_secondary_metabolites","show_gene_reaction_rules","hide_all_labels","scroll_behavior","reaction_styles","reaction_compare_style","reaction_scale","reaction_no_data_color","reaction_no_data_size","and_method_in_gene_reaction_rule","metabolite_styles","metabolite_compare_style","metabolite_scale","metabolite_no_data_color","metabolite_no_data_size","identifiers_on_map","highlight_missing","allow_building_duplicate_reactions","enable_tooltips"]);["reaction_scale","metabolite_scale"].forEach(function(e){this.settings.streams[e].onValue(function(t){["min","max"].forEach(function(n){t.reduce(function(e,t){return e||t.type===n},!1)||(t.push({type:n,color:"#ffffff",size:10}),this.settings.set_conditional(e,t))}.bind(this))}.bind(this))}.bind(this)),this.callback_manager=u(),null!==this.options.first_load_callback&&this.callback_manager.set("first_load",this.options.first_load_callback);this.load_model(this.model_data,!1),this.load_map(this.map_data,!1);var l=this._reaction_check_add_abs();this._update_data(!0,!0),this.settings.status_bus.onValue(function(e){if("accepted"===e){if(this._update_data(!0,!0,["reaction","metabolite"],!1),null!==this.zoom_container){var t=this.settings.get_option("scroll_behavior");this.zoom_container.set_scroll_behavior(t)}null!==this.map&&(this.map.draw_all_nodes(!1),this.map.draw_all_reactions(!0,!1),this.map.select_none())}}.bind(this)),this.callback_manager.run("first_load",this),null!==l&&setTimeout(l,500)},load_map:function(e,t){y.isUndefined(t)&&(t=!0);r.remove_child_nodes(this.selection),this.zoom_container=new o(this.selection,this.options.scroll_behavior,this.options.use_3d_transform,this.options.fill_screen);var n=this.zoom_container.zoomed_sel,s=this.zoom_container.svg;this.map&&this.map.key_manager.toggle(!1);this.map=null!==e?a.from_data(e,s,this.embedded_css,n,this.zoom_container,this.settings,this.cobra_model,this.options.enable_search):new a(s,this.embedded_css,n,this.zoom_container,this.settings,this.cobra_model,this.options.canvas_size_and_loc,this.options.enable_search);this.zoom_container.callback_manager.set("svg_start",function(){this.map.set_status("Drawing ...")}.bind(this)),this.zoom_container.callback_manager.set("svg_finish",function(){this.map.set_status("")}.bind(this)),t&&this._update_data(!1,!0);this.build_input=new i(this.selection,this.map,this.zoom_container,this.settings),this.text_edit_input=new p(this.selection,this.map,this.zoom_container),this.tooltip_container=new _(this.selection,this.map,this.options.tooltip_component,this.zoom_container),this.brush=new l(n,!1,this.map,".canvas-group"),this.map.canvas.callback_manager.set("resize",function(){this.brush.toggle(!0)}.bind(this)),this._setup_modes(this.map,this.brush,this.zoom_container);var u=this.selection.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline"),c=u.append("div"),d=u.append("div"),g=this.selection.append("div");this.search_bar=new h(d,this.map.search_index,this.map),this.search_bar.callback_manager.set("show",function(){this.settings_bar.toggle(!1)}.bind(this));var v=this.selection.append("div"),m=function(e,t){var n=this.options[e+"_styles"];if(t&&-1===n.indexOf("abs"))n.push("abs");else if(!t){var r=n.indexOf("abs");-1!==r&&(this.options[e+"_styles"]=n.slice(0,r).concat(n.slice(r+1)))}this._update_data(!1,!0,e)}.bind(this);this.settings_bar=new f(v,this.settings,this.map,m),this.settings_bar.callback_manager.set("show",function(){this.search_bar.toggle(!1)}.bind(this));var b=this._get_keys(this.map,this.zoom_container,this.search_bar,this.settings_bar,this.options.enable_editing,this.options.full_screen_button);this.map.key_manager.assigned_keys=b,this.map.key_manager.input_list=[this.build_input,this.search_bar,this.settings_bar,this.text_edit_input],this.map.key_manager.update(),this.map.key_manager.toggle(this.options.enable_keys),"all"===this.options.menu&&(this.options.ignore_bootstrap?console.error("Cannot create the dropdown menus if ignore_bootstrap = true"):this._set_up_menu(c,this.map,this.map.key_manager,b,this.options.enable_editing,this.options.enable_keys,this.options.full_screen_button));if(this._set_up_button_panel(g,b,this.options.enable_editing,this.options.enable_keys,this.options.full_screen_button,this.options.menu,this.options.ignore_bootstrap),this.options.zoom_to_element){var w=this.options.zoom_to_element.type,x=this.options.zoom_to_element.id;if(y.isUndefined(w)||-1===["reaction","node"].indexOf(w))throw new Error('zoom_to_element type must be "reaction" or "node"');if(y.isUndefined(x))throw new Error("zoom_to_element must include id");"reaction"===w?this.map.zoom_to_reaction(x):"node"===w&&this.map.zoom_to_node(x)}else if(null!==e)this.map.zoom_extent_canvas();else if(null!==this.options.starting_reaction&&null!==this.cobra_model){var k=this.zoom_container.get_size(),S={x:k.width/2,y:k.height/4};this.map.new_reaction_from_scratch(this.options.starting_reaction,S,90),this.map.zoom_extent_nodes()}else this.map.zoom_extent_canvas();this._setup_status(this.selection,this.map);this._setup_quick_jump(this.selection),this.options.enable_editing?this.zoom_mode():this.view_mode();this.options.enable_editing&&this._setup_confirm_before_exit();this.map.draw_everything()},load_model:function(e,t){y.isUndefined(t)&&(t=!0);y.isNull(e)?this.cobra_model=null:this.cobra_model=s.from_cobra_json(e);this.map&&(this.map.cobra_model=this.cobra_model,t&&this._update_data(!0,!1),this.settings.get_option("highlight_missing")&&this.map.draw_all_reactions(!1,!1));this.callback_manager.run("load_model",null,e,t)},_set_mode:function(e){this.search_bar.toggle(!1),this.build_input.toggle("build"==e),this.build_input.direction_arrow.toggle("build"==e),"all"==this.options.menu&&this.options.enable_editing&&this._toggle_direction_buttons("build"==e);this.brush.toggle("brush"==e),this.zoom_container.toggle_pan_drag("zoom"==e||"view"==e),this.map.canvas.toggle_resize("zoom"==e||"brush"==e),"rotate"==e?(this.map.behavior.toggle_selectable_drag(!1),this.map.behavior.toggle_rotation_mode(!0)):(this.map.behavior.toggle_rotation_mode("rotate"==e),this.map.behavior.toggle_selectable_drag("brush"==e));this.map.behavior.toggle_selectable_click("build"==e||"brush"==e),this.map.behavior.toggle_label_drag("brush"==e),this.map.behavior.toggle_label_mouseover(!0),this.map.behavior.toggle_text_label_edit("text"==e),this.map.behavior.toggle_bezier_drag("brush"==e),("view"==e||"text"==e)&&this.map.select_none();"rotate"==e&&this.map.deselect_text_labels();this.map.draw_everything()},view_mode:function(){this.callback_manager.run("view_mode"),this._set_mode("view")},build_mode:function(){this.callback_manager.run("build_mode"),this._set_mode("build")},brush_mode:function(){this.callback_manager.run("brush_mode"),this._set_mode("brush")},zoom_mode:function(){this.callback_manager.run("zoom_mode"),this._set_mode("zoom")},rotate_mode:function(){this.callback_manager.run("rotate_mode"),this._set_mode("rotate")},text_mode:function(){this.callback_manager.run("text_mode"),this._set_mode("text")},_reaction_check_add_abs:function(){var e=this.options.reaction_styles;if(null!==this.options.reaction_data&&!this.has_custom_reaction_styles&&!y.contains(e,"abs"))return this.settings.set_conditional("reaction_styles",e.concat("abs")),function(){this.map.set_status("Visualizing absolute value of reaction data. Change this option in Settings.",5e3)}.bind(this);return null},set_reaction_data:function(e){this.options.reaction_data=e;var t=this._reaction_check_add_abs();this._update_data(!0,!0,"reaction"),t?t():this.map.set_status("")},set_metabolite_data:function(e){this.options.metabolite_data=e,this._update_data(!0,!0,"metabolite"),this.map.set_status("")},set_gene_data:function(e,t){t&&this.settings.set_conditional("show_gene_reaction_rules",!1);this.options.gene_data=e,this._update_data(!0,!0,"reaction"),this.map.set_status("")},_update_data:function(e,t,n,i){void 0===n&&(n=["reaction","metabolite"]);void 0===i&&(i=!0);var o,a,s,l=-1!==n.indexOf("metabolite"),u=-1!==n.indexOf("reaction");l&&t&&null!==this.map&&(o=v.import_and_check(this.options.metabolite_data,"metabolite_data"),this.map.apply_metabolite_data_to_map(o),i&&this.map.draw_all_nodes(!1));u&&(null!==this.options.reaction_data&&t&&null!==this.map?(a=v.import_and_check(this.options.reaction_data,"reaction_data"),this.map.apply_reaction_data_to_map(a),i&&this.map.draw_all_reactions(!1,!1)):null!==this.options.gene_data&&t&&null!==this.map?(s=c(this.options.gene_data,this.cobra_model,this.map),this.map.apply_gene_data_to_map(s),i&&this.map.draw_all_reactions(!1,!1)):t&&null!==this.map&&(this.map.apply_reaction_data_to_map(null),i&&this.map.draw_all_reactions(!1,!1)));this.update_model_timer&&clearTimeout(this.update_model_timer);function c(e,t,n){var i={};return null!==t&&r.extend(i,t.reactions),null!==n&&r.extend(i,n.reactions,!0),v.import_and_check(e,"gene_data",i)}this.update_model_timer=setTimeout(function(){l&&e&&null!==this.cobra_model&&(o||(o=v.import_and_check(this.options.metabolite_data,"metabolite_data")),this.cobra_model.apply_metabolite_data(o,this.options.metabolite_styles,this.options.metabolite_compare_style)),u&&(null!==this.options.reaction_data&&e&&null!==this.cobra_model?(a||(a=v.import_and_check(this.options.reaction_data,"reaction_data")),this.cobra_model.apply_reaction_data(a,this.options.reaction_styles,this.options.reaction_compare_style)):null!==this.options.gene_data&&e&&null!==this.cobra_model?(s||(s=c(this.options.gene_data,this.cobra_model,this.map)),this.cobra_model.apply_gene_data(s,this.options.reaction_styles,this.options.identifiers_on_map,this.options.reaction_compare_style,this.options.and_method_in_gene_reaction_rule)):e&&null!==this.cobra_model&&this.cobra_model.apply_reaction_data(null,this.options.reaction_styles,this.options.reaction_compare_style)),this.callback_manager.run("update_data",null,e,t,n,i)}.bind(this),5)},_toggle_direction_buttons:function(e){y.isUndefined(e)&&(e="block"===!this.direction_buttons.style("display"));this.direction_buttons.style("display",e?"block":"none")},_set_up_menu:function(e,t,n,r,i,o,a,s){var l=e.attr("id","menu").append("ul").attr("class","nav nav-pills");c.dropdown_menu(l,"Map").button({key:r.save,text:"Save map JSON",key_text:o?" (Ctrl+S)":null}).button({text:"Load map JSON",key_text:o?" (Ctrl+O)":null,input:{assign:n.assigned_keys.load,key:"fn",fn:function(e,t){if(e)return console.warn(e),void this.map.set_status("Error loading map: "+e,2e3);try{!function(e){if(!("map_id"in e[0]&&"reactions"in e[1]&&"nodes"in e[1]&&"canvas"in e[1]))throw new Error("Bad map data.")}(t),this.load_map(t),this.map.set_status("Loaded map "+t[0].map_name,3e3)}catch(n){console.warn(n),this.map.set_status("Error loading map: "+n,2e3)}}.bind(this),pre_fn:function(){t.set_status("Loading map ...")},failure_fn:function(){t.set_status("")}}}).button({key:r.save_svg,text:"Export as SVG",key_text:o?" (Ctrl+Shift+S)":null}).button({key:r.save_png,text:"Export as PNG",key_text:o?" (Ctrl+Shift+P)":null}).button({key:r.clear_map,text:"Clear map"});var u=c.dropdown_menu(l,"Model").button({text:"Load COBRA model JSON",key_text:o?" (Ctrl+M)":null,input:{assign:n.assigned_keys.load_model,key:"fn",fn:function(e,t){if(e)return console.warn(e),void this.map.set_status("Error loading model: "+e,2e3);try{this.load_model(t,!0),this.build_input.toggle(!1),"id"in t?this.map.set_status("Loaded model "+t.id,3e3):this.map.set_status("Loaded model (no model id)",3e3)}catch(n){console.warn(n),this.map.set_status("Error loading model: "+n,2e3)}}.bind(this),pre_fn:function(){t.set_status("Loading model ...")},failure_fn:function(){t.set_status("")}}}).button({id:"convert_map",key:r.convert_map,text:"Update names and gene reaction rules using model"}).button({id:"clear_model",key:r.clear_model,text:"Clear model"}),h=function(){u.dropdown.selectAll("li").classed("escher-disabled",function(e){return("clear_model"==e.id||"convert_map"==e.id)&&null===this.cobra_model||null}.bind(this))}.bind(this);h(),this.callback_manager.set("load_model",h);var d=c.dropdown_menu(l,"Data").button({input:{assign:n.assigned_keys.load_reaction_data,key:"fn",fn:function(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);null!==t&&this.set_gene_data(null);this.set_reaction_data(t)}.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading reaction data ...")},failure_fn:function(){t.set_status("")}},text:"Load reaction data"}).button({key:r.clear_reaction_data,text:"Clear reaction data"}).divider().button({input:{fn:function(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);null!==t&&this.set_reaction_data(null);this.settings.set_conditional("show_gene_reaction_rules",!0),this.set_gene_data(t)}.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading gene data ...")},failure_fn:function(){t.set_status("")}},text:"Load gene data"}).button({key:r.clear_gene_data,text:"Clear gene data"}).divider().button({input:{fn:function(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);this.set_metabolite_data(t)}.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading metabolite data ...")},failure_fn:function(){t.set_status("")}},text:"Load metabolite data"}).button({key:r.clear_metabolite_data,text:"Clear metabolite data"}),f=function(){d.dropdown.selectAll("li").classed("escher-disabled",function(e){return e?"Clear reaction data"==e.text&&null===this.options.reaction_data||("Clear gene data"==e.text&&null===this.options.gene_data||("Clear metabolite data"==e.text&&null===this.options.metabolite_data||null)):null}.bind(this))}.bind(this);f(),this.callback_manager.set("update_data",f);var p=c.dropdown_menu(l,"Edit",!0);i?p.button({key:r.zoom_mode,id:"zoom-mode-menu-button",text:"Pan mode",key_text:o?" (Z)":null}).button({key:r.brush_mode,id:"brush-mode-menu-button",text:"Select mode",key_text:o?" (V)":null}).button({key:r.build_mode,id:"build-mode-menu-button",text:"Add reaction mode",key_text:o?" (N)":null}).button({key:r.rotate_mode,id:"rotate-mode-menu-button",text:"Rotate mode",key_text:o?" (R)":null}).button({key:r.text_mode,id:"text-mode-menu-button",text:"Text mode",key_text:o?" (T)":null}).divider().button({key:r.delete,text:"Delete",key_text:o?" (Del)":null}).button({key:r.undo,text:"Undo",key_text:o?" (Ctrl+Z)":null}).button({key:r.redo,text:"Redo",key_text:o?" (Ctrl+Shift+Z)":null}).button({key:r.toggle_primary,text:"Toggle primary/secondary",key_text:o?" (P)":null}).button({key:r.cycle_primary,text:"Rotate reactant locations",key_text:o?" (C)":null}).button({key:r.select_all,text:"Select all",key_text:o?" (Ctrl+A)":null}).button({key:r.select_none,text:"Select none",key_text:o?" (Ctrl+Shift+A)":null}).button({key:r.invert_selection,text:"Invert selection"}):p.button({key:r.view_mode,id:"view-mode-menu-button",text:"View mode"});var g=c.dropdown_menu(l,"View",!0).button({key:r.zoom_in,text:"Zoom in",key_text:o?" (+)":null}).button({key:r.zoom_out,text:"Zoom out",key_text:o?" (-)":null}).button({key:r.extent_nodes,text:"Zoom to nodes",key_text:o?" (0)":null}).button({key:r.extent_canvas,text:"Zoom to canvas",key_text:o?" (1)":null}).button({key:r.search,text:"Find",key_text:o?" (F)":null});a&&g.button({key:r.full_screen,text:"Full screen",key_text:o?" (2)":null});i&&(g.button({key:r.toggle_beziers,id:"bezier-button",text:"Show control points",key_text:o?" (B)":null}),t.callback_manager.set("toggle_beziers.button",function(e){l.select("#bezier-button").select(".dropdown-button-text").text((e?"Hide":"Show")+" control points"+(o?" (B)":""))}));g.divider().button({key:r.show_settings,text:"Settings",key_text:o?" (,)":null}),l.append("a").attr("class","help-button").attr("target","#").attr("href","https://escher.readthedocs.org").text("?");var v=function(e){$(this.selection.node()).find("#"+e).button("toggle");["zoom-mode-menu-button","brush-mode-menu-button","build-mode-menu-button","rotate-mode-menu-button","view-mode-menu-button","text-mode-menu-button"].forEach(function(t){var n=t.replace("-menu","");this.selection.select("#"+t).select("span").classed("glyphicon",n==e).classed("glyphicon-ok",n==e)}.bind(this))};this.callback_manager.set("zoom_mode",v.bind(this,"zoom-mode-button")),this.callback_manager.set("brush_mode",v.bind(this,"brush-mode-button")),this.callback_manager.set("build_mode",v.bind(this,"build-mode-button")),this.callback_manager.set("rotate_mode",v.bind(this,"rotate-mode-button")),this.callback_manager.set("view_mode",v.bind(this,"view-mode-button")),this.callback_manager.set("text_mode",v.bind(this,"text-mode-button"))},_set_up_button_panel:function(e,t,n,r,i,o,a){var s=e.append("ul").attr("class","nav nav-pills nav-stacked").attr("id","button-panel");c.individual_button(s.append("li"),{key:t.zoom_in,text:"+",icon:"glyphicon glyphicon-plus-sign",tooltip:"Zoom in",key_text:r?" (+)":null,ignore_bootstrap:a}),c.individual_button(s.append("li"),{key:t.zoom_out,text:"\u2013",icon:"glyphicon glyphicon-minus-sign",tooltip:"Zoom out",key_text:r?" (-)":null,ignore_bootstrap:a}),c.individual_button(s.append("li"),{key:t.extent_canvas,text:"\u2194",icon:"glyphicon glyphicon-resize-full",tooltip:"Zoom to canvas",key_text:r?" (1)":null,ignore_bootstrap:a}),i&&c.individual_button(s.append("li"),{key:t.full_screen,text:"\u25a3",icon:"glyphicon glyphicon-fullscreen",tooltip:"Full screen",key_text:r?" (2)":null,ignore_bootstrap:a});if(n&&"all"===o){c.radio_button_group(s.append("li")).button({key:t.zoom_mode,id:"zoom-mode-button",text:"Z",icon:"glyphicon glyphicon-move",tooltip:"Pan mode",key_text:r?" (Z)":null,ignore_bootstrap:a}).button({key:t.brush_mode,text:"V",id:"brush-mode-button",icon:"glyphicon glyphicon-hand-up",tooltip:"Select mode",key_text:r?" (V)":null,ignore_bootstrap:a}).button({key:t.build_mode,text:"N",id:"build-mode-button",icon:"glyphicon glyphicon-plus",tooltip:"Add reaction mode",key_text:r?" (N)":null,ignore_bootstrap:a}).button({key:t.rotate_mode,text:"R",id:"rotate-mode-button",icon:"glyphicon glyphicon-repeat",tooltip:"Rotate mode",key_text:r?" (R)":null,ignore_bootstrap:a}).button({key:t.text_mode,text:"T",id:"text-mode-button",icon:"glyphicon glyphicon-font",tooltip:"Text mode",key_text:r?" (T)":null,ignore_bootstrap:a}),this.direction_buttons=s.append("li");c.button_group(this.direction_buttons).button({key:t.direction_arrow_left,text:"\u2190",icon:"glyphicon glyphicon-arrow-left",tooltip:"Direction arrow (\u2190)",ignore_bootstrap:a}).button({key:t.direction_arrow_right,text:"\u2192",icon:"glyphicon glyphicon-arrow-right",tooltip:"Direction arrow (\u2192)",ignore_bootstrap:a}).button({key:t.direction_arrow_up,text:"\u2191",icon:"glyphicon glyphicon-arrow-up",tooltip:"Direction arrow (\u2191)",ignore_bootstrap:a}).button({key:t.direction_arrow_down,text:"\u2193",icon:"glyphicon glyphicon-arrow-down",tooltip:"Direction arrow (\u2193)",ignore_bootstrap:a})}},_setup_status:function(e,t){var n=e.append("div").attr("id","status");return t.callback_manager.set("set_status",function(e){n.html(e)}),n},_setup_quick_jump:function(e){var t=function(e,t,n){if(!this.options.enable_editing||this.options.never_ask_before_quit||confirm("You will lose any unsaved changes.\n\nAre you sure you want to switch maps?")){this.map.set_status("Loading map "+e+" ...");var i=r.name_to_url(e,t);k(i,function(e,t){if(e)return console.warn("Could not load data: "+e),this.map.set_status("Could not load map",2e3),void(n&&n(!1));n&&n(!0),this.load_map(t),this.map.set_status("")}.bind(this))}else n&&n(!1)}.bind(this);this.quick_jump=g(e,t)},_setup_modes:function(e,t,n){var r={};e.callback_manager.set("start_rotation",function(){r.brush=t.enabled,t.toggle(!1),r.zoom=n.zoom_on,n.toggle_pan_drag(!1),r.selectable_mousedown=null!==e.behavior.selectable_mousedown,e.behavior.toggle_selectable_click(!1),r.label_mouseover=null!==e.behavior.label_mouseover,e.behavior.toggle_label_mouseover(!1)}),e.callback_manager.set("end_rotation",function(){t.toggle(r.brush),n.toggle_pan_drag(r.zoom),e.behavior.toggle_selectable_click(r.selectable_mousedown),e.behavior.toggle_label_mouseover(r.label_mouseover),r={}})},_get_keys:function(e,t,n,i,o,a){var s={save:{key:"ctrl+s",target:e,fn:e.save},save_svg:{key:"ctrl+shift+s",target:e,fn:e.save_svg},save_png:{key:"ctrl+shift+p",target:e,fn:e.save_png},load:{key:"ctrl+o",fn:null},convert_map:{target:e,fn:e.convert_map},clear_map:{target:e,fn:e.clear_map},load_model:{key:"ctrl+m",fn:null},clear_model:{fn:this.load_model.bind(this,null,!0)},load_reaction_data:{fn:null},clear_reaction_data:{target:this,fn:function(){this.set_reaction_data(null)}},load_metabolite_data:{fn:null},clear_metabolite_data:{target:this,fn:function(){this.set_metabolite_data(null)}},load_gene_data:{fn:null},clear_gene_data:{target:this,fn:function(){this.set_gene_data(null,!0)}},zoom_in_ctrl:{key:"ctrl+=",target:t,fn:t.zoom_in},zoom_in:{key:"=",target:t,fn:t.zoom_in,ignore_with_input:!0},zoom_out_ctrl:{key:"ctrl+-",target:t,fn:t.zoom_out},zoom_out:{key:"-",target:t,fn:t.zoom_out,ignore_with_input:!0},extent_nodes_ctrl:{key:"ctrl+0",target:e,fn:e.zoom_extent_nodes},extent_nodes:{key:"0",target:e,fn:e.zoom_extent_nodes,ignore_with_input:!0},extent_canvas_ctrl:{key:"ctrl+1",target:e,fn:e.zoom_extent_canvas},extent_canvas:{key:"1",target:e,fn:e.zoom_extent_canvas,ignore_with_input:!0},search_ctrl:{key:"ctrl+f",fn:n.toggle.bind(n,!0)},search:{key:"f",fn:n.toggle.bind(n,!0),ignore_with_input:!0},view_mode:{target:this,fn:this.view_mode,ignore_with_input:!0},show_settings_ctrl:{key:"ctrl+,",target:i,fn:i.toggle},show_settings:{key:",",target:i,fn:i.toggle,ignore_with_input:!0}};a&&r.extend(s,{full_screen_ctrl:{key:"ctrl+2",target:e,fn:e.full_screen},full_screen:{key:"2",target:e,fn:e.full_screen,ignore_with_input:!0}});o&&r.extend(s,{build_mode:{key:"n",target:this,fn:this.build_mode,ignore_with_input:!0},zoom_mode:{key:"z",target:this,fn:this.zoom_mode,ignore_with_input:!0},brush_mode:{key:"v",target:this,fn:this.brush_mode,ignore_with_input:!0},rotate_mode:{key:"r",target:this,fn:this.rotate_mode,ignore_with_input:!0},text_mode:{key:"t",target:this,fn:this.text_mode,ignore_with_input:!0},toggle_beziers:{key:"b",target:e,fn:e.toggle_beziers,ignore_with_input:!0},delete_ctrl:{key:"ctrl+backspace",target:e,fn:e.delete_selected,ignore_with_input:!0},delete:{key:"backspace",target:e,fn:e.delete_selected,ignore_with_input:!0},delete_del:{key:"del",target:e,fn:e.delete_selected,ignore_with_input:!0},toggle_primary:{key:"p",target:e,fn:e.toggle_selected_node_primary,ignore_with_input:!0},cycle_primary:{key:"c",target:e,fn:e.cycle_primary_node,ignore_with_input:!0},direction_arrow_right:{key:"right",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.right,ignore_with_input:!0},direction_arrow_down:{key:"down",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.down,ignore_with_input:!0},direction_arrow_left:{key:"left",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.left,ignore_with_input:!0},direction_arrow_up:{key:"up",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.up,ignore_with_input:!0},undo:{key:"ctrl+z",target:e.undo_stack,fn:e.undo_stack.undo},redo:{key:"ctrl+shift+z",target:e.undo_stack,fn:e.undo_stack.redo},select_all:{key:"ctrl+a",target:e,fn:e.select_all},select_none:{key:"ctrl+shift+a",target:e,fn:e.select_none},invert_selection:{target:e,fn:e.invert_selection}});return s},_setup_confirm_before_exit:function(){window.onbeforeunload=function(e){return e=e||window.event,this.options.never_ask_before_quit?null:"You will lose any unsaved changes."}.bind(this)}},e.exports=S},function(e,t,n){var r,i=i||function(e){"use strict";if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){setTimeout(function(){"string"===typeof e?n().revokeObjectURL(e):e.remove()},4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,h){h||(t=u(t));var d,f=this,p="application/octet-stream"===t.type,g=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"===typeof i)try{i.call(e,n||e)}catch(o){s(o)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,i)return d=n().createObjectURL(t),void setTimeout(function(){r.href=d,r.download=c,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(r),g(),l(d),f.readyState=f.DONE});!function(){if((a||p&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,f.readyState=f.DONE,g()},r.readAsDataURL(t),void(f.readyState=f.INIT)}d||(d=n().createObjectURL(t)),p?e.location.href=d:e.open(d,"_blank")||(e.location.href=d);f.readyState=f.DONE,g(),l(d)}()},h=c.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);e.exports?e.exports.saveAs=i:null!==n(52)&&null!==n(53)&&(void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r))},function(e,t,n){var r=n(3),i=n(36),o=n(99),a=n(100),s=n(37),l=n(14),u=n(2).select,c=n(2).mouse,h=r.make_class();h.prototype={init:function(e,t,n,r){var s=e.append("div").attr("id","rxn-input");this.placed_div=i(s,t,{x:240,y:0}),this.placed_div.hide();var l=o(s.node(),{backgroundColor:"#eee"});u(l.input),this.completely=l,s.append("button").attr("class","button input-close-button").text("\xd7").on("mousedown",function(){this.hide_dropdown()}.bind(this)),this.map=t;this.direction_arrow=new a(t.sel),this.direction_arrow.set_rotation(90),this.setup_map_callbacks(t),this.zoom_container=n,this.setup_zoom_callbacks(n),this.settings=r,this.toggle(!1),this.target_coords=null},setup_map_callbacks:function(e){e.callback_manager.set("select_metabolite_with_id.input",function(e,t){this.is_active&&(this.reload(e,t,!1),this.show_dropdown(t)),this.hide_target()}.bind(this)),e.callback_manager.set("select_selectable.input",function(e,t,n){this.hide_target(),1==e&&this.is_active&&n?(this.reload(t,n,!1),this.show_dropdown(n)):this.toggle(!1)}.bind(this)),e.callback_manager.set("deselect_nodes",function(){this.direction_arrow.hide(),this.hide_dropdown()}.bind(this)),e.callback_manager.set("before_svg_export",function(){this.direction_arrow.hide(),this.hide_target()}.bind(this))},setup_zoom_callbacks:function(e){e.callback_manager.set("zoom.input",function(){this.is_active&&this.place_at_selected()}.bind(this))},is_visible:function(){return this.placed_div.is_visible()},toggle:function(e){this.is_active=void 0===e?!this.is_active:e;this.is_active?(this.toggle_start_reaction_listener(!0),l.isNull(this.target_coords)?this.reload_at_selected():this.placed_div.place(this.target_coords),this.show_dropdown(),this.map.set_status("Click on the canvas or an existing metabolite"),this.direction_arrow.show()):(this.toggle_start_reaction_listener(!1),this.hide_dropdown(),this.map.set_status(null),this.direction_arrow.hide())},show_dropdown:function(e){this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.hide_dropdown()}.bind(this),!0),this.completely.input.blur(),this.completely.repaint(),this.completely.setText(""),this.completely.input.focus()},hide_dropdown:function(){this.clear_escape&&this.clear_escape();this.clear_escape=null,this.placed_div.hide(),this.completely.input.blur(),this.completely.hideDropDown()},place_at_selected:function(){this.map.deselect_text_labels();var e=this.map.select_single_node();if(null==e)return;var t={x:e.x,y:e.y};this.place(t)},place:function(e){this.placed_div.place(e),this.direction_arrow.set_location(e),this.direction_arrow.show()},reload_at_selected:function(){this.map.deselect_text_labels();var e=this.map.select_single_node();if(null==e)return!1;var t={x:e.x,y:e.y};return this.reload(e,t,!1),!0},reload:function(e,t,n){if(!n&&!e)return void console.error("No selected node, and not starting from scratch");if(this.place(t),null===this.map.cobra_model)return void this.completely.setText("Cannot add: No model.");var i,o="name"===this.settings.get_option("identifiers_on_map"),a=this.settings.get_option("allow_building_duplicate_reactions"),u=[],c=this.map.cobra_model.reactions,h=this.map.cobra_model.metabolites,d=this.map.reactions,f=this.map.has_data_on_reactions,p=(this.map.reaction_data,this.map.reaction_data_styles,e?o?e.name:e.bigg_id:""),g=function(e,t){return e.replace(new RegExp("(^| )("+t.join("|")+")($| )","g"),"$1<b>$2</b>$3")},v={};for(var m in c){var _=c[m],b=_.name,y=o?b:m;if(a||!z(m,d))for(var w in _.metabolites)if(n||w==e.bigg_id){if(m in v)continue;h[w].name;if(f)u.push({reaction_data:_.data,html:"<b>"+y+"</b>: "+_.data_string,matches:[y],id:m}),v[m]=!0;else{var x,k={},S=[];if(o)for(x in _.metabolites){var C=h[x].name;k[C]=_.metabolites[x],S.push(C)}else for(x in k=r.clone(_.metabolites),_.metabolites)S.push(x);var E=l.flatten(_.genes.map(function(e){return[e.name,e.bigg_id]})),T=s.build_reaction_string(k,_.reversibility,_.lower_bound,_.upper_bound);u.push({html:"<b>"+y+"</b>\t"+g(T,[p]),matches:[y].concat(S).concat(E),id:m}),v[m]=!0}}}i=f?function(e,t){return Math.abs(t.reaction_data)-Math.abs(e.reaction_data)}:function(e,t){return e.html.toLowerCase()<t.html.toLowerCase()?-1:1};u=u.sort(i);var P=this.completely;P.options=u,P.setText("");var A=this.direction_arrow,O=function(r){if(null!==r)if(n)this.map.new_reaction_from_scratch(r,t,A.get_rotation());else{if(!(e.node_id in this.map.nodes))return console.error("Selected node no longer exists"),void this.hide_dropdown();this.map.new_reaction_for_metabolite(r,e.node_id,A.get_rotation())}}.bind(this);function z(e,t){for(var n in t)if(t[n].bigg_id===e)return!0;return!1}P.onEnter=function(e){this.setText(""),this.onChange(""),O(e)}},toggle_start_reaction_listener:function(e){if(void 0===e)this.start_reaction_listener=!this.start_reaction_listener;else{if(this.start_reaction_listener===e)return;this.start_reaction_listener=e}this.start_reaction_listener?(this.map.sel.on("click.start_reaction",function(e){if(!this.direction_arrow.dragging){var t={x:c(e)[0],y:c(e)[1]};this.map.deselect_nodes(),this.map.deselect_text_labels(),this.reload(null,t,!0),this.show_target(this.map,t),this.show_dropdown(t)}}.bind(this,this.map.sel.node())),this.map.sel.classed("start-reaction-cursor",!0)):(this.map.sel.on("click.start_reaction",null),this.map.sel.classed("start-reaction-cursor",!1),this.hide_target())},hide_target:function(){this.target_coords&&this.map.sel.selectAll(".start-reaction-target").remove();this.target_coords=null},show_target:function(e,t){var n=e.sel.selectAll(".start-reaction-target").data([12,5]);n.enter().append("circle").classed("start-reaction-target",!0).attr("r",function(e){return e}).style("stroke-width",4).merge(n).style("visibility","visible").attr("transform","translate("+t.x+","+t.y+")"),this.target_coords=t}},e.exports=h},function(e,t,n){var r=n(3);e.exports=function(e,t){document=r.get_document(e),window=r.get_window(e),(t=t||{}).fontSize=t.fontSize||"13px",t.fontFamily=t.fontFamily||"sans-serif",t.promptInnerHTML=t.promptInnerHTML||"",t.color=t.color||"#333",t.hintColor=t.hintColor||"#aaa",t.backgroundColor=t.backgroundColor||"#fff",t.dropDownBorderColor=t.dropDownBorderColor||"#aaa",t.dropDownZIndex=t.dropDownZIndex||"100",t.dropDownOnHoverBackgroundColor=t.dropDownOnHoverBackgroundColor||"#ddd";var n=document.createElement("input");n.type="text",n.spellcheck=!1,n.style.fontSize=t.fontSize,n.style.fontFamily=t.fontFamily,n.style.color=t.color,n.style.backgroundColor=t.backgroundColor,n.style.width="100%",n.style.outline="0",n.style.border="0",n.style.margin="0",n.style.padding="0";var i=n.cloneNode();i.disabled="",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.borderColor="transparent",i.style.boxShadow="none",i.style.color=t.hintColor,n.style.backgroundColor="transparent",n.style.verticalAlign="top",n.style.position="relative";var o=document.createElement("div");o.style.position="relative",o.style.outline="0",o.style.border="0",o.style.margin="0",o.style.padding="0";var a=document.createElement("div");if(a.style.position="absolute",a.style.outline="0",a.style.margin="0",a.style.padding="0",a.style.border="0",a.style.fontSize=t.fontSize,a.style.fontFamily=t.fontFamily,a.style.color=t.color,a.style.backgroundColor=t.backgroundColor,a.style.top="0",a.style.left="0",a.style.overflow="hidden",a.innerHTML=t.promptInnerHTML,a.style.background="transparent",void 0===document.body)throw"document.body is undefined. The library was wired up incorrectly.";document.body.appendChild(a);var s=a.getBoundingClientRect().right;o.appendChild(a),a.style.visibility="visible",a.style.left="-"+s+"px",o.style.marginLeft=s+"px",o.appendChild(i),o.appendChild(n);var l=document.createElement("div");l.style.position="absolute",l.style.visibility="hidden",l.style.outline="0",l.style.margin="0",l.style.padding="0",l.style.textAlign="left",l.style.fontSize=t.fontSize,l.style.fontFamily=t.fontFamily,l.style.backgroundColor=t.backgroundColor,l.style.zIndex=t.dropDownZIndex,l.style.cursor="default",l.style.borderStyle="solid",l.style.borderWidth="1px",l.style.borderColor=t.dropDownBorderColor,l.style.overflowX="hidden",l.style.whiteSpace="pre",l.style.overflowY="scroll";var u,c,h=function(e){var n=[],r=0,i=-1,o=null,a=function(){this.style.outline="1px solid #ddd"},s=function(){this.style.outline="0"},l=function(e){e.preventDefault(),u.onmouseselection(this.id)},u={hide:function(){e.style.visibility="hidden"},refresh:function(i,o){e.style.visibility="hidden",r=0,e.innerHTML="";var c=window.innerHeight||document.documentElement.clientHeight,h=e.parentNode.getBoundingClientRect(),d=h.top-6,p=c-h.bottom-6;n=[];for(var g=0;g<o.length;g++){var v=o[g].matches.filter(function(e){return 0==e.toLowerCase().indexOf(i.toLowerCase())});if(0!=v.length){var m=document.createElement("div");if(m.style.color=t.color,m.onmouseover=a,m.onmouseout=s,m.onmousedown=function(e){e.preventDefault()},m.ondblclick=l,m.__hint=v[0],m.id=o[g].id,m.innerHTML=o[g].html,n.push(m),e.appendChild(m),n.length>=f.display_limit){var _=document.createElement("div");_.innerHTML=" "+(o.length-n.length)+" more",n.push(_),e.appendChild(_);break}}}0!==n.length&&(u.highlight(0),d>3*p?(e.style.maxHeight=d+"px",e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom="",e.style.maxHeight=p+"px"),e.style.visibility="visible")},highlight:function(e){-1!=i&&n[i]&&(n[i].style.backgroundColor=t.backgroundColor),n[e].style.backgroundColor=t.dropDownOnHoverBackgroundColor,i=e,o=n[e]},move:function(t){return"hidden"===e.style.visibility?"":r+t===-1||r+t===n.length?n[r].__hint:(r+=t,u.highlight(r),n[r].__hint)},onmouseselection:function(){},get_current_row:function(){return o}};return u}(l);h.onmouseselection=function(e){f.onEnter(e),f.input.focus()},o.appendChild(l),e.appendChild(o);var d,f={get_hint:function(e){return e},display_limit:1e3,onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){f.repaint()},startFrom:0,options:[],wrapper:o,input:n,hint:i,dropDown:l,prompt:a,setText:function(e){i.value=e,n.value=e},getText:function(){return n.value},hideDropDown:function(){h.hide()},repaint:function(){var e=n.value,r=f.startFrom,o=f.options,a=o.length,s=e.substring(r);c=e.substring(0,r),i.value="";for(var d=0;d<a;d++){var p=o[d].matches.filter(function(e){return 0==e.toLowerCase().indexOf(s.toLowerCase())});if(0!=p.length){i.value=f.get_hint(p[0]);break}}l.style.left=function(e){return void 0===u&&((u=document.createElement("span")).style.visibility="hidden",u.style.position="fixed",u.style.outline="0",u.style.margin="0",u.style.padding="0",u.style.border="0",u.style.left="0",u.style.whiteSpace="pre",u.style.fontSize=t.fontSize,u.style.fontFamily=t.fontFamily,u.style.fontWeight="normal",document.body.appendChild(u)),u.innerHTML=String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u.getBoundingClientRect().right}(c)+"px",h.refresh(s,f.options)}};!function(e,t){d=e.value;var n=function(){var n=e.value;d!==n&&(d=n,t(n))};e.addEventListener("input",n,!1),e.addEventListener("keyup",n,!1),e.addEventListener("change",n,!1)}(n,function(e){f.onChange(e),f.repaint()});return n.addEventListener("keydown",function(e){var t=(e=e||window.event).keyCode;if(33!=t&&34!=t)if(39!=t&&35!=t&&9!=t)if(13!=t){var r;if(40==t)return""==(r=h.move(1))&&f.onArrowDown(),void(i.value=f.get_hint(r));if(38==t)return""==(r=h.move(-1))&&f.onArrowUp(),i.value=f.get_hint(r),e.preventDefault(),void e.stopPropagation();i.value=""}else{var o=h.get_current_row().id;f.onEnter(o)}else if(9==t&&(e.preventDefault(),e.stopPropagation(),0==i.value.length&&f.onTab()),i.value.length>0){n.value=i.value;var a=d!=n.value;d=n.value,a&&f.onChange(n.value)}},!1),f}},function(e,t,n){var r=n(3),i=n(18).drag,o=n(2).mouse,a=n(2),s=r.make_class();s.prototype={init:function(e){this.arrow_container=e.append("g").attr("id","direction-arrow-container").attr("transform","translate(0,0)rotate(0)"),this.arrow=this.arrow_container.append("path").classed("direction-arrow",!0).attr("d","M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z").style("visibility","hidden").attr("transform","translate(30,0)scale(2.5)"),this.sel=e,this.center={x:0,y:0},this._setup_drag(),this.dragging=!1,this.is_visible=!1,this.show()},set_location:function(e){this.center=e;var t=r.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+e.x+","+e.y+")rotate("+t.rotate+")")},set_rotation:function(e){var t=r.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+t.translate+")rotate("+e+")")},displace_rotation:function(e){var t=r.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+t.translate+")rotate("+(t.rotate+e)+")")},get_rotation:function(){return r.d3_transform_catch(this.arrow_container.attr("transform")).rotate},toggle:function(e){this.is_visible=void 0===e?!this.is_visible:e;this.arrow.style("visibility",this.is_visible?"visible":"hidden")},show:function(){this.toggle(!0)},hide:function(){this.toggle(!1)},right:function(){this.set_rotation(0)},left:function(){this.set_rotation(180)},up:function(){this.set_rotation(270)},down:function(){this.set_rotation(90)},_setup_drag:function(){var e=i().on("start",function(e){a.event.sourceEvent.stopPropagation(),this.dragging=!0}.bind(this)).on("drag.direction_arrow",function(e){var t={x:a.event.dx,y:a.event.dy},n={x:o(this.sel.node())[0],y:o(this.sel.node())[1]},i=r.angle_for_event(t,n,this.center);this.displace_rotation(r.to_degrees(i))}.bind(this)).on("end",function(e){setTimeout(function(){this.dragging=!1}.bind(this),200)}.bind(this));this.arrow_container.call(e)}},e.exports=s},function(e,t,n){var r=n(3),i=n(24),o=n(20),a=n(17).format,s=(n(2).select,r.make_class());function l(e,t,n,i){r.check_undefined(arguments,["reaction_arrow_displacement","start","end","displace"]);var o,a,s=e,l=r.distance(t,n);return s&&l||console.error("Bad value"),"start"===i?(o=t.x+s*(n.x-t.x)/l,a=t.y+s*(n.y-t.y)/l):"end"===i?(o=n.x-s*(n.x-t.x)/l,a=n.y-s*(n.y-t.y)/l):console.error("bad displace value: "+i),{x:o,y:a}}s.prototype={init:function(e,t){this.behavior=e,this.settings=t,this.callback_manager=new o},create_reaction:function(e){var t=e.append("g").attr("id",function(e){return"r"+e.reaction_id}).attr("class","reaction");return this.create_reaction_label(t),this.callback_manager.run("create_reaction",this,e),t},update_reaction:function(e,t,n,i,o,a){e.select(".reaction-label-group").call(function(e){return this.update_reaction_label(e,a)}.bind(this)),r.draw_a_nested_object(e,".segment-group","segments","segment_id",this.create_segment.bind(this),function(e){return this.update_segment(e,t,n,i,o,a)}.bind(this),function(e){e.remove()}),this.callback_manager.run("update_reaction",this,e)},create_bezier:function(e){var t=e.append("g").attr("id",function(e){return e.bezier_id}).attr("class",function(e){return"bezier"});return t.append("path").attr("class","connect-line"),t.append("circle").attr("class",function(e){return"bezier-circle "+e.bezier}).style("stroke-width",String(1)+"px").attr("r",String(7)+"px"),this.callback_manager.run("create_bezier",this,e),t},update_bezier:function(e,t,n,r,i,o,a){var s=this.settings.get_option("hide_secondary_metabolites");if(!t)return void e.attr("visibility","hidden");e.attr("visibility","visible");e.style("visibility",function(e){var t=a[e.reaction_id].segments[e.segment_id],n=o[t.from_node_id],r=o[t.to_node_id];return s&&("metabolite"==r.node_type&&!r.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary)?"hidden":null}),e.select(".bezier-circle").call(this.behavior.turn_off_drag).call(n).on("mouseover",r).on("mouseout",i).attr("transform",function(e){return null==e.x||null==e.y?"":"translate("+e.x+","+e.y+")"}),e.select(".connect-line").attr("d",function(e){var t,n=a[e.reaction_id].segments[e.segment_id];return t="b1"==e.bezier?o[n.from_node_id]:o[n.to_node_id],null==e.x||null==e.y||null==t.x||null==t.y?"":"M"+e.x+", "+e.y+" "+t.x+","+t.y}),this.callback_manager.run("update_bezier",this,e)},create_node:function(e,t,n){var r=e.append("g").attr("class","node").attr("id",function(e){return"n"+e.node_id});return r.append("circle").attr("class",function(e){var t="node-circle";return null!==e.node_type&&(t+=" "+e.node_type+"-circle"),t}),r.filter(function(e){return"metabolite"===e.node_type}).append("text").attr("class","node-label label"),this.callback_manager.run("create_node",this,e),r},update_node:function(e,t,n,r,i,o,a,s,l){var u=this.settings.get_option("hide_secondary_metabolites"),c=this.settings.get_option("primary_metabolite_radius"),h=this.settings.get_option("secondary_metabolite_radius"),d=this.settings.get_option("marker_radius"),f=this.settings.get_option("hide_all_labels"),p=this.settings.get_option("identifiers_on_map"),g=this.settings.get_option("metabolite_styles"),v={color:this.settings.get_option("metabolite_no_data_color"),size:this.settings.get_option("metabolite_no_data_size")},m=this.behavior.label_mousedown,_=this.behavior.label_mouseover,b=this.behavior.label_mouseout,y=(e.select(".node-circle").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("visibility",function(e){return w(e,u)?"hidden":null}).attr("r",function(e){if("metabolite"===e.node_type){var r=n&&-1!==g.indexOf("size");if(r){var i=e.data;return null===i?v.size:t.metabolite_size(i)}return e.node_is_primary?c:h}return d}).style("fill",function(e){if("metabolite"===e.node_type){var r=n&&-1!==g.indexOf("color");if(r){var i=e.data;return null===i?v.color:t.metabolite_color(i)}return null}return null}).call(this.behavior.turn_off_drag).call(s).on("mousedown",r).on("click",i).on("mouseover",o).on("mouseout",a),e.select(".node-label").attr("visibility",f?"hidden":"visible"));f||y.style("visibility",function(e){return w(e,u)?"hidden":null}).attr("transform",function(e){return"translate("+e.label_x+","+e.label_y+")"}).text(function(e){var t=e[p];return n&&-1!==g.indexOf("text")&&(t+=" "+e.data_string),t}).call(this.behavior.turn_off_drag).call(l).on("mousedown",m).on("mouseover",function(e){_("node_label",e)}).on("mouseout",b);function w(e,t){return"metabolite"===e.node_type&&t&&!e.node_is_primary}this.callback_manager.run("update_node",this,e)},create_text_label:function(e){var t=e.append("g").attr("id",function(e){return"l"+e.text_label_id}).attr("class","text-label");return t.append("text").attr("class","label"),this.callback_manager.run("create_text_label",this,e),t},update_text_label:function(e){var t=this.behavior.text_label_mousedown,n=this.behavior.text_label_click,r=this.behavior.selectable_drag,i=this.behavior.turn_off_drag;e.select(".label").text(function(e){return e.text}).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).on("mousedown",t).on("click",n).call(i).call(r),this.callback_manager.run("update_text_label",this,e)},create_membrane:function(e){var t=e.append("rect").attr("class","membrane");return this.callback_manager.run("create_membrane",this,e),t},update_membrane:function(e){e.attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("stroke-width",function(e){return 10}).attr("rx",function(e){return 20}).attr("ry",function(e){return 20}),this.callback_manager.run("update_membrane",this,e)},create_reaction_label:function(e,t){var n=e.append("g").attr("class","reaction-label-group");return n.append("text").attr("class","reaction-label label"),n.append("g").attr("class","all-genes-label-group"),this.callback_manager.run("create_reaction_label",this,e),n},update_reaction_label:function(e,t){a(".4g");var n=this.settings.get_option("identifiers_on_map"),r=this.settings.get_option("reaction_styles"),o=this.settings.get_option("show_gene_reaction_rules"),s=this.settings.get_option("hide_all_labels"),l=this.settings.get_option("gene_font_size"),u=this.behavior.label_mousedown,c=this.behavior.label_mouseover,h=this.behavior.label_mouseout;e.attr("transform",function(e){return"translate("+e.label_x+","+e.label_y+")"}).call(this.behavior.turn_off_drag).call(this.behavior.reaction_label_drag);var d=e.select(".reaction-label").attr("visibility",s?"hidden":"visible");s||d.text(function(e){var i=e[n];return t&&-1!==r.indexOf("text")&&(i+=" "+e.data_string),i}).on("mousedown",u).on("mouseover",function(e){c("reaction_label",e)}).on("mouseout",h);var f=function(e,t){return e+1.5*l*(t+1)},p=e.select(".all-genes-label-group").selectAll(".gene-label-group").data(function(e){var t="gene_string"in e&&null!==e.gene_string&&o&&!s&&-1!==r.indexOf("text"),a="gene_reaction_rule"in e&&null!==e.gene_reaction_rule&&o&&!s;if(t)return console.warn("Showing gene_string. See TODO in source."),e.gene_string;if(a){var l=i.gene_string_for_data(e.gene_reaction_rule,null,e.genes,null,n,null);return l.forEach(function(t,n){t.label_x=e.label_x,t.label_y=f(e.label_y,n)}),l}return[]}),g=p.enter().append("g").attr("class","gene-label-group");g.append("text").attr("class","gene-label").style("font-size",l+"px").on("mousedown",u).on("mouseover",function(e){c("gene_label",e)}).on("mouseout",h);var v=g.merge(p);v.attr("transform",function(e,t){return"translate(0, "+f(0,t)+")"}),v.select("text").text(function(e){return e.text}),p.exit().remove(),this.callback_manager.run("update_reaction_label",this,e)},create_segment:function(e){var t=e.append("g").attr("class","segment-group").attr("id",function(e){return"s"+e.segment_id});return t.append("path").attr("class","segment"),t.append("g").attr("class","arrowheads"),t.append("g").attr("class","stoichiometry-labels"),this.callback_manager.run("create_segment",this,e),t},update_segment:function(e,t,n,i,o,a){var s=this.settings.get_option("reaction_styles"),u=a&&-1!==s.indexOf("size"),c=a&&-1!==s.indexOf("color"),h=this.settings.get_option("reaction_no_data_size"),d=this.settings.get_option("reaction_no_data_color"),f=this.settings.get_option("highlight_missing"),p=this.settings.get_option("hide_secondary_metabolites"),g=this.settings.get_option("primary_metabolite_radius"),v=this.settings.get_option("secondary_metabolite_radius"),m=function(e,n){var r=20,i=13;return n&&(i=null===e?h:t.reaction_size(e),isNaN(i)&&(i=h),r=2*i),{width:r,height:i}},_=function(e,t,n,r){var i=t||n>0?e.height:0,o=r?g:v;return o+i+10};e.selectAll(".segment").datum(function(){return this.parentNode.__data__}).style("visibility",function(e){var t=i[e.from_node_id],n=i[e.to_node_id];return p&&("metabolite"===n.node_type&&!n.node_is_primary||"metabolite"===t.node_type&&!t.node_is_primary)?"hidden":null}).attr("d",function(e){if(null===e.from_node_id||null===e.to_node_id)return null;var t=i[e.from_node_id],n=i[e.to_node_id],r=e.b1,o=e.b2;if("metabolite"===t.node_type){var a=m(e.data,u),s=_(a,e.reversibility,e.from_node_coefficient,t.node_is_primary),c=null===r?n:r;t=l(s,t,c,"start")}if("metabolite"==n.node_type){var a=m(e.data,u),s=_(a,e.reversibility,e.to_node_coefficient,n.node_is_primary),c=null===o?t:o;n=l(s,c,n,"end")}var h="M"+t.x+","+t.y+" ";return null!==r&&null!==o&&(h+="C"+r.x+","+r.y+" "+o.x+","+o.y+" "),h+=n.x+","+n.y}).style("stroke",function(e){var r=this.parentNode.parentNode.__data__.bigg_id,i=f&&null!==n&&!(r in n.reactions);if(i)return"red";if(c){var o=e.data;return null===o?d:t.reaction_color(o)}return null}).style("stroke-width",function(e){if(u){var n=e.data;return null===n?h:t.reaction_size(n)}return null});var b=e.select(".arrowheads").selectAll(".arrowhead").data(function(e){var t=[],n=i[e.from_node_id],o=e.b1,a=i[e.to_node_id],s=e.b2;if(p&&("metabolite"===a.node_type&&!a.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&(e.reversibility||e.from_node_coefficient>0)){var c=m(e.data,u),h=_(c,e.reversibility,e.from_node_coefficient,n.node_is_primary),d=null===o?a:o,f=r.to_degrees(r.get_angle([n,d]))+90,g=l(h,n,d,"start");t.push({data:e.data,x:g.x,y:g.y,size:c,rotation:f,show_arrowhead_flux:e.from_node_coefficient<0===e.reverse_flux||0===e.data})}if("metabolite"===a.node_type&&(e.reversibility||e.to_node_coefficient>0)){var c=m(e.data,u),h=_(c,e.reversibility,e.to_node_coefficient,a.node_is_primary),d=null===s?n:s,f=r.to_degrees(r.get_angle([a,d]))+90,g=l(h,d,a,"end");t.push({data:e.data,x:g.x,y:g.y,size:c,rotation:f,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}if(e.unconnected_segment_with_arrow){var c=m(e.data,u),d=a,f=r.to_degrees(r.get_angle([n,d]))+90;t.push({data:e.data,x:n.x,y:n.y,size:c,rotation:f,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}return t});b.enter().append("path").classed("arrowhead",!0).merge(b).attr("d",function(e){return"M"+[-e.size.width/2,0]+" L"+[0,e.size.height]+" L"+[e.size.width/2,0]+" Z"}).attr("transform",function(e){return"translate("+e.x+","+e.y+")rotate("+e.rotation+")"}).style("fill",function(e){if(c){if(e.show_arrowhead_flux){var n=e.data;return null===n?d:t.reaction_color(n)}return"#FFFFFF"}return null}).style("stroke",function(e){if(c){var n=e.data;return null===n?d:t.reaction_color(n)}return null}),b.exit().remove();var y=e.select(".stoichiometry-labels").selectAll(".stoichiometry-label").data(function(e){var t=[],n=i[e.from_node_id],o=e.b1,a=i[e.to_node_id],s=e.b2;if(p&&("metabolite"==a.node_type&&!a.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&1!=Math.abs(e.from_node_coefficient)){var c=m(e.data,u),h=1.5*_(c,!1,0,a.node_is_primary),d=null===o?a:o;d=r.c_plus_c(d,r.rotate_coords(d,.5,n));var f=l(h,n,d,"start");f=r.c_plus_c(f,{x:0,y:7}),t.push({coefficient:Math.abs(e.from_node_coefficient),x:f.x,y:f.y,data:e.data})}if("metabolite"===a.node_type&&1!==Math.abs(e.to_node_coefficient)){var c=m(e.data,u),h=1.5*_(c,!1,0,a.node_is_primary),d=null===s?n:s;d=r.c_plus_c(d,r.rotate_coords(d,.5,a));var f=l(h,d,a,"end");f=r.c_plus_c(f,{x:0,y:7}),t.push({coefficient:Math.abs(e.to_node_coefficient),x:f.x,y:f.y,data:e.data})}return t});y.enter().append("text").attr("class","stoichiometry-label").attr("text-anchor","middle").merge(y).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).text(function(e){return e.coefficient}).style("fill",function(e){if(c){var n=e.data;return null===n?d:t.reaction_color(n)}return null}),y.exit().remove(),this.callback_manager.run("update_segment",this,e)}},e.exports=s},function(e,t,n){var r=n(3),i=n(40).scaleLinear,o=n(17).format,a=r.make_class();a.prototype={init:function(){this.x=i(),this.y=i(),this.x_size=i(),this.y_size=i(),this.size=i(),this.reaction_color=i().clamp(!0),this.reaction_size=i().clamp(!0),this.metabolite_color=i().clamp(!0),this.metabolite_size=i().clamp(!0),this.scale_path=function(e){var t=this.x,n=this.y,r=o(".2f"),e=e.replace(/(M|L)([0-9-.]+),?\s*([0-9-.]+)/g,function(e,i,o,a){return i+[r(t(parseFloat(o))),r(n(parseFloat(a)))].join(", ")});return e=e.replace(/C([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)/g,function(e,i,o,a,s,l,u){return"C"+r(t(parseFloat(i)))+","+r(n(parseFloat(o)))+" "+r(t(parseFloat(a)))+","+r(n(parseFloat(s)))+" "+[r(t(parseFloat(l)))+","+r(n(parseFloat(u)))]})}.bind(this),this.scale_decimals=function(e,t,n){var r=o("."+String(n)+"f");return e=e.replace(/([0-9.]+)/g,function(e,n){return r(t(parseFloat(n)))})}},connect_to_settings:function(e,t,n){var r=function(e){var t=o(e,n().reaction);this.reaction_color.domain(t.domain),this.reaction_size.domain(t.domain),this.reaction_color.range(t.color_range),this.reaction_size.range(t.size_range)}.bind(this),i=function(e){var t=o(e,n().metabolite);this.metabolite_color.domain(t.domain),this.metabolite_size.domain(t.domain),this.metabolite_color.range(t.color_range),this.metabolite_size.range(t.size_range)}.bind(this);function o(e,t){var n=e.map(function(e){var n;if(e.type in t)n=t[e.type];else{if("value"!=e.type)throw new Error("Bad domain type "+e.type);n=e.value}return{v:n,color:e.color,size:e.size}}).sort(function(e,t){return e.v-t.v});return{domain:n.map(function(e){return e.v}),color_range:n.map(function(e){return e.color}),size_range:n.map(function(e){return e.size})}}e.streams.reaction_scale.onValue(r),e.streams.metabolite_scale.onValue(i),t.callback_manager.set("calc_data_stats__reaction",function(t){t&&r(e.get_option("reaction_scale"))}),t.callback_manager.set("calc_data_stats__metabolite",function(t){t&&i(e.get_option("metabolite_scale"))})}},e.exports=a},function(e,t,n){var r=n(3),i=n(20),o=n(18).drag,a=n(2),s=n(14),l=r.make_class();l.prototype={init:function(e,t){this.selection=e,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.resize_enabled=!0,this.callback_manager=new i,this.setup()},toggle_resize:function(e){s.isUndefined(e)&&(e=!this.resize_enabled);e?this.selection.selectAll(".drag-rect").style("pointer-events","auto"):this.selection.selectAll(".drag-rect").style("pointer-events","none")},setup:function(){var e=this,t=(this.width,this.height,100),n=10,i=this.selection.append("g").classed("canvas-group",!0).data([{x:this.x,y:this.y}]),s=i.append("rect").attr("id","mouse-node").attr("width",this.width*n).attr("height",this.height*n).attr("transform","translate("+[e.x-this.width*n/2,e.y-this.height*n/2]+")").attr("pointer-events","all");this.mouse_node=s;var l=i.append("rect").attr("id","canvas").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[e.x,e.y]+")"),u=o().on("start",m).on("drag",function(r){a.event.sourceEvent.stopPropagation();var i=Math.max(r.x+t/2,r.x+e.width+a.event.dx);e.width=i-r.x,p.attr("transform",function(e){return _(i-t/2,null,p.attr("transform"))}),s.attr("width",e.width*n),l.attr("width",e.width),g.attr("width",e.width-t),v.attr("width",e.width-t),e.callback_manager.run("resize")}),c=o().on("start",m).on("drag",function(r){var i=r.x;r.x=Math.min(r.x+e.width-t/2,a.event.x),e.x=r.x,e.width=e.width+(i-r.x),f.attr("transform",function(e){return _(e.x-t/2,null,f.attr("transform"))}),s.attr("transform",function(e){return _(e.x,null,s.attr("transform"))}).attr("width",e.width*n),l.attr("transform",function(e){return _(e.x,null,l.attr("transform"))}).attr("width",e.width),g.attr("transform",function(e){return _(e.x+t/2,null,g.attr("transform"))}).attr("width",e.width-t),v.attr("transform",function(e){return _(e.x+t/2,null,v.attr("transform"))}).attr("width",e.width-t),e.callback_manager.run("resize")}),h=o().on("start",m).on("drag",function(r){a.event.sourceEvent.stopPropagation();var i=r.y;r.y=Math.min(r.y+e.height-t/2,a.event.y),e.y=r.y,e.height=e.height+(i-r.y),g.attr("transform",function(e){return _(null,e.y-t/2,g.attr("transform"))}),s.attr("transform",function(e){return _(null,e.y,s.attr("transform"))}).attr("width",e.height*n),l.attr("transform",function(e){return _(null,e.y,l.attr("transform"))}).attr("height",e.height),f.attr("transform",function(e){return _(null,e.y+t/2,f.attr("transform"))}).attr("height",e.height-t),p.attr("transform",function(e){return _(null,e.y+t/2,p.attr("transform"))}).attr("height",e.height-t),e.callback_manager.run("resize")}),d=o().on("start",m).on("drag",function(r){a.event.sourceEvent.stopPropagation();var i=Math.max(r.y+t/2,r.y+e.height+a.event.dy);e.height=i-r.y,v.attr("transform",function(e){return _(null,i-t/2,v.attr("transform"))}),s.attr("height",e.height*n),l.attr("height",e.height),f.attr("height",e.height-t),p.attr("height",e.height-t),e.callback_manager.run("resize")}),f=i.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x-t/2,e.y+t/2]+")"}).attr("height",this.height-t).attr("id","dragleft").attr("width",t).attr("cursor","ew-resize").classed("resize-rect",!0).call(c),p=i.append("rect").classed("drag-rect",!0).attr("transform",function(n){return"translate("+[n.x+e.width-t/2,n.y+t/2]+")"}).attr("id","dragright").attr("height",this.height-t).attr("width",t).attr("cursor","ew-resize").classed("resize-rect",!0).call(u),g=i.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x+t/2,e.y-t/2]+")"}).attr("height",t).attr("id","dragtop").attr("width",this.width-t).attr("cursor","ns-resize").classed("resize-rect",!0).call(h),v=i.append("rect").classed("drag-rect",!0).attr("transform",function(n){return"translate("+[n.x+t/2,n.y+e.height-t/2]+")"}).attr("id","dragbottom").attr("height",t).attr("width",this.width-t).attr("cursor","ns-resize").classed("resize-rect",!0).call(d);function m(){a.event.sourceEvent.stopPropagation()}function _(e,t,n){var i=r.d3_transform_catch(n),o=i.translate;return null!==e&&(o[0]=e),null!==t&&(o[1]=t),"translate("+o+")"}},size_and_location:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},e.exports=l},function(e,t,n){var r=n(3),i=n(63).brush,o=n(63).brushSelection,a=(n(40).scaleIdentity,n(2)),s=(n(2).select,r.make_class());function l(e){e.selectAll("rect").attr("cursor",null)}s.prototype={init:function(e,t,n,r){this.brush_sel=e.append("g").attr("id","brush-container");var i=this.brush_sel.node(),o=e.select(r).node().nextSibling;i!==o&&i.parentNode.insertBefore(i,o);this.enabled=t,this.map=n},toggle:function(e){void 0===e&&(e=!this.enabled);e?this.setup_selection_brush():this.brush_sel.selectAll("*").remove()},setup_selection_brush:function(){var e=this.map,t=this.brush_sel,n=e.sel.selectAll("#nodes,#text-labels"),r=e.canvas.size_and_location(),s=r.width,u=r.height,c=r.x,h=r.y;t.selectAll("*").remove();var d=!1,f=i().extent([[c,h],[c+s,h+u]]).on("start",function(){l(t),e.settings.get_option("hide_secondary_metabolites")&&(e.settings.set_conditional("hide_secondary_metabolites",!1),e.draw_everything(),e.set_status("Showing secondary metabolites. You can hide them again in Settings.",2e3))}).on("brush",function(){var e=a.event.sourceEvent.shiftKey,t=o(this);if(null!==t){var r=e?n.selectAll(".node:not(.selected),.text-label:not(.selected)"):n.selectAll(".node,.text-label");r.classed("selected",function(e){var n=e.x,r=e.y;return t[0][0]<=n&&n<t[1][0]&&t[0][1]<=r&&r<t[1][1]})}}).on("end",function(){l(t);var n=o(this);null===n?d?d=!1:e.select_none():(d=!0,t.call(f.move,null))});t.call(f),l(t)}},e.exports=s},function(e,t,n){var r=n(3),i=n(20),o=n(14),a=r.make_class();a.prototype={init:function(e,t,n){var a=e.attr("class","search-container").style("display","none");this.input=a.append("input").attr("class","search-bar");var l=a.append("div").attr("class","btn-group btn-group-sm");l.append("button").attr("class","btn btn-default").on("click",this.previous.bind(this)).append("span").attr("class","glyphicon glyphicon-chevron-left"),l.append("button").attr("class","btn btn-default").on("click",this.next.bind(this)).append("span").attr("class","glyphicon glyphicon-chevron-right"),this.counter=a.append("div").attr("class","search-counter"),a.append("button").attr("class","btn btn-sm btn-default close-button").on("click",function(){this.toggle(!1)}.bind(this)).append("span").attr("class","glyphicon glyphicon-remove"),this.callback_manager=new i,this.selection=a,this.map=n,this.search_index=t,this.current=1,this.results=null;var u=function(e){var t;this.current=1,this.results=(t=this.search_index.find(e.value),o.uniq(t,function(e){var t=s[e.type];return t[0]+e[t[1]]})),this.update()}.bind(this,this.input.node());this.input.on("input",r.debounce(u,200))},is_visible:function(){return"none"!==this.selection.style("display")},toggle:function(e){this.is_active=void 0===e?!this.is_active:e;this.is_active?(this.selection.style("display",null),this.counter.text(""),this.input.node().value="",this.input.node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.toggle(!1)}.bind(this),!0),this.clear_next=this.map.key_manager.add_key_listener(["enter","ctrl+g"],function(){this.next()}.bind(this),!1),this.clear_previous=this.map.key_manager.add_key_listener(["shift+enter","shift+ctrl+g"],function(){this.previous()}.bind(this),!1),this.callback_manager.run("show")):(this.map.highlight(null),this.selection.style("display","none"),this.results=null,this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.clear_next&&this.clear_next(),this.clear_next=null,this.clear_previous&&this.clear_previous(),this.clear_previous=null,this.callback_manager.run("hide"))},update:function(){if(null===this.results)this.counter.text(""),this.map.highlight(null);else if(0===this.results.length)this.counter.text("0 / 0"),this.map.highlight(null);else{this.counter.text(this.current+" / "+this.results.length);var e=this.results[this.current-1];if("reaction"==e.type)this.map.zoom_to_reaction(e.reaction_id),this.map.highlight_reaction(e.reaction_id);else if("metabolite"==e.type)this.map.zoom_to_node(e.node_id),this.map.highlight_node(e.node_id);else{if("text_label"!=e.type)throw new Error("Bad search index data type: "+e.type);this.map.zoom_to_text_label(e.text_label_id),this.map.highlight_text_label(e.text_label_id)}}},next:function(){if(null===this.results)return;this.current===this.results.length?this.current=1:this.current+=1;this.update()},previous:function(){if(null===this.results)return;1===this.current?this.current=this.results.length:this.current-=1;this.update()}},e.exports=a;var s={metabolite:["m","node_id"],reaction:["r","reaction_id"],text_label:["t","text_label_id"]}},function(e,t,n){var r=n(3),i=n(20),o=n(107),a=r.make_class();a.prototype={init:function(e,t,n,r){this.sel=e,this.settings=t,this.draw=!1;var a=this.settings.get_option("unique_map_id");this.unique_string=null===a?"":"."+a;var s=e.append("div").attr("class","settings-box-background").style("display","none"),l=s.append("div").attr("class","settings-box-container").style("display","none");l.append("button").attr("class","btn btn-sm btn-default settings-button").on("click",function(){this.accept_changes()}.bind(this)).append("span").attr("class","glyphicon glyphicon-ok"),l.append("button").attr("class","btn btn-sm btn-default settings-button settings-button-close").on("click",function(){this.abandon_changes()}.bind(this)).append("span").attr("class","glyphicon glyphicon-remove");var u=l.append("div").attr("class","settings-box");u.append("div").text("Tip: Hover over an option to see more details about it.").classed("settings-tip",!0),u.append("hr"),u.append("div").text("View and build options").attr("class","settings-section-heading-large"),this.view_gui(u.append("div")),u.append("hr"),u.append("div").text("Reactions").attr("class","settings-section-heading-large");var c=new o(u.append("div"),"reaction",this.settings,n.get_data_statistics.bind(n));n.callback_manager.set("calc_data_stats__reaction",function(e){e&&(c.update(),c.update_no_data())}),u.append("div").text("Reaction or Gene data").attr("class","settings-section-heading"),this.style_gui(u.append("div"),"reaction",function(e){r&&(r("reaction",e),c.update(),c.update_no_data())}),u.append("hr"),u.append("div").text("Metabolites").attr("class","settings-section-heading-large");var h=new o(u.append("div"),"metabolite",this.settings,n.get_data_statistics.bind(n));n.callback_manager.set("calc_data_stats__metabolite",function(e){e&&(h.update(),h.update_no_data())}),u.append("div").text("Metabolite data").attr("class","settings-section-heading"),this.style_gui(u.append("div"),"metabolite",function(e){r&&(r("metabolite",e),h.update(),h.update_no_data())}),this.callback_manager=new i,this.map=n,this.selection=l,this.background=s},is_visible:function(){return"none"!=this.selection.style("display")},toggle:function(e){void 0===e&&(e=!this.is_visible());e?(this.hold_changes(),this.selection.style("display","inline-block"),this.background.style("display","block"),this.selection.select("input").node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.abandon_changes()}.bind(this),!0),this.clear_enter=this.map.key_manager.add_enter_listener(function(){this.accept_changes()}.bind(this),!0),this.callback_manager.run("show")):(this.draw&&this.map.draw_everything(),this.selection.style("display","none"),this.background.style("display","none"),this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.clear_enter&&this.clear_enter(),this.clear_enter=null,this.callback_manager.run("hide"))},hold_changes:function(){this.settings.hold_changes()},abandon_changes:function(){this.draw=!1,this.settings.abandon_changes(),this.toggle(!1)},accept_changes:function(){this.sel.selectAll("input").each(function(e){this.blur()}),this.draw=!0,this.settings.accept_changes(),this.toggle(!1)},style_gui:function(e,t,n){var r=e.append("table").attr("class","settings-table"),i=this.settings;r.append("tr").call(function(e){e.append("td").text("Options:").attr("class","options-label").attr("title","Options for "+t+" data.");var r=e.append("td"),o=[["Absolute value","abs","If checked, use the absolute value when calculating colors and sizes of "+t+"s on the map"],["Size","size","If checked, then size the "+("metabolite"==t?"radius of metabolite circles ":"thickness of reaction lines ")+"according to the value of the "+t+" data"],["Color","color","If checked, then color the "+("metabolite"==t?"metabolite circles ":"reaction lines ")+"according to the value of the "+t+" data"],["Text (Show data in label)","text","If checked, then show data values in the "+t+" labels"]],a=r.selectAll(".option-group").data(o).enter().append("label").attr("class","option-group");a.append("input").attr("type","checkbox").on("change",function(e){i.set_conditional(t+"_styles",function(){var e=[];return r.selectAll("input").each(function(t){this.checked&&e.push(t[1])}),e}()),"abs"==e[1]&&n(this.checked)}).each(function(e){i.streams[t+"_styles"].onValue(function(t){this.checked=-1!=t.indexOf(e[1])}.bind(this))}),a.append("span").text(function(e){return e[0]}).attr("title",function(e){return e[2]})}),r.append("tr").call(function(e){e.append("td").text("Comparison:").attr("class","options-label").attr("title","The function that will be used to compare datasets, when paired data is loaded");var n=e.append("td").attr("title","The function that will be used to compare datasets, when paired data is loaded").selectAll(".option-group").data([["Fold Change","fold"],["Log2(Fold Change)","log2_fold"],["Difference","diff"]]).enter().append("label").attr("class","option-group");n.append("input").attr("type","radio").attr("name",t+"_compare_style"+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&i.set_conditional(t+"_compare_style",this.value)}).each(function(){i.streams[t+"_compare_style"].onValue(function(e){this.checked=this.value==e}.bind(this))}),n.append("span").text(function(e){return e[0]})}.bind(this)),"reaction"===t&&e.append("table").attr("class","settings-table").attr("title","The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)").append("tr").call(function(e){e.append("td").text("Method for evaluating AND:").attr("class","options-label-wide");var t=e.append("td"),n=t.selectAll(".option-group").data([["Mean","mean"],["Min","min"]]),r=n.enter().append("label").attr("class","option-group"),o="and_method_in_gene_reaction_rule";r.append("input").attr("type","radio").attr("name",o+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&i.set_conditional(o,this.value)}).each(function(){i.streams[o].onValue(function(e){this.checked=this.value==e}.bind(this))}),r.append("span").text(function(e){return e[0]})}.bind(this))},view_gui:function(e,t,n,r){var i=this.settings;e.append("table").attr("class","settings-table").append("tr").call(function(e){e.attr("title","The identifiers that are show in the reaction, gene, and metabolite labels on the map."),e.append("td").text("Identifiers:").attr("class","options-label");var t=e.append("td"),n=t.selectAll(".option-group").data([["ID's","bigg_id"],["Descriptive names","name"]]),r=n.enter().append("label").attr("class","option-group"),o="identifiers_on_map";r.append("input").attr("type","radio").attr("name",o+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&i.set_conditional(o,this.value)}).each(function(){i.streams[o].onValue(function(e){this.checked=this.value==e}.bind(this))}),r.append("span").text(function(e){return e[0]})}.bind(this));var o=e.append("div").attr("class","settings-container").selectAll(".option-group").data([["scroll_behavior","Scroll to zoom (instead of scroll to pan)","If checked, then the scroll wheel and trackpad will control zoom rather than pan.",{zoom:!0,pan:!1}],["hide_secondary_metabolites","Hide secondary metabolites","If checked, then only the primary metabolites will be displayed."],["show_gene_reaction_rules","Show gene reaction rules","If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)"],["hide_all_labels","Hide reaction, gene, and metabolite labels","If checked, hide all reaction, gene, and metabolite labels"],["allow_building_duplicate_reactions","Allow duplicate reactions","If checked, then allow duplicate reactions during model building."],["highlight_missing","Highlight reactions not in model","If checked, then highlight in red all the reactions on the map that are not present in the loaded model."],["enable_tooltips","Show tooltips","Show tooltips when hovering over reactions, metabolites, and genes"]]),a=o.enter().append("label").attr("class","option-group full-line");a.append("input").attr("type","checkbox"),a.append("span");var s=a.merge(o);s.attr("title",function(e){return e[2]}),s.select("input").on("change",function(e){if(e.length>=4){for(var t in e[3])if(e[3][t]==this.checked){i.set_conditional(e[0],t);break}}else i.set_conditional(e[0],this.checked)}).each(function(e){i.streams[e[0]].onValue(function(t){e.length>=4?this.checked=e[3][t]:this.checked=t}.bind(this))}),s.select("span").text(function(e){return e[1]}),o.exit().remove(),e.append("div").style("margin-top","16px").classed("settings-tip",!0).text("Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).")}},e.exports=a},function(e,t,n){var r=n(3),i=(n(31),n(40).scaleLinear),o=n(17).format,a=n(18).drag,s=n(2).select,l=n(2),u=r.make_class();u.prototype={init:function(e,t,n,r){var i="grad"+t+this.unique_string;this.w=400,this.h=30,this.x=20,this.input_width=90,this.input_height=24;var o=e.append("div").attr("class","scale-editor");this.data_not_loaded=o.append("div").attr("class","data-not-loaded").text(("reaction"===t?"Reaction and gene":"Metabolite")+" data not loaded"),this.input_label_group=o.append("div").attr("class","input-label-group");var a=o.append("div").style("top",3*this.input_height+56+10+"px").attr("class","no-data");a.append("span").text("Styles for "+t+"s with no data").attr("class","no-data-heading"),this.no_data_container=a.append("div");var s=o.append("div").attr("class","centered");this.add_group=s.append("div"),this.trash_group=s.append("div").attr("class","trash-container");var l=s.append("svg").attr("class","scale-svg");this.input_group=s.append("div").attr("class","input-container"),this.gradient=l.append("defs").append("linearGradient").attr("id",i),l.append("rect").attr("class","rect").attr("fill","url(#"+i+")").attr("width",this.w+"px").attr("height",this.h+"px").attr("x",this.x+"px"),this.pickers_group=l.append("g"),this.type=t,this.settings=n,this.get_data_statistics=r;var u=this.settings.get_option("unique_map_id");this.unique_string=null===u?"":"."+u,this.no_data={},["color","size"].forEach(function(e){this.no_data[e]=null,this.settings.streams[this.type+"_no_data_"+e].onValue(function(t){this.no_data[e]=t,this.update_no_data()}.bind(this))}.bind(this)),this.settings.streams[t+"_scale"].onValue(function(e){this.scale=e,this.update()}.bind(this))},update:function(){var e=this.scale,t=this.get_data_statistics()[this.type],n=this.x,r=this._data_not_loaded();r&&(e=[{type:"min",color:null,size:null},{type:"max",color:null,size:null}],t={min:0,max:1});var u=i().domain([0,this.w]).range([t.min,t.max]),c=i().domain([0,this.w]).range([0,t.max-t.min]),h=function(e,t){this.input_group.selectAll(".input-set").each(function(t){s(this).classed("selected-set",e===t)})}.bind(this),d=function(e){return"value"===e.type?e.value:t[e.type]},f=function(e){this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update()}.bind(this),p=e.map(function(e){var n=t.max===t.min?"min"===e.type?0:-1:(d(e)-t.min)/(t.max-t.min);return{frac:n,color:e.color}}).filter(function(e){return e.frac>=0&&e.frac<=1}).sort(function(e,t){return e.frac-t.frac}),g=this.gradient.selectAll("stop").data(p);g.enter().append("stop").merge(g).attr("offset",function(e){return 100*e.frac+"%"}).style("stop-color",function(e){return null===e.color?"#F1ECFA":e.color}),g.exit().remove(),this.data_not_loaded.style("visibility",r?null:"hidden");var v=this.w,m=0,_=e.sort(function(e,t){return d(e)-d(t)}).map(function(e,r){var i,o=d(e);return i="value"===e.type&&o<=t.min?u.invert(t.min)-7+n-16:"value"===e.type&&o>=t.max?u.invert(t.max)-7+n+16:u.invert(o)-7+n,"min"!==e.type&&"max"!==e.type&&(i=Math.min(Math.max(i,m+16),v-2)),m=i,Object.assign({},e,{adjusted_x:i})}.bind(this)),b=this.pickers_group.selectAll(".picker").data(_),y=a().on("start",h).on("drag",function(n,r){-1===["value","min","max"].indexOf(e[r].type)&&(e[r].value=d(n),e[r].type="value");var i=e[r].value+c(l.event.dx),o=c(16);i>t.max-o&&(i=t.max-o),i<t.min+o&&(i=t.min+o),i=Math.floor(100*i)/100,e[r].value=i,this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update()}.bind(this));b.enter().append("g").attr("class","picker").style("cursor","pointer").append("rect").merge(b).select("rect").attr("x",function(e,t){return e.adjusted_x}).attr("width","14px").attr("height","35px").call(y),b.exit().remove();var w=this.trash_group.selectAll("span").data(_);w.enter().append("span").merge(w).attr("class",function(e,t){return"min"===e.type||"max"===e.type?null:"trash glyphicon glyphicon-trash"}).style("left",function(e){return e.adjusted_x+"px"}).on("click",function(t,n){"min"!==t.type&&"max"!==t.type&&(e=e.slice(0,n).concat(e.slice(n+1)),this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update())}.bind(this)),w.exit().remove();var x=this.add_group.selectAll(".add").data(["add"]);x.enter().append("span").attr("class","add glyphicon glyphicon-plus").merge(x).on("click",function(n){if(!r){for(var i=(t.max+t.min)/2,o=c(16),a=0,s=0,l=e.length;s<l;s++){var u=d(e[s]);Math.abs(u-i)<o&&((i+=o)>t.max-o&&(i=t.max-o),i<t.min+o&&(i=t.min+o)),i>u&&(a=s)}e.push({type:"value",value:i,color:e[a].color,size:e[a].size}),f(e)}}.bind(this)),x.exit().remove();var k=this.input_label_group.selectAll(".row-label").data(["Value:","Color:","Size:"]);k.enter().append("div").attr("class","row-label").style("height",this.input_height+"px").style("line-height",this.input_height+"px").merge(k).style("top",function(e,t){return 56+t*this.input_height+"px"}.bind(this)).text(function(e){return e}),k.exit().remove();var S=this.input_group.selectAll(".input-set").data(_),C=S.enter().append("div").attr("class","input-set");C.append("input").attr("class","domain-input").style("width",this.input_width+"px"),C.append("select").attr("class","domain-type-picker"),C.append("input").attr("class","color-input").style("width",this.input_width+"px"),C.append("input").attr("type","color").style("visibility",function(){return"text"==this.type?"hidden":null}).attr("class","color-picker"),C.append("input").attr("class","size-input").style("width",this.input_width+"px");var E=C.merge(S);E.style("height",3*this.input_height+"px").style("width",this.input_width+"px").style("left",function(e){var t=e.adjusted_x;return t+this.input_width>this.w+this.x&&(t=t-this.input_width+7),t+"px"}.bind(this)).on("mousedown",h);var T=o(".4g");E.select(".domain-input").style("height",this.input_height+"px").each(function(e,t){"value"==e.type?(this.value=d(e),this.disabled=!1):(this.value=e.type+" ("+T(d(e))+")",this.disabled=!0)}).on("change",function(t,n){c(16);var r=parseFloat(this.value);e[n].value=r,f(e)});var P=E.select(".domain-type-picker"),A=["value"].concat(Object.keys(t)).filter(function(e){return"min"!==e&&"max"!==e}),O=P.selectAll("option").data(A);O.enter().append("option").merge(O).attr("value",function(e){return e}).text(function(e){return e}),O.exit().remove(),P.style("visibility",function(e){return"min"==e.type||"max"==e.type?"hidden":null}).style("left",this.input_width-20+"px").style("width","20px").each(function(e,t){var n=0;s(this).selectAll("option").each(function(t,r){this.value==e.type&&(n=r)}),this.selectedIndex=n}).on("change",function(n,r){"value"==this.value&&(e[r].value=t[n.type]),e[r].type=this.value,f(e)}),E.select(".color-input").style("height",this.input_height+"px").style("top",this.input_height+"px").each(function(e,t){this.value=null===e.color?"":e.color,this.disabled=null===e.color}).on("change",function(t,n){e[n].color=this.value,f(e)}),E.select(".color-picker").style("left",this.input_width-this.input_height+"px").style("top",this.input_height+"px").style("width",this.input_height+"px").style("height",this.input_height+"px").each(function(e,t){this.value=null===e.color?"#dddddd":e.color,this.disabled=null===e.color}).on("change",function(t,n){e[n].color=this.value,f(e)}),E.select(".size-input").style("height",this.input_height+"px").style("top",2*this.input_height+"px").each(function(e,t){this.value=null===e.size?"":e.size,this.disabled=null===e.size}).on("change",function(t,n){e[n].size=parseFloat(this.value),f(e)}),S.exit().remove()},update_no_data:function(){var e=this.no_data,t=this._data_not_loaded(),n=this.no_data_container.selectAll(".input-group").data([["color","Color:"],["size","Size:"]]),r=n.enter().append("div").attr("class","input-group");r.append("span"),r.append("input"),r.append("input").attr("type","color").style("visibility",function(e){return"text"===this.type||"color"!==e[0]?"hidden":null}).attr("class","color-picker");var i=r.merge(n);i.select("span").text(function(e){return e[1]}).style("height",this.input_height+"px").style("line-height",this.input_height+"px").style("left",function(e,t){return(40+this.input_width+10)*t+"px"}.bind(this));(function(e){return this.settings.get_option(this.type+"_no_data_"+e)}).bind(this);i.select("input").style("left",function(e,t){return 40+(40+this.input_width+10)*t+"px"}.bind(this)).style("height",this.input_height+"px").style("width",this.input_width+"px").each(function(n){this.value=t?"":e[n[0]],this.disabled=t}).on("change",function(e){var t=l.event.target.value;"size"===e[0]&&(t=parseFloat(t)),this.no_data[e[0]]=t,this.settings.set_conditional(this.type+"_no_data_"+e[0],t),this.update_no_data()}.bind(this)),i.select(".color-picker").style("left",function(e,t){return(40+this.input_width)*(t+1)-this.input_height+"px"}.bind(this)).style("width",this.input_height+"px").style("height",this.input_height+"px").each(function(n,r){this.value=t?"#dddddd":e[n[0]],this.disabled=t}).on("change",function(e,t){var n=l.event.target.value;this.no_data[e[0]]=n,this.settings.set_conditional(this.type+"_no_data_"+e[0],n),this.update_no_data()}.bind(this)),n.exit().remove()},_data_not_loaded:function(){var e=this.get_data_statistics()[this.type];return null===e.max||null===e.min}},e.exports=u},function(e,t,n){var r=n(3),i=n(36),o=(n(38),r.make_class());o.prototype={init:function(e,t,n){var r=e.append("div").attr("id","text-edit-input");this.placed_div=i(r,t),this.placed_div.hide(),this.input=r.append("input"),this.map=t,this.setup_map_callbacks(t),this.zoom_container=n,this.setup_zoom_callbacks(n),this.is_new=!1},setup_map_callbacks:function(e){e.callback_manager.set("edit_text_label.text_edit_input",function(e,t){this.show(e,t)}.bind(this)),e.callback_manager.set("new_text_label.text_edit_input",function(e){null!==this.active_target&&this._accept_changes(this.active_target.target),this.hide(),this._add_and_edit(e)}.bind(this)),e.callback_manager.set("hide_text_label_editor.text_edit_input",function(){this.hide()}.bind(this))},setup_zoom_callbacks:function(e){e.callback_manager.set("zoom.text_edit_input",function(){this.active_target&&this._accept_changes(this.active_target.target),this.hide()}.bind(this)),e.callback_manager.set("go_to.text_edit_input",function(){this.active_target&&this._accept_changes(this.active_target.target),this.hide()}.bind(this))},is_visible:function(){return this.placed_div.is_visible()},show:function(e,t){this.active_target&&this._accept_changes(this.active_target.target);this.active_target={target:e,coords:t},e.each(function(e){this.input.node().value=e.text}.bind(this)),this.placed_div.place(t),this.input.node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this._accept_changes(e),this.hide()}.bind(this),!0),this.clear_enter=this.map.key_manager.add_enter_listener(function(e){this._accept_changes(e),this.hide()}.bind(this,e),!0)},hide:function(){this.is_new=!1,this.placed_div.hide(),this.input.attr("value",""),this.active_target=null,this.clear_escape&&this.clear_escape();this.clear_escape=null,this.clear_enter&&this.clear_enter();this.clear_enter=null},_accept_changes:function(e){if(""===this.input.node().value)e.each(function(e){var t={};t[e.text_label_id]=this.map.text_labels[e.text_label_id],this.map.delete_selectable({},t,!0)}.bind(this));else{var t=[];e.each(function(e){this.map.edit_text_label(e.text_label_id,this.input.node().value,!0,this.is_new),t.push(e.text_label_id)}.bind(this))}},_add_and_edit:function(e){this.is_new=!0;var t=this.map.new_text_label(e,""),n=this.map.sel.select("#text-labels").selectAll(".text-label").filter(function(e){return e.text_label_id===t});n.select("text").classed("edit-text-cursor",!0),this.show(n,e)}},e.exports=o},function(e,t,n){var r=n(3),i=r.make_class();i.prototype={init:function(e,t){var n=e.append("select").attr("id","quick-jump-menu").attr("class","form-control");this.selector=n;var i=r.parse_url_components(window),o="map_name"in i?i.map_name:null,a="quick_jump_path"in i?i.quick_jump_path:null,s="quick_jump"in i?i.quick_jump:[],l=["\u2014 Jump to map \u2014"].concat(s);null!==o&&(l=l.filter(function(e){return e!=o}));var u=function(e){t(e,a,function(t){t?this.replace_state_for_map_name(e):this.reset_selection()}.bind(this))}.bind(this);if(l.length>1){var c=n.selectAll("option").data(l);c.enter().append("option").merge(c).text(function(e){return e.split(".").slice(-1)[0]}),n.on("change",function(){var e=this.options[this.selectedIndex].__data__;u(e)})}else n.style("display","none")},reset_selection:function(){this.selector.node().selectedIndex=0},replace_state_for_map_name:function(e){var t=window.location.href.replace(/(map_name=)([^&]+)(&|$)/,"$1"+e+"$3");window.history.replaceState("Not implemented","",t)}},e.exports=i},function(e,t,n){var r=n(3),i=n(36),o=n(39),a=n(14),s=r.make_class();s.prototype={init:function(e,t,n,r){var s=e.append("div").attr("id","tooltip-container");this.placed_div=i(s,t),s.on("mouseover",this.cancel_hide_tooltip.bind(this)),s.on("mouseleave",this.hide.bind(this)),this.map=t,this.setup_map_callbacks(t),this.zoom_container=r,this.setup_zoom_callbacks(r),this.tooltip_component=n,this.tooltip_function=a.isFunction(n)?function(e){n({state:e,el:s.node()})}:null,this.tinier_tooltip=o.checkType(o.COMPONENT,n)?o.run(n,s.node()):null,this.delay_hide_timeout=null},setup_map_callbacks:function(e){e.callback_manager.set("show_tooltip.tooltip_container",function(t,n){e.settings.get_option("enable_tooltips")&&this.show(t,n)}.bind(this)),e.callback_manager.set("hide_tooltip.tooltip_container",this.hide.bind(this)),e.callback_manager.set("delay_hide_tooltip.tooltip_container",this.delay_hide.bind(this))},setup_zoom_callbacks:function(e){e.callback_manager.set("zoom.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this)),e.callback_manager.set("go_to.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this))},is_visible:function(){return this.placed_div.is_visible()},show:function(e,t){if(this.cancel_hide_tooltip(),!a.contains(["reaction_label","node_label","gene_label"],e))throw new Error("Tooltip not supported for object type "+e);var n={x:t.label_x,y:t.label_y+10};this.placed_div.place(n);var r={biggId:t.bigg_id,name:t.name,loc:n,data:t.data_string,type:e.replace("_label","").replace("node","metabolite")};null!==this.tooltip_function?this.tooltip_function(r):this.tinier_tooltip&&this.tinier_tooltip.reducers.setContainerData(r)},hide:function(){this.placed_div.hide()},delay_hide:function(){this.delay_hide_timeout=setTimeout(function(){this.hide()}.bind(this),100)},cancel_hide_tooltip:function(){null!==this.delay_hide_timeout&&clearTimeout(this.delay_hide_timeout)}},e.exports=s},function(e,t,n){var r=n(3),i=n(39),o=i.createComponent,a=(i.createInterface,i.interfaceTypes,i.createElement),s=i.render,l=(n(14),{"min-width":"270px","min-height":"100px","border-radius":"2px",border:"1px solid #b58787",padding:"7px","background-color":"#fff","text-align":"left","font-size":"16px","font-family":"sans-serif",color:"#111","box-shadow":"4px 6px 20px 0px rgba(0, 0, 0, 0.4)"}),u={"font-size":"18px","font-weight":"bold"},c={"border-radius":"3px","background-color":"#eee",border:"1px solid #ddd","margin-top":"4px"},h={position:"absolute",top:"4px",right:"4px",color:"#d27066","background-color":"#ffeded","border-radius":"2px","font-size":"14px","text-align":"right",padding:"0px 5px"};function d(e,t){return"metabolite"===t?r.decompartmentalize(e)[0]:e}var f=o({displayName:"DefaultTooltip",init:function(){return{biggId:"",name:"",loc:{x:0,y:0},data:null,type:null}},reducers:{setContainerData:function(e){return Object.assign({},e.state,{biggId:e.biggId,name:e.name,loc:e.loc,data:e.data,type:e.type})}},methods:{openBigg:function(e){var t=e.state.type,n=e.state.biggId,r="http://bigg.ucsd.edu/",i="gene"===t?r+"search?query="+n:r+"universal/"+t+"s/"+d(n,t);window.open(i)}},render:function(e){var t,n="Open "+d(e.state.biggId,e.state.type)+" in BiGG Models.";return s(e.el,a("div",{style:l},a("span",{style:u},e.state.biggId),a("br"),"name: "+e.state.name,a("br"),"data: "+(e.state.data&&"(nd)"!==e.state.data?e.state.data:"no data"),a("br"),a("button",{style:c,onClick:e.methods.openBigg},n),a("div",{style:h},null===(t=e.state.type)?t:t.charAt(0).toUpperCase()+t.slice(1))))}});e.exports={DefaultTooltip:f}},function(e,t,n){var r=n(3),i=n(25).json;e.exports=function(e){var t=r.set_options(e,{selection:null,getdatafiles:null,datafiles:null,update_callback:null,target:null});if(null===t.selection)throw new Error("No selection provided for DataMenu");var n=t.selection.select(".data-menu");n.empty()&&(n=t.selection.append("div").attr("class","data-menu"));var o=n.append("form").append("select").attr("class","dropdown-menu");return t.getdatafiles?(t.datafiles&&console.warn("DataMenu: getdatafiles option overrides datafiles"),i(t.getdatafiles,function(e,n){return e?console.warn(e):(a(t.target,n.data,o,t.update_callback,t.selection),null)})):t.datafiles?a(t.target,t.datafiles,o,t.update_callback,t.selection):console.warn("DataMenu: No datafiles given"),{update:l};function a(e,t,n,r,i){n.node().addEventListener("change",function(){s(e,this.value,i,r)},!1);var o=t[0];l(t,n),s(e,o,i,r)}function s(e,n,i,o){r.load_the_file(e,n,function(e,n){if(e)return console.warn(e);t.data=n,o&&o(n)})}function l(e,t){t.selectAll(".menu-option").data(e).enter().append("option").attr("value",function(e){return e}).text(function(e){return e}),t.node().focus()}}},function(e,t,n){var r=n(3),i=n(25).json;function o(e,t,n,r){var i=n[e+"s"].filter(function(n){return n[e+"_name"]==t});if(0==i.length)throw new Error("Bad "+e+" "+t);return r+encodeURIComponent(i[0].organism)+"/"+encodeURIComponent(i[0][e+"_name"])+".json"}e.exports={load_map_model_from_url:function(e,t,n,a,s){var l=r.parse_url_components(window,a),u=function(e){e(null)},c=function(e){e(null)};if(l.map_name){var h=o("map",l.map_name,n,e);h&&(u=function(e){i(h,function(t,n){t&&console.warn(t),e(n)})})}if(l.model_name){var d=o("model",l.model_name,n,t);d&&(c=function(e){i(d,function(t,n){t&&console.warn(t),e(n)})})}l.hasOwnProperty("enable_editing")&&(a.enable_editing="true"===l.enable_editing.toLowerCase());u(function(e){c(function(t){s(e,t,a)})})}}}]]);
//# sourceMappingURL=2.14dd6978.chunk.js.map